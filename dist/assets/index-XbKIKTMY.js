(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function po(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Be={},Or=[],nn=()=>{},fh=()=>!1,ws=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),go=t=>t.startsWith("onUpdate:"),Qe=Object.assign,mo=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},hh=Object.prototype.hasOwnProperty,Me=(t,e)=>hh.call(t,e),ae=Array.isArray,xr=t=>Ss(t)==="[object Map]",Xu=t=>Ss(t)==="[object Set]",he=t=>typeof t=="function",He=t=>typeof t=="string",Fn=t=>typeof t=="symbol",Ue=t=>t!==null&&typeof t=="object",Yu=t=>(Ue(t)||he(t))&&he(t.then)&&he(t.catch),Qu=Object.prototype.toString,Ss=t=>Qu.call(t),ph=t=>Ss(t).slice(8,-1),Zu=t=>Ss(t)==="[object Object]",_o=t=>He(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ti=po(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ks=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},gh=/-(\w)/g,Rn=ks(t=>t.replace(gh,(e,n)=>n?n.toUpperCase():"")),mh=/\B([A-Z])/g,mr=ks(t=>t.replace(mh,"-$1").toLowerCase()),ed=ks(t=>t.charAt(0).toUpperCase()+t.slice(1)),Vs=ks(t=>t?`on${ed(t)}`:""),Pn=(t,e)=>!Object.is(t,e),Gs=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},td=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},_h=t=>{const e=parseFloat(t);return isNaN(e)?t:e},yh=t=>{const e=He(t)?Number(t):NaN;return isNaN(e)?t:e};let Xo;const Cs=()=>Xo||(Xo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function yo(t){if(ae(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=He(r)?Sh(r):yo(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(He(t)||Ue(t))return t}const vh=/;(?![^(]*\))/g,bh=/:([^]+)/,wh=/\/\*[^]*?\*\//g;function Sh(t){const e={};return t.replace(wh,"").split(vh).forEach(n=>{if(n){const r=n.split(bh);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function vo(t){let e="";if(He(t))e=t;else if(ae(t))for(let n=0;n<t.length;n++){const r=vo(t[n]);r&&(e+=r+" ")}else if(Ue(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const kh="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ch=po(kh);function nd(t){return!!t||t===""}const rd=t=>!!(t&&t.__v_isRef===!0),Es=t=>He(t)?t:t==null?"":ae(t)||Ue(t)&&(t.toString===Qu||!he(t.toString))?rd(t)?Es(t.value):JSON.stringify(t,id,2):String(t),id=(t,e)=>rd(e)?id(t,e.value):xr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[zs(r,s)+" =>"]=i,n),{})}:Xu(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>zs(n))}:Fn(e)?zs(e):Ue(e)&&!ae(e)&&!Zu(e)?String(e):e,zs=(t,e="")=>{var n;return Fn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let kt;class Eh{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=kt,!e&&kt&&(this.index=(kt.scopes||(kt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=kt;try{return kt=this,e()}finally{kt=n}}}on(){kt=this}off(){kt=this.parent}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Th(){return kt}let Ne;const Ws=new WeakSet;class sd{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,kt&&kt.active&&kt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ws.has(this)&&(Ws.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||od(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Yo(this),cd(this);const e=Ne,n=Ft;Ne=this,Ft=!0;try{return this.fn()}finally{ld(this),Ne=e,Ft=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)So(e);this.deps=this.depsTail=void 0,Yo(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ws.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){La(this)&&this.run()}get dirty(){return La(this)}}let ad=0,ni,ri;function od(t,e=!1){if(t.flags|=8,e){t.next=ri,ri=t;return}t.next=ni,ni=t}function bo(){ad++}function wo(){if(--ad>0)return;if(ri){let e=ri;for(ri=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;ni;){let e=ni;for(ni=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function cd(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function ld(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),So(r),Mh(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function La(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(ud(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function ud(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===ci))return;t.globalVersion=ci;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!La(t)){t.flags&=-3;return}const n=Ne,r=Ft;Ne=t,Ft=!0;try{cd(t);const i=t.fn(t._value);(e.version===0||Pn(i,t._value))&&(t._value=i,e.version++)}catch(i){throw e.version++,i}finally{Ne=n,Ft=r,ld(t),t.flags&=-3}}function So(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)So(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Mh(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Ft=!0;const dd=[];function Un(){dd.push(Ft),Ft=!1}function $n(){const t=dd.pop();Ft=t===void 0?!0:t}function Yo(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Ne;Ne=void 0;try{e()}finally{Ne=n}}}let ci=0;class Ah{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ko{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Ne||!Ft||Ne===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ne)n=this.activeLink=new Ah(Ne,this),Ne.deps?(n.prevDep=Ne.depsTail,Ne.depsTail.nextDep=n,Ne.depsTail=n):Ne.deps=Ne.depsTail=n,fd(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Ne.depsTail,n.nextDep=void 0,Ne.depsTail.nextDep=n,Ne.depsTail=n,Ne.deps===n&&(Ne.deps=r)}return n}trigger(e){this.version++,ci++,this.notify(e)}notify(e){bo();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{wo()}}}function fd(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)fd(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Pa=new WeakMap,cr=Symbol(""),Ia=Symbol(""),li=Symbol("");function tt(t,e,n){if(Ft&&Ne){let r=Pa.get(t);r||Pa.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new ko),i.map=r,i.key=n),i.track()}}function fn(t,e,n,r,i,s){const a=Pa.get(t);if(!a){ci++;return}const o=c=>{c&&c.trigger()};if(bo(),e==="clear")a.forEach(o);else{const c=ae(t),u=c&&_o(n);if(c&&n==="length"){const d=Number(r);a.forEach((p,v)=>{(v==="length"||v===li||!Fn(v)&&v>=d)&&o(p)})}else switch((n!==void 0||a.has(void 0))&&o(a.get(n)),u&&o(a.get(li)),e){case"add":c?u&&o(a.get("length")):(o(a.get(cr)),xr(t)&&o(a.get(Ia)));break;case"delete":c||(o(a.get(cr)),xr(t)&&o(a.get(Ia)));break;case"set":xr(t)&&o(a.get(cr));break}}wo()}function wr(t){const e=ke(t);return e===t?e:(tt(e,"iterate",li),Lt(t)?e:e.map(nt))}function Ts(t){return tt(t=ke(t),"iterate",li),t}const Oh={__proto__:null,[Symbol.iterator](){return Js(this,Symbol.iterator,nt)},concat(...t){return wr(this).concat(...t.map(e=>ae(e)?wr(e):e))},entries(){return Js(this,"entries",t=>(t[1]=nt(t[1]),t))},every(t,e){return sn(this,"every",t,e,void 0,arguments)},filter(t,e){return sn(this,"filter",t,e,n=>n.map(nt),arguments)},find(t,e){return sn(this,"find",t,e,nt,arguments)},findIndex(t,e){return sn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return sn(this,"findLast",t,e,nt,arguments)},findLastIndex(t,e){return sn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return sn(this,"forEach",t,e,void 0,arguments)},includes(...t){return Ks(this,"includes",t)},indexOf(...t){return Ks(this,"indexOf",t)},join(t){return wr(this).join(t)},lastIndexOf(...t){return Ks(this,"lastIndexOf",t)},map(t,e){return sn(this,"map",t,e,void 0,arguments)},pop(){return Gr(this,"pop")},push(...t){return Gr(this,"push",t)},reduce(t,...e){return Qo(this,"reduce",t,e)},reduceRight(t,...e){return Qo(this,"reduceRight",t,e)},shift(){return Gr(this,"shift")},some(t,e){return sn(this,"some",t,e,void 0,arguments)},splice(...t){return Gr(this,"splice",t)},toReversed(){return wr(this).toReversed()},toSorted(t){return wr(this).toSorted(t)},toSpliced(...t){return wr(this).toSpliced(...t)},unshift(...t){return Gr(this,"unshift",t)},values(){return Js(this,"values",nt)}};function Js(t,e,n){const r=Ts(t),i=r[e]();return r!==t&&!Lt(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=n(s.value)),s}),i}const xh=Array.prototype;function sn(t,e,n,r,i,s){const a=Ts(t),o=a!==t&&!Lt(t),c=a[e];if(c!==xh[e]){const p=c.apply(t,s);return o?nt(p):p}let u=n;a!==t&&(o?u=function(p,v){return n.call(this,nt(p),v,t)}:n.length>2&&(u=function(p,v){return n.call(this,p,v,t)}));const d=c.call(a,u,r);return o&&i?i(d):d}function Qo(t,e,n,r){const i=Ts(t);let s=n;return i!==t&&(Lt(t)?n.length>3&&(s=function(a,o,c){return n.call(this,a,o,c,t)}):s=function(a,o,c){return n.call(this,a,nt(o),c,t)}),i[e](s,...r)}function Ks(t,e,n){const r=ke(t);tt(r,"iterate",li);const i=r[e](...n);return(i===-1||i===!1)&&To(n[0])?(n[0]=ke(n[0]),r[e](...n)):i}function Gr(t,e,n=[]){Un(),bo();const r=ke(t)[e].apply(t,n);return wo(),$n(),r}const Lh=po("__proto__,__v_isRef,__isVue"),hd=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Fn));function Ph(t){Fn(t)||(t=String(t));const e=ke(this);return tt(e,"has",t),e.hasOwnProperty(t)}class pd{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?qh:yd:s?_d:md).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const a=ae(e);if(!i){let c;if(a&&(c=Oh[n]))return c;if(n==="hasOwnProperty")return Ph}const o=Reflect.get(e,n,st(e)?e:r);return(Fn(n)?hd.has(n):Lh(n))||(i||tt(e,"get",n),s)?o:st(o)?a&&_o(n)?o:o.value:Ue(o)?i?vd(o):Ms(o):o}}class gd extends pd{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const c=ur(s);if(!Lt(r)&&!ur(r)&&(s=ke(s),r=ke(r)),!ae(e)&&st(s)&&!st(r))return c?!1:(s.value=r,!0)}const a=ae(e)&&_o(n)?Number(n)<e.length:Me(e,n),o=Reflect.set(e,n,r,st(e)?e:i);return e===ke(i)&&(a?Pn(r,s)&&fn(e,"set",n,r):fn(e,"add",n,r)),o}deleteProperty(e,n){const r=Me(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&fn(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!Fn(n)||!hd.has(n))&&tt(e,"has",n),r}ownKeys(e){return tt(e,"iterate",ae(e)?"length":cr),Reflect.ownKeys(e)}}class Ih extends pd{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Dh=new gd,Rh=new Ih,Nh=new gd(!0);const Da=t=>t,Ai=t=>Reflect.getPrototypeOf(t);function jh(t,e,n){return function(...r){const i=this.__v_raw,s=ke(i),a=xr(s),o=t==="entries"||t===Symbol.iterator&&a,c=t==="keys"&&a,u=i[t](...r),d=n?Da:e?Ra:nt;return!e&&tt(s,"iterate",c?Ia:cr),{next(){const{value:p,done:v}=u.next();return v?{value:p,done:v}:{value:o?[d(p[0]),d(p[1])]:d(p),done:v}},[Symbol.iterator](){return this}}}}function Oi(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Bh(t,e){const n={get(i){const s=this.__v_raw,a=ke(s),o=ke(i);t||(Pn(i,o)&&tt(a,"get",i),tt(a,"get",o));const{has:c}=Ai(a),u=e?Da:t?Ra:nt;if(c.call(a,i))return u(s.get(i));if(c.call(a,o))return u(s.get(o));s!==a&&s.get(i)},get size(){const i=this.__v_raw;return!t&&tt(ke(i),"iterate",cr),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,a=ke(s),o=ke(i);return t||(Pn(i,o)&&tt(a,"has",i),tt(a,"has",o)),i===o?s.has(i):s.has(i)||s.has(o)},forEach(i,s){const a=this,o=a.__v_raw,c=ke(o),u=e?Da:t?Ra:nt;return!t&&tt(c,"iterate",cr),o.forEach((d,p)=>i.call(s,u(d),u(p),a))}};return Qe(n,t?{add:Oi("add"),set:Oi("set"),delete:Oi("delete"),clear:Oi("clear")}:{add(i){!e&&!Lt(i)&&!ur(i)&&(i=ke(i));const s=ke(this);return Ai(s).has.call(s,i)||(s.add(i),fn(s,"add",i,i)),this},set(i,s){!e&&!Lt(s)&&!ur(s)&&(s=ke(s));const a=ke(this),{has:o,get:c}=Ai(a);let u=o.call(a,i);u||(i=ke(i),u=o.call(a,i));const d=c.call(a,i);return a.set(i,s),u?Pn(s,d)&&fn(a,"set",i,s):fn(a,"add",i,s),this},delete(i){const s=ke(this),{has:a,get:o}=Ai(s);let c=a.call(s,i);c||(i=ke(i),c=a.call(s,i)),o&&o.call(s,i);const u=s.delete(i);return c&&fn(s,"delete",i,void 0),u},clear(){const i=ke(this),s=i.size!==0,a=i.clear();return s&&fn(i,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=jh(i,t,e)}),n}function Co(t,e){const n=Bh(t,e);return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(Me(n,i)&&i in r?n:r,i,s)}const Fh={get:Co(!1,!1)},Uh={get:Co(!1,!0)},$h={get:Co(!0,!1)};const md=new WeakMap,_d=new WeakMap,yd=new WeakMap,qh=new WeakMap;function Hh(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Vh(t){return t.__v_skip||!Object.isExtensible(t)?0:Hh(ph(t))}function Ms(t){return ur(t)?t:Eo(t,!1,Dh,Fh,md)}function Gh(t){return Eo(t,!1,Nh,Uh,_d)}function vd(t){return Eo(t,!0,Rh,$h,yd)}function Eo(t,e,n,r,i){if(!Ue(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const a=Vh(t);if(a===0)return t;const o=new Proxy(t,a===2?r:n);return i.set(t,o),o}function Lr(t){return ur(t)?Lr(t.__v_raw):!!(t&&t.__v_isReactive)}function ur(t){return!!(t&&t.__v_isReadonly)}function Lt(t){return!!(t&&t.__v_isShallow)}function To(t){return t?!!t.__v_raw:!1}function ke(t){const e=t&&t.__v_raw;return e?ke(e):t}function zh(t){return!Me(t,"__v_skip")&&Object.isExtensible(t)&&td(t,"__v_skip",!0),t}const nt=t=>Ue(t)?Ms(t):t,Ra=t=>Ue(t)?vd(t):t;function st(t){return t?t.__v_isRef===!0:!1}function In(t){return Wh(t,!1)}function Wh(t,e){return st(t)?t:new Jh(t,e)}class Jh{constructor(e,n){this.dep=new ko,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:ke(e),this._value=n?e:nt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Lt(e)||ur(e);e=r?e:ke(e),Pn(e,n)&&(this._rawValue=e,this._value=r?e:nt(e),this.dep.trigger())}}function tn(t){return st(t)?t.value:t}const Kh={get:(t,e,n)=>e==="__v_raw"?t:tn(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return st(i)&&!st(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function bd(t){return Lr(t)?t:new Proxy(t,Kh)}class Xh{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new ko(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ci-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ne!==this)return od(this,!0),!0}get value(){const e=this.dep.track();return ud(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Yh(t,e,n=!1){let r,i;return he(t)?r=t:(r=t.get,i=t.set),new Xh(r,i,n)}const xi={},ss=new WeakMap;let nr;function Qh(t,e=!1,n=nr){if(n){let r=ss.get(n);r||ss.set(n,r=[]),r.push(t)}}function Zh(t,e,n=Be){const{immediate:r,deep:i,once:s,scheduler:a,augmentJob:o,call:c}=n,u=k=>i?k:Lt(k)||i===!1||i===0?An(k,1):An(k);let d,p,v,w,b=!1,S=!1;if(st(t)?(p=()=>t.value,b=Lt(t)):Lr(t)?(p=()=>u(t),b=!0):ae(t)?(S=!0,b=t.some(k=>Lr(k)||Lt(k)),p=()=>t.map(k=>{if(st(k))return k.value;if(Lr(k))return u(k);if(he(k))return c?c(k,2):k()})):he(t)?e?p=c?()=>c(t,2):t:p=()=>{if(v){Un();try{v()}finally{$n()}}const k=nr;nr=d;try{return c?c(t,3,[w]):t(w)}finally{nr=k}}:p=nn,e&&i){const k=p,T=i===!0?1/0:i;p=()=>An(k(),T)}const D=Th(),O=()=>{d.stop(),D&&D.active&&mo(D.effects,d)};if(s&&e){const k=e;e=(...T)=>{k(...T),O()}}let $=S?new Array(t.length).fill(xi):xi;const j=k=>{if(!(!(d.flags&1)||!d.dirty&&!k))if(e){const T=d.run();if(i||b||(S?T.some((x,P)=>Pn(x,$[P])):Pn(T,$))){v&&v();const x=nr;nr=d;try{const P=[T,$===xi?void 0:S&&$[0]===xi?[]:$,w];c?c(e,3,P):e(...P),$=T}finally{nr=x}}}else d.run()};return o&&o(j),d=new sd(p),d.scheduler=a?()=>a(j,!1):j,w=k=>Qh(k,!1,d),v=d.onStop=()=>{const k=ss.get(d);if(k){if(c)c(k,4);else for(const T of k)T();ss.delete(d)}},e?r?j(!0):$=d.run():a?a(j.bind(null,!0),!0):d.run(),O.pause=d.pause.bind(d),O.resume=d.resume.bind(d),O.stop=O,O}function An(t,e=1/0,n){if(e<=0||!Ue(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,st(t))An(t.value,e,n);else if(ae(t))for(let r=0;r<t.length;r++)An(t[r],e,n);else if(Xu(t)||xr(t))t.forEach(r=>{An(r,e,n)});else if(Zu(t)){for(const r in t)An(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&An(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function vi(t,e,n,r){try{return r?t(...r):t()}catch(i){As(i,e,n)}}function qt(t,e,n,r){if(he(t)){const i=vi(t,e,n,r);return i&&Yu(i)&&i.catch(s=>{As(s,e,n)}),i}if(ae(t)){const i=[];for(let s=0;s<t.length;s++)i.push(qt(t[s],e,n,r));return i}}function As(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||Be;if(e){let o=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;o;){const d=o.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](t,c,u)===!1)return}o=o.parent}if(s){Un(),vi(s,null,10,[t,c,u]),$n();return}}ep(t,n,i,r,a)}function ep(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const ut=[];let Xt=-1;const Pr=[];let kn=null,Er=0;const wd=Promise.resolve();let as=null;function Sd(t){const e=as||wd;return t?e.then(this?t.bind(this):t):e}function tp(t){let e=Xt+1,n=ut.length;for(;e<n;){const r=e+n>>>1,i=ut[r],s=ui(i);s<t||s===t&&i.flags&2?e=r+1:n=r}return e}function Mo(t){if(!(t.flags&1)){const e=ui(t),n=ut[ut.length-1];!n||!(t.flags&2)&&e>=ui(n)?ut.push(t):ut.splice(tp(e),0,t),t.flags|=1,kd()}}function kd(){as||(as=wd.then(Ed))}function np(t){ae(t)?Pr.push(...t):kn&&t.id===-1?kn.splice(Er+1,0,t):t.flags&1||(Pr.push(t),t.flags|=1),kd()}function Zo(t,e,n=Xt+1){for(;n<ut.length;n++){const r=ut[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;ut.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Cd(t){if(Pr.length){const e=[...new Set(Pr)].sort((n,r)=>ui(n)-ui(r));if(Pr.length=0,kn){kn.push(...e);return}for(kn=e,Er=0;Er<kn.length;Er++){const n=kn[Er];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}kn=null,Er=0}}const ui=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Ed(t){try{for(Xt=0;Xt<ut.length;Xt++){const e=ut[Xt];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),vi(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Xt<ut.length;Xt++){const e=ut[Xt];e&&(e.flags&=-2)}Xt=-1,ut.length=0,Cd(),as=null,(ut.length||Pr.length)&&Ed()}}let jt=null,Td=null;function os(t){const e=jt;return jt=t,Td=t&&t.type.__scopeId||null,e}function Md(t,e=jt,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&lc(-1);const s=os(e);let a;try{a=t(...i)}finally{os(s),r._d&&lc(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function Wn(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let a=0;a<i.length;a++){const o=i[a];s&&(o.oldValue=s[a].value);let c=o.dir[r];c&&(Un(),qt(c,n,8,[t.el,o,t,e]),$n())}}const rp=Symbol("_vte"),Ad=t=>t.__isTeleport,Cn=Symbol("_leaveCb"),Li=Symbol("_enterCb");function ip(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ls(()=>{t.isMounted=!0}),Nd(()=>{t.isUnmounting=!0}),t}const At=[Function,Array],Od={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:At,onEnter:At,onAfterEnter:At,onEnterCancelled:At,onBeforeLeave:At,onLeave:At,onAfterLeave:At,onLeaveCancelled:At,onBeforeAppear:At,onAppear:At,onAfterAppear:At,onAppearCancelled:At},xd=t=>{const e=t.subTree;return e.component?xd(e.component):e},sp={name:"BaseTransition",props:Od,setup(t,{slots:e}){const n=rg(),r=ip();return()=>{const i=e.default&&Id(e.default(),!0);if(!i||!i.length)return;const s=Ld(i),a=ke(t),{mode:o}=a;if(r.isLeaving)return Xs(s);const c=ec(s);if(!c)return Xs(s);let u=Na(c,a,r,n,p=>u=p);c.type!==mt&&di(c,u);let d=n.subTree&&ec(n.subTree);if(d&&d.type!==mt&&!rr(c,d)&&xd(n).type!==mt){let p=Na(d,a,r,n);if(di(d,p),o==="out-in"&&c.type!==mt)return r.isLeaving=!0,p.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete p.afterLeave,d=void 0},Xs(s);o==="in-out"&&c.type!==mt?p.delayLeave=(v,w,b)=>{const S=Pd(r,d);S[String(d.key)]=d,v[Cn]=()=>{w(),v[Cn]=void 0,delete u.delayedLeave,d=void 0},u.delayedLeave=()=>{b(),delete u.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return s}}};function Ld(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==mt){e=n;break}}return e}const ap=sp;function Pd(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Na(t,e,n,r,i){const{appear:s,mode:a,persisted:o=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:d,onEnterCancelled:p,onBeforeLeave:v,onLeave:w,onAfterLeave:b,onLeaveCancelled:S,onBeforeAppear:D,onAppear:O,onAfterAppear:$,onAppearCancelled:j}=e,k=String(t.key),T=Pd(n,t),x=(F,H)=>{F&&qt(F,r,9,H)},P=(F,H)=>{const C=H[1];x(F,H),ae(F)?F.every(G=>G.length<=1)&&C():F.length<=1&&C()},V={mode:a,persisted:o,beforeEnter(F){let H=c;if(!n.isMounted)if(s)H=D||c;else return;F[Cn]&&F[Cn](!0);const C=T[k];C&&rr(t,C)&&C.el[Cn]&&C.el[Cn](),x(H,[F])},enter(F){let H=u,C=d,G=p;if(!n.isMounted)if(s)H=O||u,C=$||d,G=j||p;else return;let oe=!1;const me=F[Li]=ue=>{oe||(oe=!0,ue?x(G,[F]):x(C,[F]),V.delayedLeave&&V.delayedLeave(),F[Li]=void 0)};H?P(H,[F,me]):me()},leave(F,H){const C=String(t.key);if(F[Li]&&F[Li](!0),n.isUnmounting)return H();x(v,[F]);let G=!1;const oe=F[Cn]=me=>{G||(G=!0,H(),me?x(S,[F]):x(b,[F]),F[Cn]=void 0,T[C]===t&&delete T[C])};T[C]=t,w?P(w,[F,oe]):oe()},clone(F){const H=Na(F,e,n,r,i);return i&&i(H),H}};return V}function Xs(t){if(Os(t))return t=Nn(t),t.children=null,t}function ec(t){if(!Os(t))return Ad(t.type)&&t.children?Ld(t.children):t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&he(n.default))return n.default()}}function di(t,e){t.shapeFlag&6&&t.component?(t.transition=e,di(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Id(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let a=t[s];const o=n==null?a.key:String(n)+String(a.key!=null?a.key:s);a.type===Ct?(a.patchFlag&128&&i++,r=r.concat(Id(a.children,e,o))):(e||a.type!==mt)&&r.push(o!=null?Nn(a,{key:o}):a)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function Dd(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function cs(t,e,n,r,i=!1){if(ae(t)){t.forEach((b,S)=>cs(b,e&&(ae(e)?e[S]:e),n,r,i));return}if(ii(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&cs(t,e,n,r.component.subTree);return}const s=r.shapeFlag&4?xo(r.component):r.el,a=i?null:s,{i:o,r:c}=t,u=e&&e.r,d=o.refs===Be?o.refs={}:o.refs,p=o.setupState,v=ke(p),w=p===Be?()=>!1:b=>Me(v,b);if(u!=null&&u!==c&&(He(u)?(d[u]=null,w(u)&&(p[u]=null)):st(u)&&(u.value=null)),he(c))vi(c,o,12,[a,d]);else{const b=He(c),S=st(c);if(b||S){const D=()=>{if(t.f){const O=b?w(c)?p[c]:d[c]:c.value;i?ae(O)&&mo(O,s):ae(O)?O.includes(s)||O.push(s):b?(d[c]=[s],w(c)&&(p[c]=d[c])):(c.value=[s],t.k&&(d[t.k]=c.value))}else b?(d[c]=a,w(c)&&(p[c]=a)):S&&(c.value=a,t.k&&(d[t.k]=a))};a?(D.id=-1,St(D,n)):D()}}}Cs().requestIdleCallback;Cs().cancelIdleCallback;const ii=t=>!!t.type.__asyncLoader,Os=t=>t.type.__isKeepAlive;function op(t,e){Rd(t,"a",e)}function cp(t,e){Rd(t,"da",e)}function Rd(t,e,n=rt){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(xs(e,r,n),n){let i=n.parent;for(;i&&i.parent;)Os(i.parent.vnode)&&lp(r,e,n,i),i=i.parent}}function lp(t,e,n,r){const i=xs(e,t,r,!0);jd(()=>{mo(r[e],i)},n)}function xs(t,e,n=rt,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...a)=>{Un();const o=bi(n),c=qt(e,n,t,a);return o(),$n(),c});return r?i.unshift(s):i.push(s),s}}const gn=t=>(e,n=rt)=>{(!hi||t==="sp")&&xs(t,(...r)=>e(...r),n)},up=gn("bm"),Ls=gn("m"),dp=gn("bu"),fp=gn("u"),Nd=gn("bum"),jd=gn("um"),hp=gn("sp"),pp=gn("rtg"),gp=gn("rtc");function mp(t,e=rt){xs("ec",t,e)}const _p=Symbol.for("v-ndc");function yp(t,e,n,r){let i;const s=n,a=ae(t);if(a||He(t)){const o=a&&Lr(t);let c=!1;o&&(c=!Lt(t),t=Ts(t)),i=new Array(t.length);for(let u=0,d=t.length;u<d;u++)i[u]=e(c?nt(t[u]):t[u],u,void 0,s)}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,s)}else if(Ue(t))if(t[Symbol.iterator])i=Array.from(t,(o,c)=>e(o,c,void 0,s));else{const o=Object.keys(t);i=new Array(o.length);for(let c=0,u=o.length;c<u;c++){const d=o[c];i[c]=e(t[d],d,c,s)}}else i=[];return i}const ja=t=>t?af(t)?xo(t):ja(t.parent):null,si=Qe(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>ja(t.parent),$root:t=>ja(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Fd(t),$forceUpdate:t=>t.f||(t.f=()=>{Mo(t.update)}),$nextTick:t=>t.n||(t.n=Sd.bind(t.proxy)),$watch:t=>Up.bind(t)}),Ys=(t,e)=>t!==Be&&!t.__isScriptSetup&&Me(t,e),vp={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:a,type:o,appContext:c}=t;let u;if(e[0]!=="$"){const w=a[e];if(w!==void 0)switch(w){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(Ys(r,e))return a[e]=1,r[e];if(i!==Be&&Me(i,e))return a[e]=2,i[e];if((u=t.propsOptions[0])&&Me(u,e))return a[e]=3,s[e];if(n!==Be&&Me(n,e))return a[e]=4,n[e];Ba&&(a[e]=0)}}const d=si[e];let p,v;if(d)return e==="$attrs"&&tt(t.attrs,"get",""),d(t);if((p=o.__cssModules)&&(p=p[e]))return p;if(n!==Be&&Me(n,e))return a[e]=4,n[e];if(v=c.config.globalProperties,Me(v,e))return v[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return Ys(i,e)?(i[e]=n,!0):r!==Be&&Me(r,e)?(r[e]=n,!0):Me(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},a){let o;return!!n[a]||t!==Be&&Me(t,a)||Ys(e,a)||(o=s[0])&&Me(o,a)||Me(r,a)||Me(si,a)||Me(i.config.globalProperties,a)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Me(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function tc(t){return ae(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Ba=!0;function bp(t){const e=Fd(t),n=t.proxy,r=t.ctx;Ba=!1,e.beforeCreate&&nc(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:a,watch:o,provide:c,inject:u,created:d,beforeMount:p,mounted:v,beforeUpdate:w,updated:b,activated:S,deactivated:D,beforeDestroy:O,beforeUnmount:$,destroyed:j,unmounted:k,render:T,renderTracked:x,renderTriggered:P,errorCaptured:V,serverPrefetch:F,expose:H,inheritAttrs:C,components:G,directives:oe,filters:me}=e;if(u&&wp(u,r,null),a)for(const Q in a){const K=a[Q];he(K)&&(r[Q]=K.bind(n))}if(i){const Q=i.call(n,n);Ue(Q)&&(t.data=Ms(Q))}if(Ba=!0,s)for(const Q in s){const K=s[Q],_e=he(K)?K.bind(n,n):he(K.get)?K.get.bind(n,n):nn,ge=!he(K)&&he(K.set)?K.set.bind(n):nn,Ce=lg({get:_e,set:ge});Object.defineProperty(r,Q,{enumerable:!0,configurable:!0,get:()=>Ce.value,set:ye=>Ce.value=ye})}if(o)for(const Q in o)Bd(o[Q],r,n,Q);if(c){const Q=he(c)?c.call(n):c;Reflect.ownKeys(Q).forEach(K=>{Mp(K,Q[K])})}d&&nc(d,t,"c");function te(Q,K){ae(K)?K.forEach(_e=>Q(_e.bind(n))):K&&Q(K.bind(n))}if(te(up,p),te(Ls,v),te(dp,w),te(fp,b),te(op,S),te(cp,D),te(mp,V),te(gp,x),te(pp,P),te(Nd,$),te(jd,k),te(hp,F),ae(H))if(H.length){const Q=t.exposed||(t.exposed={});H.forEach(K=>{Object.defineProperty(Q,K,{get:()=>n[K],set:_e=>n[K]=_e})})}else t.exposed||(t.exposed={});T&&t.render===nn&&(t.render=T),C!=null&&(t.inheritAttrs=C),G&&(t.components=G),oe&&(t.directives=oe),F&&Dd(t)}function wp(t,e,n=nn){ae(t)&&(t=Fa(t));for(const r in t){const i=t[r];let s;Ue(i)?"default"in i?s=Xi(i.from||r,i.default,!0):s=Xi(i.from||r):s=Xi(i),st(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):e[r]=s}}function nc(t,e,n){qt(ae(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Bd(t,e,n,r){let i=r.includes(".")?Zd(n,r):()=>n[r];if(He(t)){const s=e[t];he(s)&&Zs(i,s)}else if(he(t))Zs(i,t.bind(n));else if(Ue(t))if(ae(t))t.forEach(s=>Bd(s,e,n,r));else{const s=he(t.handler)?t.handler.bind(n):e[t.handler];he(s)&&Zs(i,s,t)}}function Fd(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:a}}=t.appContext,o=s.get(e);let c;return o?c=o:!i.length&&!n&&!r?c=e:(c={},i.length&&i.forEach(u=>ls(c,u,a,!0)),ls(c,e,a)),Ue(e)&&s.set(e,c),c}function ls(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&ls(t,s,n,!0),i&&i.forEach(a=>ls(t,a,n,!0));for(const a in e)if(!(r&&a==="expose")){const o=Sp[a]||n&&n[a];t[a]=o?o(t[a],e[a]):e[a]}return t}const Sp={data:rc,props:ic,emits:ic,methods:Qr,computed:Qr,beforeCreate:ct,created:ct,beforeMount:ct,mounted:ct,beforeUpdate:ct,updated:ct,beforeDestroy:ct,beforeUnmount:ct,destroyed:ct,unmounted:ct,activated:ct,deactivated:ct,errorCaptured:ct,serverPrefetch:ct,components:Qr,directives:Qr,watch:Cp,provide:rc,inject:kp};function rc(t,e){return e?t?function(){return Qe(he(t)?t.call(this,this):t,he(e)?e.call(this,this):e)}:e:t}function kp(t,e){return Qr(Fa(t),Fa(e))}function Fa(t){if(ae(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function ct(t,e){return t?[...new Set([].concat(t,e))]:e}function Qr(t,e){return t?Qe(Object.create(null),t,e):e}function ic(t,e){return t?ae(t)&&ae(e)?[...new Set([...t,...e])]:Qe(Object.create(null),tc(t),tc(e??{})):e}function Cp(t,e){if(!t)return e;if(!e)return t;const n=Qe(Object.create(null),t);for(const r in e)n[r]=ct(t[r],e[r]);return n}function Ud(){return{app:null,config:{isNativeTag:fh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ep=0;function Tp(t,e){return function(r,i=null){he(r)||(r=Qe({},r)),i!=null&&!Ue(i)&&(i=null);const s=Ud(),a=new WeakSet,o=[];let c=!1;const u=s.app={_uid:Ep++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:dg,get config(){return s.config},set config(d){},use(d,...p){return a.has(d)||(d&&he(d.install)?(a.add(d),d.install(u,...p)):he(d)&&(a.add(d),d(u,...p))),u},mixin(d){return s.mixins.includes(d)||s.mixins.push(d),u},component(d,p){return p?(s.components[d]=p,u):s.components[d]},directive(d,p){return p?(s.directives[d]=p,u):s.directives[d]},mount(d,p,v){if(!c){const w=u._ceVNode||ze(r,i);return w.appContext=s,v===!0?v="svg":v===!1&&(v=void 0),t(w,d,v),c=!0,u._container=d,d.__vue_app__=u,xo(w.component)}},onUnmount(d){o.push(d)},unmount(){c&&(qt(o,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(d,p){return s.provides[d]=p,u},runWithContext(d){const p=Ir;Ir=u;try{return d()}finally{Ir=p}}};return u}}let Ir=null;function Mp(t,e){if(rt){let n=rt.provides;const r=rt.parent&&rt.parent.provides;r===n&&(n=rt.provides=Object.create(r)),n[t]=e}}function Xi(t,e,n=!1){const r=rt||jt;if(r||Ir){const i=Ir?Ir._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&he(e)?e.call(r&&r.proxy):e}}const $d={},qd=()=>Object.create($d),Hd=t=>Object.getPrototypeOf(t)===$d;function Ap(t,e,n,r=!1){const i={},s=qd();t.propsDefaults=Object.create(null),Vd(t,e,i,s);for(const a in t.propsOptions[0])a in i||(i[a]=void 0);n?t.props=r?i:Gh(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function Op(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:a}}=t,o=ke(i),[c]=t.propsOptions;let u=!1;if((r||a>0)&&!(a&16)){if(a&8){const d=t.vnode.dynamicProps;for(let p=0;p<d.length;p++){let v=d[p];if(Ps(t.emitsOptions,v))continue;const w=e[v];if(c)if(Me(s,v))w!==s[v]&&(s[v]=w,u=!0);else{const b=Rn(v);i[b]=Ua(c,o,b,w,t,!1)}else w!==s[v]&&(s[v]=w,u=!0)}}}else{Vd(t,e,i,s)&&(u=!0);let d;for(const p in o)(!e||!Me(e,p)&&((d=mr(p))===p||!Me(e,d)))&&(c?n&&(n[p]!==void 0||n[d]!==void 0)&&(i[p]=Ua(c,o,p,void 0,t,!0)):delete i[p]);if(s!==o)for(const p in s)(!e||!Me(e,p))&&(delete s[p],u=!0)}u&&fn(t.attrs,"set","")}function Vd(t,e,n,r){const[i,s]=t.propsOptions;let a=!1,o;if(e)for(let c in e){if(ti(c))continue;const u=e[c];let d;i&&Me(i,d=Rn(c))?!s||!s.includes(d)?n[d]=u:(o||(o={}))[d]=u:Ps(t.emitsOptions,c)||(!(c in r)||u!==r[c])&&(r[c]=u,a=!0)}if(s){const c=ke(n),u=o||Be;for(let d=0;d<s.length;d++){const p=s[d];n[p]=Ua(i,c,p,u[p],t,!Me(u,p))}}return a}function Ua(t,e,n,r,i,s){const a=t[n];if(a!=null){const o=Me(a,"default");if(o&&r===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&he(c)){const{propsDefaults:u}=i;if(n in u)r=u[n];else{const d=bi(i);r=u[n]=c.call(null,e),d()}}else r=c;i.ce&&i.ce._setProp(n,r)}a[0]&&(s&&!o?r=!1:a[1]&&(r===""||r===mr(n))&&(r=!0))}return r}const xp=new WeakMap;function Gd(t,e,n=!1){const r=n?xp:e.propsCache,i=r.get(t);if(i)return i;const s=t.props,a={},o=[];let c=!1;if(!he(t)){const d=p=>{c=!0;const[v,w]=Gd(p,e,!0);Qe(a,v),w&&o.push(...w)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!s&&!c)return Ue(t)&&r.set(t,Or),Or;if(ae(s))for(let d=0;d<s.length;d++){const p=Rn(s[d]);sc(p)&&(a[p]=Be)}else if(s)for(const d in s){const p=Rn(d);if(sc(p)){const v=s[d],w=a[p]=ae(v)||he(v)?{type:v}:Qe({},v),b=w.type;let S=!1,D=!0;if(ae(b))for(let O=0;O<b.length;++O){const $=b[O],j=he($)&&$.name;if(j==="Boolean"){S=!0;break}else j==="String"&&(D=!1)}else S=he(b)&&b.name==="Boolean";w[0]=S,w[1]=D,(S||Me(w,"default"))&&o.push(p)}}const u=[a,o];return Ue(t)&&r.set(t,u),u}function sc(t){return t[0]!=="$"&&!ti(t)}const zd=t=>t[0]==="_"||t==="$stable",Ao=t=>ae(t)?t.map(en):[en(t)],Lp=(t,e,n)=>{if(e._n)return e;const r=Md((...i)=>Ao(e(...i)),n);return r._c=!1,r},Wd=(t,e,n)=>{const r=t._ctx;for(const i in t){if(zd(i))continue;const s=t[i];if(he(s))e[i]=Lp(i,s,r);else if(s!=null){const a=Ao(s);e[i]=()=>a}}},Jd=(t,e)=>{const n=Ao(e);t.slots.default=()=>n},Kd=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},Pp=(t,e,n)=>{const r=t.slots=qd();if(t.vnode.shapeFlag&32){const i=e._;i?(Kd(r,e,n),n&&td(r,"_",i,!0)):Wd(e,r)}else e&&Jd(t,e)},Ip=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,a=Be;if(r.shapeFlag&32){const o=e._;o?n&&o===1?s=!1:Kd(i,e,n):(s=!e.$stable,Wd(e,i)),a=e}else e&&(Jd(t,e),a={default:1});if(s)for(const o in i)!zd(o)&&a[o]==null&&delete i[o]},St=Wp;function Dp(t){return Rp(t)}function Rp(t,e){const n=Cs();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:a,createText:o,createComment:c,setText:u,setElementText:d,parentNode:p,nextSibling:v,setScopeId:w=nn,insertStaticContent:b}=t,S=(g,_,E,A=null,L=null,I=null,z=void 0,U=null,B=!!_.dynamicChildren)=>{if(g===_)return;g&&!rr(g,_)&&(A=y(g),ye(g,L,I,!0),g=null),_.patchFlag===-2&&(B=!1,_.dynamicChildren=null);const{type:R,ref:Y,shapeFlag:J}=_;switch(R){case Is:D(g,_,E,A);break;case mt:O(g,_,E,A);break;case ea:g==null&&$(_,E,A,z);break;case Ct:G(g,_,E,A,L,I,z,U,B);break;default:J&1?T(g,_,E,A,L,I,z,U,B):J&6?oe(g,_,E,A,L,I,z,U,B):(J&64||J&128)&&R.process(g,_,E,A,L,I,z,U,B,q)}Y!=null&&L&&cs(Y,g&&g.ref,I,_||g,!_)},D=(g,_,E,A)=>{if(g==null)r(_.el=o(_.children),E,A);else{const L=_.el=g.el;_.children!==g.children&&u(L,_.children)}},O=(g,_,E,A)=>{g==null?r(_.el=c(_.children||""),E,A):_.el=g.el},$=(g,_,E,A)=>{[g.el,g.anchor]=b(g.children,_,E,A,g.el,g.anchor)},j=({el:g,anchor:_},E,A)=>{let L;for(;g&&g!==_;)L=v(g),r(g,E,A),g=L;r(_,E,A)},k=({el:g,anchor:_})=>{let E;for(;g&&g!==_;)E=v(g),i(g),g=E;i(_)},T=(g,_,E,A,L,I,z,U,B)=>{_.type==="svg"?z="svg":_.type==="math"&&(z="mathml"),g==null?x(_,E,A,L,I,z,U,B):F(g,_,L,I,z,U,B)},x=(g,_,E,A,L,I,z,U)=>{let B,R;const{props:Y,shapeFlag:J,transition:Z,dirs:re}=g;if(B=g.el=a(g.type,I,Y&&Y.is,Y),J&8?d(B,g.children):J&16&&V(g.children,B,null,A,L,Qs(g,I),z,U),re&&Wn(g,null,A,"created"),P(B,g,g.scopeId,z,A),Y){for(const Ee in Y)Ee!=="value"&&!ti(Ee)&&s(B,Ee,null,Y[Ee],I,A);"value"in Y&&s(B,"value",null,Y.value,I),(R=Y.onVnodeBeforeMount)&&Jt(R,A,g)}re&&Wn(g,null,A,"beforeMount");const pe=Np(L,Z);pe&&Z.beforeEnter(B),r(B,_,E),((R=Y&&Y.onVnodeMounted)||pe||re)&&St(()=>{R&&Jt(R,A,g),pe&&Z.enter(B),re&&Wn(g,null,A,"mounted")},L)},P=(g,_,E,A,L)=>{if(E&&w(g,E),A)for(let I=0;I<A.length;I++)w(g,A[I]);if(L){let I=L.subTree;if(_===I||tf(I.type)&&(I.ssContent===_||I.ssFallback===_)){const z=L.vnode;P(g,z,z.scopeId,z.slotScopeIds,L.parent)}}},V=(g,_,E,A,L,I,z,U,B=0)=>{for(let R=B;R<g.length;R++){const Y=g[R]=U?En(g[R]):en(g[R]);S(null,Y,_,E,A,L,I,z,U)}},F=(g,_,E,A,L,I,z)=>{const U=_.el=g.el;let{patchFlag:B,dynamicChildren:R,dirs:Y}=_;B|=g.patchFlag&16;const J=g.props||Be,Z=_.props||Be;let re;if(E&&Jn(E,!1),(re=Z.onVnodeBeforeUpdate)&&Jt(re,E,_,g),Y&&Wn(_,g,E,"beforeUpdate"),E&&Jn(E,!0),(J.innerHTML&&Z.innerHTML==null||J.textContent&&Z.textContent==null)&&d(U,""),R?H(g.dynamicChildren,R,U,E,A,Qs(_,L),I):z||K(g,_,U,null,E,A,Qs(_,L),I,!1),B>0){if(B&16)C(U,J,Z,E,L);else if(B&2&&J.class!==Z.class&&s(U,"class",null,Z.class,L),B&4&&s(U,"style",J.style,Z.style,L),B&8){const pe=_.dynamicProps;for(let Ee=0;Ee<pe.length;Ee++){const Se=pe[Ee],at=J[Se],Ze=Z[Se];(Ze!==at||Se==="value")&&s(U,Se,at,Ze,L,E)}}B&1&&g.children!==_.children&&d(U,_.children)}else!z&&R==null&&C(U,J,Z,E,L);((re=Z.onVnodeUpdated)||Y)&&St(()=>{re&&Jt(re,E,_,g),Y&&Wn(_,g,E,"updated")},A)},H=(g,_,E,A,L,I,z)=>{for(let U=0;U<_.length;U++){const B=g[U],R=_[U],Y=B.el&&(B.type===Ct||!rr(B,R)||B.shapeFlag&70)?p(B.el):E;S(B,R,Y,null,A,L,I,z,!0)}},C=(g,_,E,A,L)=>{if(_!==E){if(_!==Be)for(const I in _)!ti(I)&&!(I in E)&&s(g,I,_[I],null,L,A);for(const I in E){if(ti(I))continue;const z=E[I],U=_[I];z!==U&&I!=="value"&&s(g,I,U,z,L,A)}"value"in E&&s(g,"value",_.value,E.value,L)}},G=(g,_,E,A,L,I,z,U,B)=>{const R=_.el=g?g.el:o(""),Y=_.anchor=g?g.anchor:o("");let{patchFlag:J,dynamicChildren:Z,slotScopeIds:re}=_;re&&(U=U?U.concat(re):re),g==null?(r(R,E,A),r(Y,E,A),V(_.children||[],E,Y,L,I,z,U,B)):J>0&&J&64&&Z&&g.dynamicChildren?(H(g.dynamicChildren,Z,E,L,I,z,U),(_.key!=null||L&&_===L.subTree)&&Xd(g,_,!0)):K(g,_,E,Y,L,I,z,U,B)},oe=(g,_,E,A,L,I,z,U,B)=>{_.slotScopeIds=U,g==null?_.shapeFlag&512?L.ctx.activate(_,E,A,z,B):me(_,E,A,L,I,z,B):ue(g,_,B)},me=(g,_,E,A,L,I,z)=>{const U=g.component=ng(g,A,L);if(Os(g)&&(U.ctx.renderer=q),ig(U,!1,z),U.asyncDep){if(L&&L.registerDep(U,te,z),!g.el){const B=U.subTree=ze(mt);O(null,B,_,E)}}else te(U,g,_,E,L,I,z)},ue=(g,_,E)=>{const A=_.component=g.component;if(Gp(g,_,E))if(A.asyncDep&&!A.asyncResolved){Q(A,_,E);return}else A.next=_,A.update();else _.el=g.el,A.vnode=_},te=(g,_,E,A,L,I,z)=>{const U=()=>{if(g.isMounted){let{next:J,bu:Z,u:re,parent:pe,vnode:Ee}=g;{const ft=Yd(g);if(ft){J&&(J.el=Ee.el,Q(g,J,z)),ft.asyncDep.then(()=>{g.isUnmounted||U()});return}}let Se=J,at;Jn(g,!1),J?(J.el=Ee.el,Q(g,J,z)):J=Ee,Z&&Gs(Z),(at=J.props&&J.props.onVnodeBeforeUpdate)&&Jt(at,pe,J,Ee),Jn(g,!0);const Ze=oc(g),dt=g.subTree;g.subTree=Ze,S(dt,Ze,p(dt.el),y(dt),g,L,I),J.el=Ze.el,Se===null&&zp(g,Ze.el),re&&St(re,L),(at=J.props&&J.props.onVnodeUpdated)&&St(()=>Jt(at,pe,J,Ee),L)}else{let J;const{el:Z,props:re}=_,{bm:pe,m:Ee,parent:Se,root:at,type:Ze}=g,dt=ii(_);Jn(g,!1),pe&&Gs(pe),!dt&&(J=re&&re.onVnodeBeforeMount)&&Jt(J,Se,_),Jn(g,!0);{at.ce&&at.ce._injectChildStyle(Ze);const ft=g.subTree=oc(g);S(null,ft,E,A,g,L,I),_.el=ft.el}if(Ee&&St(Ee,L),!dt&&(J=re&&re.onVnodeMounted)){const ft=_;St(()=>Jt(J,Se,ft),L)}(_.shapeFlag&256||Se&&ii(Se.vnode)&&Se.vnode.shapeFlag&256)&&g.a&&St(g.a,L),g.isMounted=!0,_=E=A=null}};g.scope.on();const B=g.effect=new sd(U);g.scope.off();const R=g.update=B.run.bind(B),Y=g.job=B.runIfDirty.bind(B);Y.i=g,Y.id=g.uid,B.scheduler=()=>Mo(Y),Jn(g,!0),R()},Q=(g,_,E)=>{_.component=g;const A=g.vnode.props;g.vnode=_,g.next=null,Op(g,_.props,A,E),Ip(g,_.children,E),Un(),Zo(g),$n()},K=(g,_,E,A,L,I,z,U,B=!1)=>{const R=g&&g.children,Y=g?g.shapeFlag:0,J=_.children,{patchFlag:Z,shapeFlag:re}=_;if(Z>0){if(Z&128){ge(R,J,E,A,L,I,z,U,B);return}else if(Z&256){_e(R,J,E,A,L,I,z,U,B);return}}re&8?(Y&16&&f(R,L,I),J!==R&&d(E,J)):Y&16?re&16?ge(R,J,E,A,L,I,z,U,B):f(R,L,I,!0):(Y&8&&d(E,""),re&16&&V(J,E,A,L,I,z,U,B))},_e=(g,_,E,A,L,I,z,U,B)=>{g=g||Or,_=_||Or;const R=g.length,Y=_.length,J=Math.min(R,Y);let Z;for(Z=0;Z<J;Z++){const re=_[Z]=B?En(_[Z]):en(_[Z]);S(g[Z],re,E,null,L,I,z,U,B)}R>Y?f(g,L,I,!0,!1,J):V(_,E,A,L,I,z,U,B,J)},ge=(g,_,E,A,L,I,z,U,B)=>{let R=0;const Y=_.length;let J=g.length-1,Z=Y-1;for(;R<=J&&R<=Z;){const re=g[R],pe=_[R]=B?En(_[R]):en(_[R]);if(rr(re,pe))S(re,pe,E,null,L,I,z,U,B);else break;R++}for(;R<=J&&R<=Z;){const re=g[J],pe=_[Z]=B?En(_[Z]):en(_[Z]);if(rr(re,pe))S(re,pe,E,null,L,I,z,U,B);else break;J--,Z--}if(R>J){if(R<=Z){const re=Z+1,pe=re<Y?_[re].el:A;for(;R<=Z;)S(null,_[R]=B?En(_[R]):en(_[R]),E,pe,L,I,z,U,B),R++}}else if(R>Z)for(;R<=J;)ye(g[R],L,I,!0),R++;else{const re=R,pe=R,Ee=new Map;for(R=pe;R<=Z;R++){const et=_[R]=B?En(_[R]):en(_[R]);et.key!=null&&Ee.set(et.key,R)}let Se,at=0;const Ze=Z-pe+1;let dt=!1,ft=0;const yt=new Array(Ze);for(R=0;R<Ze;R++)yt[R]=0;for(R=re;R<=J;R++){const et=g[R];if(at>=Ze){ye(et,L,I,!0);continue}let vt;if(et.key!=null)vt=Ee.get(et.key);else for(Se=pe;Se<=Z;Se++)if(yt[Se-pe]===0&&rr(et,_[Se])){vt=Se;break}vt===void 0?ye(et,L,I,!0):(yt[vt-pe]=R+1,vt>=ft?ft=vt:dt=!0,S(et,_[vt],E,null,L,I,z,U,B),at++)}const Ci=dt?jp(yt):Or;for(Se=Ci.length-1,R=Ze-1;R>=0;R--){const et=pe+R,vt=_[et],Hr=et+1<Y?_[et+1].el:A;yt[R]===0?S(null,vt,E,Hr,L,I,z,U,B):dt&&(Se<0||R!==Ci[Se]?Ce(vt,E,Hr,2):Se--)}}},Ce=(g,_,E,A,L=null)=>{const{el:I,type:z,transition:U,children:B,shapeFlag:R}=g;if(R&6){Ce(g.component.subTree,_,E,A);return}if(R&128){g.suspense.move(_,E,A);return}if(R&64){z.move(g,_,E,q);return}if(z===Ct){r(I,_,E);for(let J=0;J<B.length;J++)Ce(B[J],_,E,A);r(g.anchor,_,E);return}if(z===ea){j(g,_,E);return}if(A!==2&&R&1&&U)if(A===0)U.beforeEnter(I),r(I,_,E),St(()=>U.enter(I),L);else{const{leave:J,delayLeave:Z,afterLeave:re}=U,pe=()=>r(I,_,E),Ee=()=>{J(I,()=>{pe(),re&&re()})};Z?Z(I,pe,Ee):Ee()}else r(I,_,E)},ye=(g,_,E,A=!1,L=!1)=>{const{type:I,props:z,ref:U,children:B,dynamicChildren:R,shapeFlag:Y,patchFlag:J,dirs:Z,cacheIndex:re}=g;if(J===-2&&(L=!1),U!=null&&cs(U,null,E,g,!0),re!=null&&(_.renderCache[re]=void 0),Y&256){_.ctx.deactivate(g);return}const pe=Y&1&&Z,Ee=!ii(g);let Se;if(Ee&&(Se=z&&z.onVnodeBeforeUnmount)&&Jt(Se,_,g),Y&6)h(g.component,E,A);else{if(Y&128){g.suspense.unmount(E,A);return}pe&&Wn(g,null,_,"beforeUnmount"),Y&64?g.type.remove(g,_,E,q,A):R&&!R.hasOnce&&(I!==Ct||J>0&&J&64)?f(R,_,E,!1,!0):(I===Ct&&J&384||!L&&Y&16)&&f(B,_,E),A&&ne(g)}(Ee&&(Se=z&&z.onVnodeUnmounted)||pe)&&St(()=>{Se&&Jt(Se,_,g),pe&&Wn(g,null,_,"unmounted")},E)},ne=g=>{const{type:_,el:E,anchor:A,transition:L}=g;if(_===Ct){l(E,A);return}if(_===ea){k(g);return}const I=()=>{i(E),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(g.shapeFlag&1&&L&&!L.persisted){const{leave:z,delayLeave:U}=L,B=()=>z(E,I);U?U(g.el,I,B):B()}else I()},l=(g,_)=>{let E;for(;g!==_;)E=v(g),i(g),g=E;i(_)},h=(g,_,E)=>{const{bum:A,scope:L,job:I,subTree:z,um:U,m:B,a:R}=g;ac(B),ac(R),A&&Gs(A),L.stop(),I&&(I.flags|=8,ye(z,g,_,E)),U&&St(U,_),St(()=>{g.isUnmounted=!0},_),_&&_.pendingBranch&&!_.isUnmounted&&g.asyncDep&&!g.asyncResolved&&g.suspenseId===_.pendingId&&(_.deps--,_.deps===0&&_.resolve())},f=(g,_,E,A=!1,L=!1,I=0)=>{for(let z=I;z<g.length;z++)ye(g[z],_,E,A,L)},y=g=>{if(g.shapeFlag&6)return y(g.component.subTree);if(g.shapeFlag&128)return g.suspense.next();const _=v(g.anchor||g.el),E=_&&_[rp];return E?v(E):_};let m=!1;const M=(g,_,E)=>{g==null?_._vnode&&ye(_._vnode,null,null,!0):S(_._vnode||null,g,_,null,null,null,E),_._vnode=g,m||(m=!0,Zo(),Cd(),m=!1)},q={p:S,um:ye,m:Ce,r:ne,mt:me,mc:V,pc:K,pbc:H,n:y,o:t};return{render:M,hydrate:void 0,createApp:Tp(M)}}function Qs({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Jn({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Np(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Xd(t,e,n=!1){const r=t.children,i=e.children;if(ae(r)&&ae(i))for(let s=0;s<r.length;s++){const a=r[s];let o=i[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=i[s]=En(i[s]),o.el=a.el),!n&&o.patchFlag!==-2&&Xd(a,o)),o.type===Is&&(o.el=a.el)}}function jp(t){const e=t.slice(),n=[0];let r,i,s,a,o;const c=t.length;for(r=0;r<c;r++){const u=t[r];if(u!==0){if(i=n[n.length-1],t[i]<u){e[r]=i,n.push(r);continue}for(s=0,a=n.length-1;s<a;)o=s+a>>1,t[n[o]]<u?s=o+1:a=o;u<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,a=n[s-1];s-- >0;)n[s]=a,a=e[a];return n}function Yd(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Yd(e)}function ac(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Bp=Symbol.for("v-scx"),Fp=()=>Xi(Bp);function Zs(t,e,n){return Qd(t,e,n)}function Qd(t,e,n=Be){const{immediate:r,deep:i,flush:s,once:a}=n,o=Qe({},n),c=e&&r||!e&&s!=="post";let u;if(hi){if(s==="sync"){const w=Fp();u=w.__watcherHandles||(w.__watcherHandles=[])}else if(!c){const w=()=>{};return w.stop=nn,w.resume=nn,w.pause=nn,w}}const d=rt;o.call=(w,b,S)=>qt(w,d,b,S);let p=!1;s==="post"?o.scheduler=w=>{St(w,d&&d.suspense)}:s!=="sync"&&(p=!0,o.scheduler=(w,b)=>{b?w():Mo(w)}),o.augmentJob=w=>{e&&(w.flags|=4),p&&(w.flags|=2,d&&(w.id=d.uid,w.i=d))};const v=Zh(t,e,o);return hi&&(u?u.push(v):c&&v()),v}function Up(t,e,n){const r=this.proxy,i=He(t)?t.includes(".")?Zd(r,t):()=>r[t]:t.bind(r,r);let s;he(e)?s=e:(s=e.handler,n=e);const a=bi(this),o=Qd(i,s.bind(r),n);return a(),o}function Zd(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const $p=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Rn(e)}Modifiers`]||t[`${mr(e)}Modifiers`];function qp(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Be;let i=n;const s=e.startsWith("update:"),a=s&&$p(r,e.slice(7));a&&(a.trim&&(i=n.map(d=>He(d)?d.trim():d)),a.number&&(i=n.map(_h)));let o,c=r[o=Vs(e)]||r[o=Vs(Rn(e))];!c&&s&&(c=r[o=Vs(mr(e))]),c&&qt(c,t,6,i);const u=r[o+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,qt(u,t,6,i)}}function ef(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let a={},o=!1;if(!he(t)){const c=u=>{const d=ef(u,e,!0);d&&(o=!0,Qe(a,d))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!s&&!o?(Ue(t)&&r.set(t,null),null):(ae(s)?s.forEach(c=>a[c]=null):Qe(a,s),Ue(t)&&r.set(t,a),a)}function Ps(t,e){return!t||!ws(e)?!1:(e=e.slice(2).replace(/Once$/,""),Me(t,e[0].toLowerCase()+e.slice(1))||Me(t,mr(e))||Me(t,e))}function oc(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:a,attrs:o,emit:c,render:u,renderCache:d,props:p,data:v,setupState:w,ctx:b,inheritAttrs:S}=t,D=os(t);let O,$;try{if(n.shapeFlag&4){const k=i||r,T=k;O=en(u.call(T,k,d,p,w,v,b)),$=o}else{const k=e;O=en(k.length>1?k(p,{attrs:o,slots:a,emit:c}):k(p,null)),$=e.props?o:Hp(o)}}catch(k){ai.length=0,As(k,t,1),O=ze(mt)}let j=O;if($&&S!==!1){const k=Object.keys($),{shapeFlag:T}=j;k.length&&T&7&&(s&&k.some(go)&&($=Vp($,s)),j=Nn(j,$,!1,!0))}return n.dirs&&(j=Nn(j,null,!1,!0),j.dirs=j.dirs?j.dirs.concat(n.dirs):n.dirs),n.transition&&di(j,n.transition),O=j,os(D),O}const Hp=t=>{let e;for(const n in t)(n==="class"||n==="style"||ws(n))&&((e||(e={}))[n]=t[n]);return e},Vp=(t,e)=>{const n={};for(const r in t)(!go(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function Gp(t,e,n){const{props:r,children:i,component:s}=t,{props:a,children:o,patchFlag:c}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?cc(r,a,u):!!a;if(c&8){const d=e.dynamicProps;for(let p=0;p<d.length;p++){const v=d[p];if(a[v]!==r[v]&&!Ps(u,v))return!0}}}else return(i||o)&&(!o||!o.$stable)?!0:r===a?!1:r?a?cc(r,a,u):!0:!!a;return!1}function cc(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!Ps(n,s))return!0}return!1}function zp({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const tf=t=>t.__isSuspense;function Wp(t,e){e&&e.pendingBranch?ae(t)?e.effects.push(...t):e.effects.push(t):np(t)}const Ct=Symbol.for("v-fgt"),Is=Symbol.for("v-txt"),mt=Symbol.for("v-cmt"),ea=Symbol.for("v-stc"),ai=[];let Et=null;function _t(t=!1){ai.push(Et=t?null:[])}function Jp(){ai.pop(),Et=ai[ai.length-1]||null}let fi=1;function lc(t,e=!1){fi+=t,t<0&&Et&&e&&(Et.hasOnce=!0)}function nf(t){return t.dynamicChildren=fi>0?Et||Or:null,Jp(),fi>0&&Et&&Et.push(t),t}function Pt(t,e,n,r,i,s){return nf(Oe(t,e,n,r,i,s,!0))}function rf(t,e,n,r,i){return nf(ze(t,e,n,r,i,!0))}function us(t){return t?t.__v_isVNode===!0:!1}function rr(t,e){return t.type===e.type&&t.key===e.key}const sf=({key:t})=>t??null,Yi=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?He(t)||st(t)||he(t)?{i:jt,r:t,k:e,f:!!n}:t:null);function Oe(t,e=null,n=null,r=0,i=null,s=t===Ct?0:1,a=!1,o=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&sf(e),ref:e&&Yi(e),scopeId:Td,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:jt};return o?(Oo(c,n),s&128&&t.normalize(c)):n&&(c.shapeFlag|=He(n)?8:16),fi>0&&!a&&Et&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&Et.push(c),c}const ze=Kp;function Kp(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===_p)&&(t=mt),us(t)){const o=Nn(t,e,!0);return n&&Oo(o,n),fi>0&&!s&&Et&&(o.shapeFlag&6?Et[Et.indexOf(t)]=o:Et.push(o)),o.patchFlag=-2,o}if(cg(t)&&(t=t.__vccOpts),e){e=Xp(e);let{class:o,style:c}=e;o&&!He(o)&&(e.class=vo(o)),Ue(c)&&(To(c)&&!ae(c)&&(c=Qe({},c)),e.style=yo(c))}const a=He(t)?1:tf(t)?128:Ad(t)?64:Ue(t)?4:he(t)?2:0;return Oe(t,e,n,r,i,a,s,!0)}function Xp(t){return t?To(t)||Hd(t)?Qe({},t):t:null}function Nn(t,e,n=!1,r=!1){const{props:i,ref:s,patchFlag:a,children:o,transition:c}=t,u=e?Zp(i||{},e):i,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&sf(u),ref:e&&e.ref?n&&s?ae(s)?s.concat(Yi(e)):[s,Yi(e)]:Yi(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ct?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Nn(t.ssContent),ssFallback:t.ssFallback&&Nn(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&r&&di(d,c.clone(d)),d}function Yp(t=" ",e=0){return ze(Is,null,t,e)}function Qp(t="",e=!1){return e?(_t(),rf(mt,null,t)):ze(mt,null,t)}function en(t){return t==null||typeof t=="boolean"?ze(mt):ae(t)?ze(Ct,null,t.slice()):us(t)?En(t):ze(Is,null,String(t))}function En(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Nn(t)}function Oo(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ae(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),Oo(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!Hd(e)?e._ctx=jt:i===3&&jt&&(jt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else he(e)?(e={default:e,_ctx:jt},n=32):(e=String(e),r&64?(n=16,e=[Yp(e)]):n=8);t.children=e,t.shapeFlag|=n}function Zp(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=vo([e.class,r.class]));else if(i==="style")e.style=yo([e.style,r.style]);else if(ws(i)){const s=e[i],a=r[i];a&&s!==a&&!(ae(s)&&s.includes(a))&&(e[i]=s?[].concat(s,a):a)}else i!==""&&(e[i]=r[i])}return e}function Jt(t,e,n,r=null){qt(t,e,7,[n,r])}const eg=Ud();let tg=0;function ng(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||eg,s={uid:tg++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Eh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Gd(r,i),emitsOptions:ef(r,i),emit:null,emitted:null,propsDefaults:Be,inheritAttrs:r.inheritAttrs,ctx:Be,data:Be,props:Be,attrs:Be,slots:Be,refs:Be,setupState:Be,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=qp.bind(null,s),t.ce&&t.ce(s),s}let rt=null;const rg=()=>rt||jt;let ds,$a;{const t=Cs(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(a=>a(s)):i[0](s)}};ds=e("__VUE_INSTANCE_SETTERS__",n=>rt=n),$a=e("__VUE_SSR_SETTERS__",n=>hi=n)}const bi=t=>{const e=rt;return ds(t),t.scope.on(),()=>{t.scope.off(),ds(e)}},uc=()=>{rt&&rt.scope.off(),ds(null)};function af(t){return t.vnode.shapeFlag&4}let hi=!1;function ig(t,e=!1,n=!1){e&&$a(e);const{props:r,children:i}=t.vnode,s=af(t);Ap(t,r,s,e),Pp(t,i,n);const a=s?sg(t,e):void 0;return e&&$a(!1),a}function sg(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,vp);const{setup:r}=n;if(r){Un();const i=t.setupContext=r.length>1?og(t):null,s=bi(t),a=vi(r,t,0,[t.props,i]),o=Yu(a);if($n(),s(),(o||t.sp)&&!ii(t)&&Dd(t),o){if(a.then(uc,uc),e)return a.then(c=>{dc(t,c)}).catch(c=>{As(c,t,0)});t.asyncDep=a}else dc(t,a)}else of(t)}function dc(t,e,n){he(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ue(e)&&(t.setupState=bd(e)),of(t)}function of(t,e,n){const r=t.type;t.render||(t.render=r.render||nn);{const i=bi(t);Un();try{bp(t)}finally{$n(),i()}}}const ag={get(t,e){return tt(t,"get",""),t[e]}};function og(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,ag),slots:t.slots,emit:t.emit,expose:e}}function xo(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(bd(zh(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in si)return si[n](t)},has(e,n){return n in e||n in si}})):t.proxy}function cg(t){return he(t)&&"__vccOpts"in t}const lg=(t,e)=>Yh(t,e,hi);function ug(t,e,n){const r=arguments.length;return r===2?Ue(e)&&!ae(e)?us(e)?ze(t,null,[e]):ze(t,e):ze(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&us(n)&&(n=[n]),ze(t,e,n))}const dg="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let qa;const fc=typeof window<"u"&&window.trustedTypes;if(fc)try{qa=fc.createPolicy("vue",{createHTML:t=>t})}catch{}const cf=qa?t=>qa.createHTML(t):t=>t,fg="http://www.w3.org/2000/svg",hg="http://www.w3.org/1998/Math/MathML",ln=typeof document<"u"?document:null,hc=ln&&ln.createElement("template"),pg={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?ln.createElementNS(fg,t):e==="mathml"?ln.createElementNS(hg,t):n?ln.createElement(t,{is:n}):ln.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>ln.createTextNode(t),createComment:t=>ln.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ln.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const a=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{hc.innerHTML=cf(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const o=hc.content;if(r==="svg"||r==="mathml"){const c=o.firstChild;for(;c.firstChild;)o.appendChild(c.firstChild);o.removeChild(c)}e.insertBefore(o,n)}return[a?a.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},bn="transition",zr="animation",pi=Symbol("_vtc"),lf={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},gg=Qe({},Od,lf),mg=t=>(t.displayName="Transition",t.props=gg,t),_g=mg((t,{slots:e})=>ug(ap,yg(t),e)),Kn=(t,e=[])=>{ae(t)?t.forEach(n=>n(...e)):t&&t(...e)},pc=t=>t?ae(t)?t.some(e=>e.length>1):t.length>1:!1;function yg(t){const e={};for(const G in t)G in lf||(e[G]=t[G]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:o=`${n}-enter-to`,appearFromClass:c=s,appearActiveClass:u=a,appearToClass:d=o,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:v=`${n}-leave-active`,leaveToClass:w=`${n}-leave-to`}=t,b=vg(i),S=b&&b[0],D=b&&b[1],{onBeforeEnter:O,onEnter:$,onEnterCancelled:j,onLeave:k,onLeaveCancelled:T,onBeforeAppear:x=O,onAppear:P=$,onAppearCancelled:V=j}=e,F=(G,oe,me,ue)=>{G._enterCancelled=ue,Xn(G,oe?d:o),Xn(G,oe?u:a),me&&me()},H=(G,oe)=>{G._isLeaving=!1,Xn(G,p),Xn(G,w),Xn(G,v),oe&&oe()},C=G=>(oe,me)=>{const ue=G?P:$,te=()=>F(oe,G,me);Kn(ue,[oe,te]),gc(()=>{Xn(oe,G?c:s),an(oe,G?d:o),pc(ue)||mc(oe,r,S,te)})};return Qe(e,{onBeforeEnter(G){Kn(O,[G]),an(G,s),an(G,a)},onBeforeAppear(G){Kn(x,[G]),an(G,c),an(G,u)},onEnter:C(!1),onAppear:C(!0),onLeave(G,oe){G._isLeaving=!0;const me=()=>H(G,oe);an(G,p),G._enterCancelled?(an(G,v),vc()):(vc(),an(G,v)),gc(()=>{G._isLeaving&&(Xn(G,p),an(G,w),pc(k)||mc(G,r,D,me))}),Kn(k,[G,me])},onEnterCancelled(G){F(G,!1,void 0,!0),Kn(j,[G])},onAppearCancelled(G){F(G,!0,void 0,!0),Kn(V,[G])},onLeaveCancelled(G){H(G),Kn(T,[G])}})}function vg(t){if(t==null)return null;if(Ue(t))return[ta(t.enter),ta(t.leave)];{const e=ta(t);return[e,e]}}function ta(t){return yh(t)}function an(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[pi]||(t[pi]=new Set)).add(e)}function Xn(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[pi];n&&(n.delete(e),n.size||(t[pi]=void 0))}function gc(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let bg=0;function mc(t,e,n,r){const i=t._endId=++bg,s=()=>{i===t._endId&&r()};if(n!=null)return setTimeout(s,n);const{type:a,timeout:o,propCount:c}=wg(t,e);if(!a)return r();const u=a+"end";let d=0;const p=()=>{t.removeEventListener(u,v),s()},v=w=>{w.target===t&&++d>=c&&p()};setTimeout(()=>{d<c&&p()},o+1),t.addEventListener(u,v)}function wg(t,e){const n=window.getComputedStyle(t),r=b=>(n[b]||"").split(", "),i=r(`${bn}Delay`),s=r(`${bn}Duration`),a=_c(i,s),o=r(`${zr}Delay`),c=r(`${zr}Duration`),u=_c(o,c);let d=null,p=0,v=0;e===bn?a>0&&(d=bn,p=a,v=s.length):e===zr?u>0&&(d=zr,p=u,v=c.length):(p=Math.max(a,u),d=p>0?a>u?bn:zr:null,v=d?d===bn?s.length:c.length:0);const w=d===bn&&/\b(transform|all)(,|$)/.test(r(`${bn}Property`).toString());return{type:d,timeout:p,propCount:v,hasTransform:w}}function _c(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>yc(n)+yc(t[r])))}function yc(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function vc(){return document.body.offsetHeight}function Sg(t,e,n){const r=t[pi];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const bc=Symbol("_vod"),kg=Symbol("_vsh"),Cg=Symbol(""),Eg=/(^|;)\s*display\s*:/;function Tg(t,e,n){const r=t.style,i=He(n);let s=!1;if(n&&!i){if(e)if(He(e))for(const a of e.split(";")){const o=a.slice(0,a.indexOf(":")).trim();n[o]==null&&Qi(r,o,"")}else for(const a in e)n[a]==null&&Qi(r,a,"");for(const a in n)a==="display"&&(s=!0),Qi(r,a,n[a])}else if(i){if(e!==n){const a=r[Cg];a&&(n+=";"+a),r.cssText=n,s=Eg.test(n)}}else e&&t.removeAttribute("style");bc in t&&(t[bc]=s?r.display:"",t[kg]&&(r.display="none"))}const wc=/\s*!important$/;function Qi(t,e,n){if(ae(n))n.forEach(r=>Qi(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=Mg(t,e);wc.test(n)?t.setProperty(mr(r),n.replace(wc,""),"important"):t[r]=n}}const Sc=["Webkit","Moz","ms"],na={};function Mg(t,e){const n=na[e];if(n)return n;let r=Rn(e);if(r!=="filter"&&r in t)return na[e]=r;r=ed(r);for(let i=0;i<Sc.length;i++){const s=Sc[i]+r;if(s in t)return na[e]=s}return e}const kc="http://www.w3.org/1999/xlink";function Cc(t,e,n,r,i,s=Ch(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(kc,e.slice(6,e.length)):t.setAttributeNS(kc,e,n):n==null||s&&!nd(n)?t.removeAttribute(e):t.setAttribute(e,s?"":Fn(n)?String(n):n)}function Ec(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?cf(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const o=s==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(o!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let a=!1;if(n===""||n==null){const o=typeof t[e];o==="boolean"?n=nd(n):n==null&&o==="string"?(n="",a=!0):o==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(i||e)}function Ag(t,e,n,r){t.addEventListener(e,n,r)}function Og(t,e,n,r){t.removeEventListener(e,n,r)}const Tc=Symbol("_vei");function xg(t,e,n,r,i=null){const s=t[Tc]||(t[Tc]={}),a=s[e];if(r&&a)a.value=r;else{const[o,c]=Lg(e);if(r){const u=s[e]=Dg(r,i);Ag(t,o,u,c)}else a&&(Og(t,o,a,c),s[e]=void 0)}}const Mc=/(?:Once|Passive|Capture)$/;function Lg(t){let e;if(Mc.test(t)){e={};let r;for(;r=t.match(Mc);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):mr(t.slice(2)),e]}let ra=0;const Pg=Promise.resolve(),Ig=()=>ra||(Pg.then(()=>ra=0),ra=Date.now());function Dg(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;qt(Rg(r,n.value),e,5,[r])};return n.value=t,n.attached=Ig(),n}function Rg(t,e){if(ae(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const Ac=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Ng=(t,e,n,r,i,s)=>{const a=i==="svg";e==="class"?Sg(t,r,a):e==="style"?Tg(t,n,r):ws(e)?go(e)||xg(t,e,n,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):jg(t,e,r,a))?(Ec(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Cc(t,e,r,a,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!He(r))?Ec(t,Rn(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Cc(t,e,r,a))};function jg(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Ac(e)&&he(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Ac(e)&&He(n)?!1:e in t}const Bg=["ctrl","shift","alt","meta"],Fg={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Bg.some(n=>t[`${n}Key`]&&!e.includes(n))},Ug=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...s)=>{for(let a=0;a<e.length;a++){const o=Fg[e[a]];if(o&&o(i,e))return}return t(i,...s)})},$g=Qe({patchProp:Ng},pg);let Oc;function qg(){return Oc||(Oc=Dp($g))}const Hg=(...t)=>{const e=qg().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=Gg(r);if(!i)return;const s=e._component;!he(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const a=n(i,!1,Vg(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},e};function Vg(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Gg(t){return He(t)?document.querySelector(t):t}const Ge=Ms({connected:!1,document_loaded:!1,document:null,bot_speaking:!1,transcripts:[],show_citations:!1,sources:[]}),xc="http://localhost:8000";class zg{constructor(){this.connect()}connect(){const e=`${xc}/check`;fetch(e).then(n=>{if(n.ok){Ge.connected=!0;return}Ge.connected=!1}).catch(n=>{Ge.connected=!1,console.error(n)})}async upload(e){const n=`${xc}/upload`;return await fetch(n,{method:"POST",body:e}).then(r=>r.json()).catch(r=>(console.error(r),null))}}document.addEventListener("DOMContentLoaded",()=>{window.codex=new zg,console.log("Codex ready!")});function uf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ia,Lc;function df(){if(Lc)return ia;Lc=1;var t=Object.prototype.toString;ia=function(p){if(p===void 0)return"undefined";if(p===null)return"null";var v=typeof p;if(v==="boolean")return"boolean";if(v==="string")return"string";if(v==="number")return"number";if(v==="symbol")return"symbol";if(v==="function")return a(p)?"generatorfunction":"function";if(n(p))return"array";if(u(p))return"buffer";if(c(p))return"arguments";if(i(p))return"date";if(r(p))return"error";if(s(p))return"regexp";switch(e(p)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(o(p))return"generator";switch(v=t.call(p),v){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return v.slice(8,-1).toLowerCase().replace(/\s/g,"")};function e(d){return typeof d.constructor=="function"?d.constructor.name:null}function n(d){return Array.isArray?Array.isArray(d):d instanceof Array}function r(d){return d instanceof Error||typeof d.message=="string"&&d.constructor&&typeof d.constructor.stackTraceLimit=="number"}function i(d){return d instanceof Date?!0:typeof d.toDateString=="function"&&typeof d.getDate=="function"&&typeof d.setDate=="function"}function s(d){return d instanceof RegExp?!0:typeof d.flags=="string"&&typeof d.ignoreCase=="boolean"&&typeof d.multiline=="boolean"&&typeof d.global=="boolean"}function a(d,p){return e(d)==="GeneratorFunction"}function o(d){return typeof d.throw=="function"&&typeof d.return=="function"&&typeof d.next=="function"}function c(d){try{if(typeof d.length=="number"&&typeof d.callee=="function")return!0}catch(p){if(p.message.indexOf("callee")!==-1)return!0}return!1}function u(d){return d.constructor&&typeof d.constructor.isBuffer=="function"?d.constructor.isBuffer(d):!1}return ia}/*!
 * shallow-clone <https://github.com/jonschlinkert/shallow-clone>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */var sa,Pc;function Wg(){if(Pc)return sa;Pc=1;const t=Symbol.prototype.valueOf,e=df();function n(c,u){switch(e(c)){case"array":return c.slice();case"object":return Object.assign({},c);case"date":return new c.constructor(Number(c));case"map":return new Map(c);case"set":return new Set(c);case"buffer":return a(c);case"symbol":return o(c);case"arraybuffer":return i(c);case"float32array":case"float64array":case"int16array":case"int32array":case"int8array":case"uint16array":case"uint32array":case"uint8clampedarray":case"uint8array":return s(c);case"regexp":return r(c);case"error":return Object.create(c);default:return c}}function r(c){const u=c.flags!==void 0?c.flags:/\w+$/.exec(c)||void 0,d=new c.constructor(c.source,u);return d.lastIndex=c.lastIndex,d}function i(c){const u=new c.constructor(c.byteLength);return new Uint8Array(u).set(new Uint8Array(c)),u}function s(c,u){return new c.constructor(c.buffer,c.byteOffset,c.length)}function a(c){const u=c.length,d=Buffer.allocUnsafe?Buffer.allocUnsafe(u):Buffer.from(u);return c.copy(d),d}function o(c){return t?Object(t.call(c)):{}}return sa=n,sa}/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var aa,Ic;function Jg(){return Ic||(Ic=1,aa=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1}),aa}/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var oa,Dc;function Kg(){if(Dc)return oa;Dc=1;var t=Jg();function e(n){return t(n)===!0&&Object.prototype.toString.call(n)==="[object Object]"}return oa=function(r){var i,s;return!(e(r)===!1||(i=r.constructor,typeof i!="function")||(s=i.prototype,e(s)===!1)||s.hasOwnProperty("isPrototypeOf")===!1)},oa}var ca,Rc;function Xg(){if(Rc)return ca;Rc=1;const t=Wg(),e=df(),n=Kg();function r(a,o){switch(e(a)){case"object":return i(a,o);case"array":return s(a,o);default:return t(a)}}function i(a,o){if(typeof o=="function")return o(a);if(o||n(a)){const c=new a.constructor;for(let u in a)c[u]=r(a[u],o);return c}return a}function s(a,o){const c=new a.constructor(a.length);for(let u=0;u<a.length;u++)c[u]=r(a[u],o);return c}return ca=r,ca}var Yg=Xg();const Nc=uf(Yg);var Pi={exports:{}},jc;function Qg(){if(jc)return Pi.exports;jc=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(T,x,P){return Function.prototype.apply.call(T,x,P)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:n=function(T){return Object.getOwnPropertyNames(T)};function r(k){console&&console.warn&&console.warn(k)}var i=Number.isNaN||function(T){return T!==T};function s(){s.init.call(this)}Pi.exports=s,Pi.exports.once=O,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function o(k){if(typeof k!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof k)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(k){if(typeof k!="number"||k<0||i(k))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+k+".");a=k}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(T){if(typeof T!="number"||T<0||i(T))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+T+".");return this._maxListeners=T,this};function c(k){return k._maxListeners===void 0?s.defaultMaxListeners:k._maxListeners}s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(T){for(var x=[],P=1;P<arguments.length;P++)x.push(arguments[P]);var V=T==="error",F=this._events;if(F!==void 0)V=V&&F.error===void 0;else if(!V)return!1;if(V){var H;if(x.length>0&&(H=x[0]),H instanceof Error)throw H;var C=new Error("Unhandled error."+(H?" ("+H.message+")":""));throw C.context=H,C}var G=F[T];if(G===void 0)return!1;if(typeof G=="function")e(G,this,x);else for(var oe=G.length,me=b(G,oe),P=0;P<oe;++P)e(me[P],this,x);return!0};function u(k,T,x,P){var V,F,H;if(o(x),F=k._events,F===void 0?(F=k._events=Object.create(null),k._eventsCount=0):(F.newListener!==void 0&&(k.emit("newListener",T,x.listener?x.listener:x),F=k._events),H=F[T]),H===void 0)H=F[T]=x,++k._eventsCount;else if(typeof H=="function"?H=F[T]=P?[x,H]:[H,x]:P?H.unshift(x):H.push(x),V=c(k),V>0&&H.length>V&&!H.warned){H.warned=!0;var C=new Error("Possible EventEmitter memory leak detected. "+H.length+" "+String(T)+" listeners added. Use emitter.setMaxListeners() to increase limit");C.name="MaxListenersExceededWarning",C.emitter=k,C.type=T,C.count=H.length,r(C)}return k}s.prototype.addListener=function(T,x){return u(this,T,x,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(T,x){return u(this,T,x,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(k,T,x){var P={fired:!1,wrapFn:void 0,target:k,type:T,listener:x},V=d.bind(P);return V.listener=x,P.wrapFn=V,V}s.prototype.once=function(T,x){return o(x),this.on(T,p(this,T,x)),this},s.prototype.prependOnceListener=function(T,x){return o(x),this.prependListener(T,p(this,T,x)),this},s.prototype.removeListener=function(T,x){var P,V,F,H,C;if(o(x),V=this._events,V===void 0)return this;if(P=V[T],P===void 0)return this;if(P===x||P.listener===x)--this._eventsCount===0?this._events=Object.create(null):(delete V[T],V.removeListener&&this.emit("removeListener",T,P.listener||x));else if(typeof P!="function"){for(F=-1,H=P.length-1;H>=0;H--)if(P[H]===x||P[H].listener===x){C=P[H].listener,F=H;break}if(F<0)return this;F===0?P.shift():S(P,F),P.length===1&&(V[T]=P[0]),V.removeListener!==void 0&&this.emit("removeListener",T,C||x)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(T){var x,P,V;if(P=this._events,P===void 0)return this;if(P.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):P[T]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete P[T]),this;if(arguments.length===0){var F=Object.keys(P),H;for(V=0;V<F.length;++V)H=F[V],H!=="removeListener"&&this.removeAllListeners(H);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(x=P[T],typeof x=="function")this.removeListener(T,x);else if(x!==void 0)for(V=x.length-1;V>=0;V--)this.removeListener(T,x[V]);return this};function v(k,T,x){var P=k._events;if(P===void 0)return[];var V=P[T];return V===void 0?[]:typeof V=="function"?x?[V.listener||V]:[V]:x?D(V):b(V,V.length)}s.prototype.listeners=function(T){return v(this,T,!0)},s.prototype.rawListeners=function(T){return v(this,T,!1)},s.listenerCount=function(k,T){return typeof k.listenerCount=="function"?k.listenerCount(T):w.call(k,T)},s.prototype.listenerCount=w;function w(k){var T=this._events;if(T!==void 0){var x=T[k];if(typeof x=="function")return 1;if(x!==void 0)return x.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function b(k,T){for(var x=new Array(T),P=0;P<T;++P)x[P]=k[P];return x}function S(k,T){for(;T+1<k.length;T++)k[T]=k[T+1];k.pop()}function D(k){for(var T=new Array(k.length),x=0;x<T.length;++x)T[x]=k[x].listener||k[x];return T}function O(k,T){return new Promise(function(x,P){function V(H){k.removeListener(T,F),P(H)}function F(){typeof k.removeListener=="function"&&k.removeListener("error",V),x([].slice.call(arguments))}j(k,T,F,{once:!0}),T!=="error"&&$(k,V,{once:!0})})}function $(k,T,x){typeof k.on=="function"&&j(k,"error",T,x)}function j(k,T,x,P){if(typeof k.on=="function")P.once?k.once(T,x):k.on(T,x);else if(typeof k.addEventListener=="function")k.addEventListener(T,function V(F){P.once&&k.removeEventListener(T,V),x(F)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof k)}return Pi.exports}var Zg=Qg();const em=uf(Zg);var Ke=[];for(var la=0;la<256;++la)Ke.push((la+256).toString(16).slice(1));function tm(t,e=0){return(Ke[t[e+0]]+Ke[t[e+1]]+Ke[t[e+2]]+Ke[t[e+3]]+"-"+Ke[t[e+4]]+Ke[t[e+5]]+"-"+Ke[t[e+6]]+Ke[t[e+7]]+"-"+Ke[t[e+8]]+Ke[t[e+9]]+"-"+Ke[t[e+10]]+Ke[t[e+11]]+Ke[t[e+12]]+Ke[t[e+13]]+Ke[t[e+14]]+Ke[t[e+15]]).toLowerCase()}var Ii,nm=new Uint8Array(16);function rm(){if(!Ii&&(Ii=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ii))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ii(nm)}var im=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Bc={randomUUID:im};function sm(t,e,n){if(Bc.randomUUID&&!e&&!t)return Bc.randomUUID();t=t||{};var r=t.random||(t.rng||rm)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return tm(r)}function $e(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}function am(t){return t&&t.__esModule?t.default:t}var om={};$e(om,"httpActionGenerator",()=>ff);async function ff(t,e,n,r){try{De.debug("[RTVI] Fetch action",t,e);const i=new Headers({...Object.fromEntries((n.headers??new Headers).entries())});i.has("Content-Type")||i.set("Content-Type","application/json"),i.set("Cache-Control","no-cache"),i.set("Connection","keep-alive");const s=await fetch(t,{method:"POST",headers:i,body:JSON.stringify({...n.requestData,actions:[e]})}),a=s.headers.get("content-type");if(!s.ok){const o=await s.text();throw new It(`Failed to resolve action: ${o}`,s.status)}if(s.body&&(a!=null&&a.includes("text/event-stream"))){const o=s.body.pipeThrough(new TextDecoderStream).getReader();let c="";for(;;){const{value:u,done:d}=await o.read();if(d)break;c+=u;let p=c.indexOf(`

`);for(;p!==-1;){const v=c.slice(0,p);c=c.slice(p+2);const w=v.split(`
`);let b="";for(const S of w){const D=S.indexOf(":");D!==-1&&(b+=S.slice(D+1).trim())}try{const S=atob(b),D=JSON.parse(S);r(D)}catch(S){throw De.error("[RTVI] Failed to parse JSON:",S),S}p=c.indexOf(`

`)}}}else{const o=await s.json();r(o)}}catch(i){throw De.error("[RTVI] Error during fetch:",i),i}}var cm={};$e(cm,"RTVIClient",()=>mn);var hf={};hf=JSON.parse('{"name":"@pipecat-ai/client-js","version":"0.3.2","license":"BSD-2-Clause","main":"dist/index.js","module":"dist/index.module.js","types":"dist/index.d.ts","source":"src/index.ts","repository":{"type":"git","url":"git+https://github.com/pipecat-ai/pipecat-client-web.git"},"files":["dist","package.json","README.md"],"scripts":{"build":"jest --silent && parcel build --no-cache","dev":"parcel watch","lint":"eslint src/ --report-unused-disable-directives --max-warnings 0","test":"jest"},"jest":{"preset":"ts-jest","testEnvironment":"node"},"devDependencies":{"@jest/globals":"^29.7.0","@types/clone-deep":"^4.0.4","@types/jest":"^29.5.12","@types/uuid":"^10.0.0","eslint":"^9.11.1","eslint-config-prettier":"^9.1.0","eslint-plugin-simple-import-sort":"^12.1.1","jest":"^29.7.0","ts-jest":"^29.2.5"},"dependencies":{"@types/events":"^3.0.3","clone-deep":"^4.0.1","events":"^3.3.0","typed-emitter":"^2.1.0","uuid":"^10.0.0"}}');var _r={};$e(_r,"RTVIError",()=>It);$e(_r,"ConnectionTimeoutError",()=>pf);$e(_r,"StartBotError",()=>Ha);$e(_r,"TransportStartError",()=>gf);$e(_r,"BotNotReadyError",()=>Ln);$e(_r,"ConfigUpdateError",()=>lm);$e(_r,"ActionEndpointNotSetError",()=>mf);class It extends Error{constructor(e,n){super(e),this.status=n}}class pf extends It{constructor(e){super(e??"Bot did not enter ready state within the specified timeout period.")}}class Ha extends It{constructor(e,n){super(e??"Failed to connect / invalid auth bundle from base url",n??500),this.error="invalid-request-error"}}class gf extends It{constructor(e){super(e??"Unable to connect to transport")}}class Ln extends It{constructor(e){super(e??"Attempt to call action on transport when not in 'ready' state.")}}class lm extends It{constructor(e){super(e??"Unable to update configuration"),this.status=400}}class mf extends It{constructor(e){super(e??"Action endpoint is not set")}}function Ur(t,e,n){const r=n.value;return n.value=function(...i){if(this.state==="ready")return r.apply(this,i);throw new Ln(`Attempt to call ${e.toString()} when transport not in ready state. Await connect() first.`)},n}function um(...t){return t=["ready",...t],function(e,n,r){const i=r.get;return r.get=function(){if(t.includes(this.state))return i==null?void 0:i.apply(this);throw new Ln(`Attempt to call ${n.toString()} when transport not in ${t}. Await connect() first.`)},r}}var dm={};$e(dm,"RTVIEvent",()=>ee);var ee;(function(t){t.MessageError="messageError",t.Error="error",t.Connected="connected",t.Disconnected="disconnected",t.TransportStateChanged="transportStateChanged",t.Config="config",t.ConfigDescribe="configDescribe",t.ActionsAvailable="actionsAvailable",t.ParticipantConnected="participantConnected",t.ParticipantLeft="participantLeft",t.TrackStarted="trackStarted",t.TrackStopped="trackStopped",t.ScreenTrackStarted="screenTrackStarted",t.ScreenTrackStopped="screenTrackStopped",t.ScreenShareError="screenShareError",t.AvailableCamsUpdated="availableCamsUpdated",t.AvailableMicsUpdated="availableMicsUpdated",t.AvailableSpeakersUpdated="availableSpeakersUpdated",t.CamUpdated="camUpdated",t.MicUpdated="micUpdated",t.SpeakerUpdated="speakerUpdated",t.BotConnected="botConnected",t.BotReady="botReady",t.BotDisconnected="botDisconnected",t.BotStartedSpeaking="botStartedSpeaking",t.BotStoppedSpeaking="botStoppedSpeaking",t.RemoteAudioLevel="remoteAudioLevel",t.UserStartedSpeaking="userStartedSpeaking",t.UserStoppedSpeaking="userStoppedSpeaking",t.LocalAudioLevel="localAudioLevel",t.Metrics="metrics",t.UserTranscript="userTranscript",t.BotTranscript="botTranscript",t.BotLlmText="botLlmText",t.BotLlmStarted="botLlmStarted",t.BotLlmStopped="botLlmStopped",t.BotTtsText="botTtsText",t.BotTtsStarted="botTtsStarted",t.BotTtsStopped="botTtsStopped",t.LLMFunctionCall="llmFunctionCall",t.LLMFunctionCallStart="llmFunctionCallStart",t.LLMJsonCompletion="llmJsonCompletion",t.StorageItemStored="storageItemStored"})(ee||(ee={}));var fm={};$e(fm,"RTVIClientHelper",()=>Lo);class Lo{constructor(e){this._options=e}set client(e){this._client=e}set service(e){this._service=e}}var _f={};$e(_f,"LogLevel",()=>On);$e(_f,"logger",()=>De);var On;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=1]="ERROR",t[t.WARN=2]="WARN",t[t.INFO=3]="INFO",t[t.DEBUG=4]="DEBUG"})(On||(On={}));class Mr{constructor(){this.level=On.DEBUG}static getInstance(){return Mr.instance||(Mr.instance=new Mr),Mr.instance}setLevel(e){this.level=e}debug(...e){this.level>=On.DEBUG&&console.debug(...e)}info(...e){this.level>=On.INFO&&console.info(...e)}warn(...e){this.level>=On.WARN&&console.warn(...e)}error(...e){this.level>=On.ERROR&&console.error(...e)}}const De=Mr.getInstance();var $r={};$e($r,"RTVI_MESSAGE_LABEL",()=>yf);$e($r,"RTVIMessageType",()=>we);$e($r,"RTVIMessage",()=>Ye);$e($r,"RTVI_ACTION_TYPE",()=>vf);$e($r,"RTVIActionRequest",()=>bf);$e($r,"MessageDispatcher",()=>wf);const yf="rtvi-ai";var we;(function(t){t.CLIENT_READY="client-ready",t.UPDATE_CONFIG="update-config",t.GET_CONFIG="get-config",t.DESCRIBE_CONFIG="describe-config",t.DESCRIBE_ACTIONS="describe-actions",t.DISCONNECT_BOT="disconnect-bot",t.BOT_READY="bot-ready",t.ERROR="error",t.ERROR_RESPONSE="error-response",t.CONFIG="config",t.CONFIG_AVAILABLE="config-available",t.CONFIG_ERROR="config-error",t.ACTIONS_AVAILABLE="actions-available",t.ACTION_RESPONSE="action-response",t.METRICS="metrics",t.USER_TRANSCRIPTION="user-transcription",t.BOT_TRANSCRIPTION="bot-transcription",t.USER_STARTED_SPEAKING="user-started-speaking",t.USER_STOPPED_SPEAKING="user-stopped-speaking",t.BOT_STARTED_SPEAKING="bot-started-speaking",t.BOT_STOPPED_SPEAKING="bot-stopped-speaking",t.USER_LLM_TEXT="user-llm-text",t.BOT_LLM_TEXT="bot-llm-text",t.BOT_LLM_STARTED="bot-llm-started",t.BOT_LLM_STOPPED="bot-llm-stopped",t.BOT_TTS_TEXT="bot-tts-text",t.BOT_TTS_STARTED="bot-tts-started",t.BOT_TTS_STOPPED="bot-tts-stopped",t.STORAGE_ITEM_STORED="storage-item-stored"})(we||(we={}));class Ye{constructor(e,n,r){this.label=yf,this.type=e,this.data=n,this.id=r||sm().slice(0,8)}static clientReady(){return new Ye(we.CLIENT_READY,{})}static updateConfig(e,n=!1){return new Ye(we.UPDATE_CONFIG,{config:e,interrupt:n})}static describeConfig(){return new Ye(we.DESCRIBE_CONFIG,{})}static getBotConfig(){return new Ye(we.GET_CONFIG,{})}static describeActions(){return new Ye(we.DESCRIBE_ACTIONS,{})}static disconnectBot(){return new Ye(we.DISCONNECT_BOT,{})}}const vf="action";class bf extends Ye{constructor(e){super(vf,e)}}class wf{constructor(e){this._queue=new Array,this._gcTime=1e4,this._queue=[],this._client=e}dispatch(e){const n=new Promise((r,i)=>{this._queue.push({message:e,timestamp:Date.now(),resolve:r,reject:i})});return De.debug("[MessageDispatcher] dispatch",e),this._client.sendMessage(e),this._gc(),n}async dispatchAction(e,n){var i;const r=new Promise((s,a)=>{this._queue.push({message:e,timestamp:Date.now(),resolve:s,reject:a})});if(De.debug("[MessageDispatcher] action",e),this._client.connected)this._client.sendMessage(e);else{if(!((i=this._client.params.endpoints)!=null&&i.action))throw De.error("[MessageDispatcher] Action endpoint is required when dispatching action in disconnected state"),new mf;const s=this._client.constructUrl("action");try{await ff(s,e,this._client.params,a=>{n(a)})}catch{n(new Ye(we.ERROR_RESPONSE,`Action endpoint '${s}' returned an error response`,e.id))}}return this._gc(),r}_resolveReject(e,n=!0){const r=this._queue.find(i=>i.message.id===e.id);return r&&(n?(De.debug("[MessageDispatcher] Resolve",e),r.resolve((e.type===we.ACTION_RESPONSE,e))):(De.debug("[MessageDispatcher] Reject",e),r.reject(e)),this._queue=this._queue.filter(i=>i.message.id!==e.id),De.debug("[MessageDispatcher] Queue",this._queue)),e}resolve(e){return this._resolveReject(e,!0)}reject(e){return this._resolveReject(e,!1)}_gc(){this._queue=this._queue.filter(e=>Date.now()-e.timestamp<this._gcTime),De.debug("[MessageDispatcher] GC",this._queue)}}var yr=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(s=(i<3?a(s):i>3?a(e,n,s):a(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};const hm={connect:"/connect",action:"/action"};class pm extends em{}class mn extends pm{constructor(e){super(),this.params={...e.params,endpoints:{...hm,...e.params.endpoints??{}}},this._helpers={},this._transport=e.transport;const n={...e.callbacks,onMessageError:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onMessageError)==null||s.call(i,r),this.emit(ee.MessageError,r)},onError:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onError)==null||s.call(i,r),this.emit(ee.Error,r)},onConnected:()=>{var r,i;(i=(r=e==null?void 0:e.callbacks)==null?void 0:r.onConnected)==null||i.call(r),this.emit(ee.Connected)},onDisconnected:()=>{var r,i;(i=(r=e==null?void 0:e.callbacks)==null?void 0:r.onDisconnected)==null||i.call(r),this.emit(ee.Disconnected)},onTransportStateChanged:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onTransportStateChanged)==null||s.call(i,r),this.emit(ee.TransportStateChanged,r)},onConfig:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onConfig)==null||s.call(i,r),this.emit(ee.Config,r)},onConfigDescribe:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onConfigDescribe)==null||s.call(i,r),this.emit(ee.ConfigDescribe,r)},onActionsAvailable:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onActionsAvailable)==null||s.call(i,r),this.emit(ee.ActionsAvailable,r)},onParticipantJoined:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onParticipantJoined)==null||s.call(i,r),this.emit(ee.ParticipantConnected,r)},onParticipantLeft:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onParticipantLeft)==null||s.call(i,r),this.emit(ee.ParticipantLeft,r)},onTrackStarted:(r,i)=>{var s,a;(a=(s=e==null?void 0:e.callbacks)==null?void 0:s.onTrackStarted)==null||a.call(s,r,i),this.emit(ee.TrackStarted,r,i)},onTrackStopped:(r,i)=>{var s,a;(a=(s=e==null?void 0:e.callbacks)==null?void 0:s.onTrackStopped)==null||a.call(s,r,i),this.emit(ee.TrackStopped,r,i)},onScreenTrackStarted:(r,i)=>{var s,a;(a=(s=e==null?void 0:e.callbacks)==null?void 0:s.onScreenTrackStarted)==null||a.call(s,r,i),this.emit(ee.ScreenTrackStarted,r,i)},onScreenTrackStopped:(r,i)=>{var s,a;(a=(s=e==null?void 0:e.callbacks)==null?void 0:s.onScreenTrackStopped)==null||a.call(s,r,i),this.emit(ee.ScreenTrackStopped,r,i)},onScreenShareError:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onScreenShareError)==null||s.call(i,r),this.emit(ee.ScreenShareError,r)},onAvailableCamsUpdated:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onAvailableCamsUpdated)==null||s.call(i,r),this.emit(ee.AvailableCamsUpdated,r)},onAvailableMicsUpdated:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onAvailableMicsUpdated)==null||s.call(i,r),this.emit(ee.AvailableMicsUpdated,r)},onAvailableSpeakersUpdated:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onAvailableSpeakersUpdated)==null||s.call(i,r),this.emit(ee.AvailableSpeakersUpdated,r)},onCamUpdated:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onCamUpdated)==null||s.call(i,r),this.emit(ee.CamUpdated,r)},onMicUpdated:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onMicUpdated)==null||s.call(i,r),this.emit(ee.MicUpdated,r)},onSpeakerUpdated:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onSpeakerUpdated)==null||s.call(i,r),this.emit(ee.SpeakerUpdated,r)},onBotConnected:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onBotConnected)==null||s.call(i,r),this.emit(ee.BotConnected,r)},onBotReady:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onBotReady)==null||s.call(i,r),this.emit(ee.BotReady,r)},onBotDisconnected:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onBotDisconnected)==null||s.call(i,r),this.emit(ee.BotDisconnected,r)},onBotStartedSpeaking:()=>{var r,i;(i=(r=e==null?void 0:e.callbacks)==null?void 0:r.onBotStartedSpeaking)==null||i.call(r),this.emit(ee.BotStartedSpeaking)},onBotStoppedSpeaking:()=>{var r,i;(i=(r=e==null?void 0:e.callbacks)==null?void 0:r.onBotStoppedSpeaking)==null||i.call(r),this.emit(ee.BotStoppedSpeaking)},onRemoteAudioLevel:(r,i)=>{var s,a;(a=(s=e==null?void 0:e.callbacks)==null?void 0:s.onRemoteAudioLevel)==null||a.call(s,r,i),this.emit(ee.RemoteAudioLevel,r,i)},onUserStartedSpeaking:()=>{var r,i;(i=(r=e==null?void 0:e.callbacks)==null?void 0:r.onUserStartedSpeaking)==null||i.call(r),this.emit(ee.UserStartedSpeaking)},onUserStoppedSpeaking:()=>{var r,i;(i=(r=e==null?void 0:e.callbacks)==null?void 0:r.onUserStoppedSpeaking)==null||i.call(r),this.emit(ee.UserStoppedSpeaking)},onLocalAudioLevel:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onLocalAudioLevel)==null||s.call(i,r),this.emit(ee.LocalAudioLevel,r)},onUserTranscript:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onUserTranscript)==null||s.call(i,r),this.emit(ee.UserTranscript,r)},onBotTranscript:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onBotTranscript)==null||s.call(i,r),this.emit(ee.BotTranscript,r)},onBotLlmText:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onBotLlmText)==null||s.call(i,r),this.emit(ee.BotLlmText,r)},onBotLlmStarted:()=>{var r,i;(i=(r=e==null?void 0:e.callbacks)==null?void 0:r.onBotLlmStarted)==null||i.call(r),this.emit(ee.BotLlmStarted)},onBotLlmStopped:()=>{var r,i;(i=(r=e==null?void 0:e.callbacks)==null?void 0:r.onBotLlmStopped)==null||i.call(r),this.emit(ee.BotLlmStopped)},onBotTtsText:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onBotTtsText)==null||s.call(i,r),this.emit(ee.BotTtsText,r)},onBotTtsStarted:()=>{var r,i;(i=(r=e==null?void 0:e.callbacks)==null?void 0:r.onBotTtsStarted)==null||i.call(r),this.emit(ee.BotTtsStarted)},onBotTtsStopped:()=>{var r,i;(i=(r=e==null?void 0:e.callbacks)==null?void 0:r.onBotTtsStopped)==null||i.call(r),this.emit(ee.BotTtsStopped)},onStorageItemStored:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onStorageItemStored)==null||s.call(i,r),this.emit(ee.StorageItemStored,r)}};this._options={...e,callbacks:n,enableMic:e.enableMic??!0,enableCam:e.enableCam??!1},this._initialize(),De.debug("[RTVI Client] Initialized",this.version)}constructUrl(e){var r;if(!this.params.baseUrl)throw new It("Base URL not set. Please set rtviClient.params.baseUrl");return this.params.baseUrl.replace(/\/+$/,"")+(((r=this.params.endpoints)==null?void 0:r[e])??"")}setLogLevel(e){De.setLevel(e)}async initDevices(){De.debug("[RTVI Client] Initializing devices..."),await this._transport.initDevices()}async connect(){if(["authenticating","connecting","connected","ready"].includes(this._transport.state))throw new It("Voice client has already been started. Please call disconnect() before starting again.");return this._abortController=new AbortController,new Promise((e,n)=>{(async()=>{var s,a,o;this._startResolve=e,this._transport.state==="disconnected"&&await this._transport.initDevices(),this._transport.state="authenticating",this._options.timeout&&(this._handshakeTimeout=setTimeout(async()=>{var c;(c=this._abortController)==null||c.abort(),await this.disconnect(),this._transport.state="error",n(new pf)},this._options.timeout));let r;const i=this._options.customConnectHandler;if(De.debug("[RTVI Client] Start params",this.params),this.params={...this.params,requestData:{...this.params.requestData,rtvi_client_version:this.version}},!this.params.baseUrl&&!((s=this.params.endpoints)!=null&&s.connect))De.debug("[RTVI Client] Connecting directly (skipping handshake / auth)..."),clearTimeout(this._handshakeTimeout);else{const c=this.constructUrl("connect");De.debug("[RTVI Client] Connecting...",c),De.debug("[RTVI Client] Start params",this.params);try{i?r=await i(this.params,this._handshakeTimeout,this._abortController):r=await fetch(c,{method:"POST",mode:"cors",headers:new Headers({"Content-Type":"application/json",...Object.fromEntries((this.params.headers??new Headers).entries())}),body:JSON.stringify({config:this.params.config,...this.params.services?{services:this.params.services}:{},...this.params.requestData}),signal:(a=this._abortController)==null?void 0:a.signal}).then(u=>(clearTimeout(this._handshakeTimeout),u.ok?u.json():Promise.reject(u)))}catch(u){if(clearTimeout(this._handshakeTimeout),(o=this._abortController)!=null&&o.signal.aborted)return;if(this._transport.state="error",u instanceof Response){const d=await u.json();n(new Ha(d.info??d.detail??u.statusText,u.status))}else n(new Ha);return}De.debug("[RTVI Client] Auth bundle received",r)}try{await this._transport.connect(r,this._abortController)}catch(c){clearTimeout(this._handshakeTimeout),n(c);return}await this._transport.sendReadyMessage()})()})}async disconnect(){this._abortController&&this._abortController.abort(),clearTimeout(this._handshakeTimeout),await this._transport.disconnect(),this._initialize()}_initialize(){this._transport=this._options.transport,this._transport.initialize(this._options,this.handleMessage.bind(this)),this._messageDispatcher=new wf(this)}get connected(){return["connected","ready"].includes(this._transport.state)}get state(){return this._transport.state}get version(){return am(hf).version}async getAllMics(){return await this._transport.getAllMics()}async getAllCams(){return await this._transport.getAllCams()}async getAllSpeakers(){return await this._transport.getAllSpeakers()}get selectedMic(){return this._transport.selectedMic}get selectedCam(){return this._transport.selectedCam}get selectedSpeaker(){return this._transport.selectedSpeaker}updateMic(e){this._transport.updateMic(e)}updateCam(e){this._transport.updateCam(e)}updateSpeaker(e){this._transport.updateSpeaker(e)}enableMic(e){this._transport.enableMic(e)}get isMicEnabled(){return this._transport.isMicEnabled}enableCam(e){this._transport.enableCam(e)}get isCamEnabled(){return this._transport.isCamEnabled}tracks(){return this._transport.tracks()}enableScreenShare(e){return this._transport.enableScreenShare(e)}get isSharingScreen(){return this._transport.isSharingScreen}async getConfig(){return(await this._messageDispatcher.dispatch(Ye.getBotConfig())).data.config}async updateConfig(e,n=!1){return De.debug("[RTVI Client] Updating config",e),this._messageDispatcher.dispatch(Ye.updateConfig(e,n))}async describeConfig(){return this._messageDispatcher.dispatch(Ye.describeConfig())}async getServiceOptionsFromConfig(e,n){if(!n&&this.state!=="ready")throw new Ln("getServiceOptionsFromConfig called without config array before bot is ready");return Promise.resolve().then(async()=>{if(!e){De.debug("Target service name is required");return}const i=(n??await this.getConfig()).find(s=>s.service===e);if(!i){De.debug("No service with name "+e+" not found in config");return}return i})}async getServiceOptionValueFromConfig(e,n,r){const i=await this.getServiceOptionsFromConfig(e,r);if(!i){De.debug("Service with name "+e+" not found in config");return}const s=i.options.find(a=>a.name===n);return s?s.value:void 0}_updateOrAddOption(e,n){const r=e.findIndex(i=>i.name===n.name);return r!==-1?e.map((i,s)=>s===r?{...i,value:n.value}:i):[...e,{name:n.name,value:n.value}]}async setServiceOptionInConfig(e,n,r){const i=Nc(r??await this.getConfig());if(!await this.getServiceOptionsFromConfig(e,i))return De.debug("Service with name '"+e+"' not found in config"),i;const a=Array.isArray(n)?n:[n];for(const o of a){const c=i.find(d=>d.service===e),u=c?this._updateOrAddOption(c.options,o):[{name:o.name,value:o.value}];c?c.options=u:i.push({service:e,options:u})}return i}async setConfigOptions(e,n){let r=Nc(n??await this.getConfig());for(const i of e)r=await this.setServiceOptionInConfig(i.service,i.options,r)||r;return r}async action(e){return this._messageDispatcher.dispatchAction(new bf(e),this.handleMessage.bind(this))}async describeActions(){return this._messageDispatcher.dispatch(Ye.describeActions())}get transportExpiry(){return this._transport.expiry}sendMessage(e){this._transport.sendMessage(e)}disconnectBot(){this._transport.sendMessage(new Ye(we.DISCONNECT_BOT,{}))}handleMessage(e){var n,r,i,s,a,o,c,u,d,p,v,w,b,S,D,O,$,j,k,T,x,P,V,F,H,C,G,oe,me,ue,te,Q,K,_e,ge,Ce,ye,ne,l,h,f,y,m;switch(De.debug("[RTVI Message]",e),e.type){case we.BOT_READY:clearTimeout(this._handshakeTimeout),(n=this._startResolve)==null||n.call(this,e.data),(i=(r=this._options.callbacks)==null?void 0:r.onBotReady)==null||i.call(r,e.data);break;case we.CONFIG_AVAILABLE:this._messageDispatcher.resolve(e),(a=(s=this._options.callbacks)==null?void 0:s.onConfigDescribe)==null||a.call(s,e.data);break;case we.CONFIG:{const M=this._messageDispatcher.resolve(e);(c=(o=this._options.callbacks)==null?void 0:o.onConfig)==null||c.call(o,M.data.config);break}case we.ACTIONS_AVAILABLE:this._messageDispatcher.resolve(e),(d=(u=this._options.callbacks)==null?void 0:u.onActionsAvailable)==null||d.call(u,e.data);break;case we.ACTION_RESPONSE:this._messageDispatcher.resolve(e);break;case we.ERROR_RESPONSE:{const M=this._messageDispatcher.reject(e);(v=(p=this._options.callbacks)==null?void 0:p.onMessageError)==null||v.call(p,M);break}case we.ERROR:(b=(w=this._options.callbacks)==null?void 0:w.onError)==null||b.call(w,e);break;case we.USER_STARTED_SPEAKING:(D=(S=this._options.callbacks)==null?void 0:S.onUserStartedSpeaking)==null||D.call(S);break;case we.USER_STOPPED_SPEAKING:($=(O=this._options.callbacks)==null?void 0:O.onUserStoppedSpeaking)==null||$.call(O);break;case we.BOT_STARTED_SPEAKING:(k=(j=this._options.callbacks)==null?void 0:j.onBotStartedSpeaking)==null||k.call(j);break;case we.BOT_STOPPED_SPEAKING:(x=(T=this._options.callbacks)==null?void 0:T.onBotStoppedSpeaking)==null||x.call(T);break;case we.USER_TRANSCRIPTION:{const M=e.data;(V=(P=this._options.callbacks)==null?void 0:P.onUserTranscript)==null||V.call(P,M);break}case we.BOT_TRANSCRIPTION:(H=(F=this._options.callbacks)==null?void 0:F.onBotTranscript)==null||H.call(F,e.data);break;case we.BOT_LLM_TEXT:(G=(C=this._options.callbacks)==null?void 0:C.onBotLlmText)==null||G.call(C,e.data);break;case we.BOT_LLM_STARTED:(me=(oe=this._options.callbacks)==null?void 0:oe.onBotLlmStarted)==null||me.call(oe);break;case we.BOT_LLM_STOPPED:(te=(ue=this._options.callbacks)==null?void 0:ue.onBotLlmStopped)==null||te.call(ue);break;case we.BOT_TTS_TEXT:(K=(Q=this._options.callbacks)==null?void 0:Q.onBotTtsText)==null||K.call(Q,e.data);break;case we.BOT_TTS_STARTED:(ge=(_e=this._options.callbacks)==null?void 0:_e.onBotTtsStarted)==null||ge.call(_e);break;case we.BOT_TTS_STOPPED:(ye=(Ce=this._options.callbacks)==null?void 0:Ce.onBotTtsStopped)==null||ye.call(Ce);break;case we.METRICS:this.emit(ee.Metrics,e.data),(l=(ne=this._options.callbacks)==null?void 0:ne.onMetrics)==null||l.call(ne,e.data);break;case we.STORAGE_ITEM_STORED:(f=(h=this._options.callbacks)==null?void 0:h.onStorageItemStored)==null||f.call(h,e.data);break;default:{let M=!1;for(const q of Object.values(this._helpers))q.getMessageTypes().includes(e.type)&&(M=!0,q.handleMessage(e));M||(m=(y=this._options.callbacks)==null?void 0:y.onGenericMessage)==null||m.call(y,e.data)}}}registerHelper(e,n){if(this._helpers[e])throw new Error(`Helper with name '${e}' already registered`);if(!(n instanceof Lo))throw new Error("Helper must be an instance of RTVIClientHelper");return n.service=e,n.client=this,this._helpers[e]=n,this._helpers[e]}getHelper(e){const n=this._helpers[e];if(!n){De.debug(`Helper targeting service '${e}' not found`);return}return n}unregisterHelper(e){this._helpers[e]&&delete this._helpers[e]}}yr([Ur],mn.prototype,"getConfig",null);yr([Ur],mn.prototype,"updateConfig",null);yr([Ur],mn.prototype,"describeConfig",null);yr([Ur],mn.prototype,"describeActions",null);yr([um("connected","ready")],mn.prototype,"transportExpiry",null);yr([Ur],mn.prototype,"sendMessage",null);yr([Ur],mn.prototype,"disconnectBot",null);var Sf={};$e(Sf,"LLMMessageType",()=>xn);$e(Sf,"LLMHelper",()=>gm);var xn;(function(t){t.LLM_FUNCTION_CALL="llm-function-call",t.LLM_FUNCTION_CALL_START="llm-function-call-start",t.LLM_FUNCTION_CALL_RESULT="llm-function-call-result",t.LLM_JSON_COMPLETION="llm-json-completion"})(xn||(xn={}));class gm extends Lo{constructor(e){super(e),this._functionCallCallback=null}getMessageTypes(){return Object.values(xn)}async getContext(){if(this._client.state!=="ready")throw new Ln("getContext called while transport not in ready state");return(await this._client.action({service:this._service,action:"get_context"})).data.result}async setContext(e,n=!1){if(this._client.state!=="ready")throw new Ln("setContext called while transport not in ready state");return!!(await this._client.action({service:this._service,action:"set_context",arguments:[{name:"messages",value:e.messages},{name:"interrupt",value:n}]})).data.result}async appendToMessages(e,n=!1){if(this._client.state!=="ready")throw new Ln("setContext called while transport not in ready state");return!!(await this._client.action({service:this._service,action:"append_to_messages",arguments:[{name:"messages",value:[e]},{name:"run_immediately",value:n}]})).data.result}async run(e=!1){if(this._client.state==="ready")return this._client.action({service:this._service,action:"run",arguments:[{name:"interrupt",value:e}]})}handleFunctionCall(e){this._functionCallCallback=e}handleMessage(e){var n,r,i,s,a,o;switch(e.type){case xn.LLM_JSON_COMPLETION:(r=(n=this._options.callbacks)==null?void 0:n.onLLMJsonCompletion)==null||r.call(n,e.data),this._client.emit(ee.LLMJsonCompletion,e.data);break;case xn.LLM_FUNCTION_CALL:{const c=e.data;if((s=(i=this._options.callbacks)==null?void 0:i.onLLMFunctionCall)==null||s.call(i,e.data),this._client.emit(ee.LLMFunctionCall,e.data),this._functionCallCallback){const u={functionName:c.function_name,arguments:c.args};if(this._client.state==="ready")this._functionCallCallback(u).then(d=>{this._client.sendMessage(new Ye(xn.LLM_FUNCTION_CALL_RESULT,{function_name:c.function_name,tool_call_id:c.tool_call_id,arguments:c.args,result:d}))});else throw new Ln("Attempted to send a function call result from bot while transport not in ready state")}break}case xn.LLM_FUNCTION_CALL_START:{const c=e.data;(o=(a=this._options.callbacks)==null?void 0:a.onLLMFunctionCallStart)==null||o.call(a,c.function_name),this._client.emit(ee.LLMFunctionCallStart,c.function_name);break}}}}var mm={};$e(mm,"Transport",()=>kf);class kf{constructor(){this._state="disconnected",this._expiry=void 0}get expiry(){return this._expiry}}function Fc(t,e){if(t==null)return{};var n,r,i=function(a,o){if(a==null)return{};var c,u,d={},p=Object.keys(a);for(u=0;u<p.length;u++)c=p[u],o.indexOf(c)>=0||(d[c]=a[c]);return d}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Vt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Le(t){return Le=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Le(t)}function Cf(t){var e=function(n,r){if(Le(n)!=="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var s=i.call(n,r);if(Le(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}(t,"string");return Le(e)==="symbol"?e:String(e)}function Uc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Cf(r.key),r)}}function Gt(t,e,n){return e&&Uc(t.prototype,e),n&&Uc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function on(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gi(t,e){return gi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},gi(t,e)}function Ds(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gi(t,e)}function Rs(t,e){if(e&&(Le(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return on(t)}function Ht(t){return Ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ht(t)}function dn(t,e,n){return(e=Cf(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $c(t,e,n,r,i,s,a){try{var o=t[s](a),c=o.value}catch(u){return void n(u)}o.done?e(c):Promise.resolve(c).then(r,i)}function se(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function a(c){$c(s,r,i,a,o,"next",c)}function o(c){$c(s,r,i,a,o,"throw",c)}a(void 0)})}}function qc(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function dr(t,e){return function(n){if(Array.isArray(n))return n}(t)||function(n,r){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var s,a,o,c,u=[],d=!0,p=!1;try{if(o=(i=i.call(n)).next,r===0){if(Object(i)!==i)return;d=!1}else for(;!(d=(s=o.call(i)).done)&&(u.push(s.value),u.length!==r);d=!0);}catch(v){p=!0,a=v}finally{try{if(!d&&i.return!=null&&(c=i.return(),Object(c)!==c))return}finally{if(p)throw a}}return u}}(t,e)||function(n,r){if(n){if(typeof n=="string")return qc(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);return i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set"?Array.from(n):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?qc(n,r):void 0}}(t,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var Ef,hn={},_m={get exports(){return hn},set exports(t){hn=t}},Dr=typeof Reflect=="object"?Reflect:null,Hc=Dr&&typeof Dr.apply=="function"?Dr.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};Ef=Dr&&typeof Dr.ownKeys=="function"?Dr.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var Vc=Number.isNaN||function(t){return t!=t};function xe(){xe.init.call(this)}_m.exports=xe,hn.once=function(t,e){return new Promise(function(n,r){function i(a){t.removeListener(e,s),r(a)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}Xc(t,e,s,{once:!0}),e!=="error"&&function(a,o,c){typeof a.on=="function"&&Xc(a,"error",o,c)}(t,i,{once:!0})})},xe.EventEmitter=xe,xe.prototype._events=void 0,xe.prototype._eventsCount=0,xe.prototype._maxListeners=void 0;var Gc=10;function Zi(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function Tf(t){return t._maxListeners===void 0?xe.defaultMaxListeners:t._maxListeners}function zc(t,e,n,r){var i,s,a,o;if(Zi(n),(s=t._events)===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),a=s[e]),a===void 0)a=s[e]=n,++t._eventsCount;else if(typeof a=="function"?a=s[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=Tf(t))>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=a.length,o=c,console&&console.warn&&console.warn(o)}return t}function ym(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Wc(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=ym.bind(r);return i.listener=n,r.wrapFn=i,i}function Jc(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?function(s){for(var a=new Array(s.length),o=0;o<a.length;++o)a[o]=s[o].listener||s[o];return a}(i):Mf(i,i.length)}function Kc(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}function Mf(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function Xc(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else{if(typeof t.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,function i(s){r.once&&t.removeEventListener(e,i),n(s)})}}Object.defineProperty(xe,"defaultMaxListeners",{enumerable:!0,get:function(){return Gc},set:function(t){if(typeof t!="number"||t<0||Vc(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Gc=t}}),xe.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},xe.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Vc(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},xe.prototype.getMaxListeners=function(){return Tf(this)},xe.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r=t==="error",i=this._events;if(i!==void 0)r=r&&i.error===void 0;else if(!r)return!1;if(r){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var o=i[t];if(o===void 0)return!1;if(typeof o=="function")Hc(o,this,e);else{var c=o.length,u=Mf(o,c);for(n=0;n<c;++n)Hc(u[n],this,e)}return!0},xe.prototype.addListener=function(t,e){return zc(this,t,e,!1)},xe.prototype.on=xe.prototype.addListener,xe.prototype.prependListener=function(t,e){return zc(this,t,e,!0)},xe.prototype.once=function(t,e){return Zi(e),this.on(t,Wc(this,t,e)),this},xe.prototype.prependOnceListener=function(t,e){return Zi(e),this.prependListener(t,Wc(this,t,e)),this},xe.prototype.removeListener=function(t,e){var n,r,i,s,a;if(Zi(e),(r=this._events)===void 0)return this;if((n=r[t])===void 0)return this;if(n===e||n.listener===e)--this._eventsCount==0?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if(typeof n!="function"){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===e||n[s].listener===e){a=n[s].listener,i=s;break}if(i<0)return this;i===0?n.shift():function(o,c){for(;c+1<o.length;c++)o[c]=o[c+1];o.pop()}(n,i),n.length===1&&(r[t]=n[0]),r.removeListener!==void 0&&this.emit("removeListener",t,a||e)}return this},xe.prototype.off=xe.prototype.removeListener,xe.prototype.removeAllListeners=function(t){var e,n,r;if((n=this._events)===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var i,s=Object.keys(n);for(r=0;r<s.length;++r)(i=s[r])!=="removeListener"&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(e=n[t])=="function")this.removeListener(t,e);else if(e!==void 0)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},xe.prototype.listeners=function(t){return Jc(this,t,!0)},xe.prototype.rawListeners=function(t){return Jc(this,t,!1)},xe.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Kc.call(t,e)},xe.prototype.listenerCount=Kc,xe.prototype.eventNames=function(){return this._eventsCount>0?Ef(this._events):[]};var Yc=Object.prototype.hasOwnProperty;function Qc(t,e,n){for(n of t.keys())if(pt(n,e))return n}function pt(t,e){var n,r,i;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&pt(t[r],e[r]););return r===-1}if(n===Set){if(t.size!==e.size)return!1;for(r of t)if((i=r)&&typeof i=="object"&&!(i=Qc(e,i))||!e.has(i))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(r of t)if((i=r[0])&&typeof i=="object"&&!(i=Qc(e,i))||!pt(r[1],e.get(i)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((r=t.byteLength)===e.byteLength)for(;r--&&t.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(t)){if((r=t.byteLength)===e.byteLength)for(;r--&&t[r]===e[r];);return r===-1}if(!n||typeof t=="object"){for(n in r=0,t)if(Yc.call(t,n)&&++r&&!Yc.call(e,n)||!(n in e)||!pt(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!=t&&e!=e}const vm={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},Af={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},qe={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},lt={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Sn={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class N{static getFirstMatch(e,n){const r=n.match(e);return r&&r.length>0&&r[1]||""}static getSecondMatch(e,n){const r=n.match(e);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(e,n,r){if(e.test(n))return r}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),n[0]===10)switch(n[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),!(n[0]===1&&n[1]<5))return n[0]===1&&n[1]<6?"Cupcake":n[0]===1&&n[1]>=6?"Donut":n[0]===2&&n[1]<2?"Eclair":n[0]===2&&n[1]===2?"Froyo":n[0]===2&&n[1]>2?"Gingerbread":n[0]===3?"Honeycomb":n[0]===4&&n[1]<1?"Ice Cream Sandwich":n[0]===4&&n[1]<4?"Jelly Bean":n[0]===4&&n[1]>=4?"KitKat":n[0]===5?"Lollipop":n[0]===6?"Marshmallow":n[0]===7?"Nougat":n[0]===8?"Oreo":n[0]===9?"Pie":void 0}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,n,r=!1){const i=N.getVersionPrecision(e),s=N.getVersionPrecision(n);let a=Math.max(i,s),o=0;const c=N.map([e,n],u=>{const d=a-N.getVersionPrecision(u),p=u+new Array(d+1).join(".0");return N.map(p.split("."),v=>new Array(20-v.length).join("0")+v).reverse()});for(r&&(o=a-Math.min(i,s)),a-=1;a>=o;){if(c[0][a]>c[1][a])return 1;if(c[0][a]===c[1][a]){if(a===o)return 0;a-=1}else if(c[0][a]<c[1][a])return-1}}static map(e,n){const r=[];let i;if(Array.prototype.map)return Array.prototype.map.call(e,n);for(i=0;i<e.length;i+=1)r.push(n(e[i]));return r}static find(e,n){let r,i;if(Array.prototype.find)return Array.prototype.find.call(e,n);for(r=0,i=e.length;r<i;r+=1){const s=e[r];if(n(s,r))return s}}static assign(e,...n){const r=e;let i,s;if(Object.assign)return Object.assign(e,...n);for(i=0,s=n.length;i<s;i+=1){const a=n[i];typeof a=="object"&&a!==null&&Object.keys(a).forEach(o=>{r[o]=a[o]})}return e}static getBrowserAlias(e){return vm[e]}static getBrowserTypeByAlias(e){return Af[e]||""}}const Pe=/version\/(\d+(\.?_?\d+)+)/i,bm=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},n=N.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||N.getFirstMatch(Pe,t);return n&&(e.version=n),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},n=N.getFirstMatch(Pe,t)||N.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},n=N.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||N.getFirstMatch(Pe,t);return n&&(e.version=n),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},n=N.getFirstMatch(Pe,t)||N.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},n=N.getFirstMatch(Pe,t)||N.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},n=N.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||N.getFirstMatch(Pe,t);return n&&(e.version=n),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},n=N.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||N.getFirstMatch(Pe,t);return n&&(e.version=n),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},n=N.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||N.getFirstMatch(Pe,t);return n&&(e.version=n),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},n=N.getFirstMatch(Pe,t)||N.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(t){const e={name:"Opera Touch"},n=N.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||N.getFirstMatch(Pe,t);return n&&(e.version=n),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},n=N.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||N.getFirstMatch(Pe,t);return n&&(e.version=n),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},n=N.getFirstMatch(Pe,t)||N.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},n=N.getFirstMatch(Pe,t)||N.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},n=N.getFirstMatch(Pe,t)||N.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},n=N.getFirstMatch(Pe,t)||N.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},n=N.getFirstMatch(Pe,t)||N.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},n=N.getFirstMatch(Pe,t)||N.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},n=N.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||N.getFirstMatch(Pe,t);return n&&(e.version=n),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},n=N.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||N.getFirstMatch(Pe,t);return n&&(e.version=n),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},n=N.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},n=N.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},n=N.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},n=N.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},n=N.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},n=N.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return n&&(e.version=n),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},n=N.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},n=N.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},n=N.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},n=N.getFirstMatch(Pe,t)||N.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},n=N.getFirstMatch(Pe,t)||N.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},n=N.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},n=N.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||N.getFirstMatch(Pe,t);return n&&(e.version=n),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},n=N.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||N.getFirstMatch(Pe,t);return n&&(e.version=n),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},n=N.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},n=N.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MiuiBrowser/i],describe(t){const e={name:"Miui"},n=N.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},n=N.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||N.getFirstMatch(Pe,t);return n&&(e.version=n),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},n=N.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},n=N.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e={name:"Android Browser"},n=N.getFirstMatch(Pe,t);return n&&(e.version=n),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},n=N.getFirstMatch(Pe,t);return n&&(e.version=n),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},n=N.getFirstMatch(Pe,t);return n&&(e.version=n),e}},{test:[/.*/i],describe(t){const e=t.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:N.getFirstMatch(e,t),version:N.getSecondMatch(e,t)}}}];var wm=[{test:[/Roku\/DVP/],describe(t){const e=N.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:lt.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=N.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:lt.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=N.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),n=N.getWindowsVersionName(e);return{name:lt.Windows,version:e,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(t){const e={name:lt.iOS},n=N.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return n&&(e.version=n),e}},{test:[/macintosh/i],describe(t){const e=N.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),n=N.getMacOSVersionName(e),r={name:lt.MacOS,version:e};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=N.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:lt.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e=N.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),n=N.getAndroidVersionName(e),r={name:lt.Android,version:e};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=N.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),n={name:lt.WebOS};return e&&e.length&&(n.version=e),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=N.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||N.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||N.getFirstMatch(/\bbb(\d+)/i,t);return{name:lt.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=N.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:lt.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=N.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:lt.Tizen,version:e}}},{test:[/linux/i],describe:()=>({name:lt.Linux})},{test:[/CrOS/],describe:()=>({name:lt.ChromeOS})},{test:[/PlayStation 4/],describe(t){const e=N.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:lt.PlayStation4,version:e}}}],Sm=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(t){const e=N.getFirstMatch(/(can-l01)/i,t)&&"Nova",n={type:qe.mobile,vendor:"Huawei"};return e&&(n.model=e),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:qe.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:qe.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:()=>({type:qe.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:qe.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:qe.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:qe.tablet})},{test(t){const e=t.test(/ipod|iphone/i),n=t.test(/like (ipod|iphone)/i);return e&&!n},describe(t){const e=N.getFirstMatch(/(ipod|iphone)/i,t);return{type:qe.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:qe.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:qe.mobile})},{test:t=>t.getBrowserName(!0)==="blackberry",describe:()=>({type:qe.mobile,vendor:"BlackBerry"})},{test:t=>t.getBrowserName(!0)==="bada",describe:()=>({type:qe.mobile})},{test:t=>t.getBrowserName()==="windows phone",describe:()=>({type:qe.mobile,vendor:"Microsoft"})},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return t.getOSName(!0)==="android"&&e>=3},describe:()=>({type:qe.tablet})},{test:t=>t.getOSName(!0)==="android",describe:()=>({type:qe.mobile})},{test:t=>t.getOSName(!0)==="macos",describe:()=>({type:qe.desktop,vendor:"Apple"})},{test:t=>t.getOSName(!0)==="windows",describe:()=>({type:qe.desktop})},{test:t=>t.getOSName(!0)==="linux",describe:()=>({type:qe.desktop})},{test:t=>t.getOSName(!0)==="playstation 4",describe:()=>({type:qe.tv})},{test:t=>t.getOSName(!0)==="roku",describe:()=>({type:qe.tv})}],km=[{test:t=>t.getBrowserName(!0)==="microsoft edge",describe(t){if(/\sedg\//i.test(t))return{name:Sn.Blink};const e=N.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:Sn.EdgeHTML,version:e}}},{test:[/trident/i],describe(t){const e={name:Sn.Trident},n=N.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:t=>t.test(/presto/i),describe(t){const e={name:Sn.Presto},n=N.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=t.test(/gecko/i),n=t.test(/like gecko/i);return e&&!n},describe(t){const e={name:Sn.Gecko},n=N.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:Sn.Blink})},{test:[/(apple)?webkit/i],describe(t){const e={name:Sn.WebKit},n=N.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}}];class Zc{constructor(e,n=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},n!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=N.find(bm,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=N.find(wm,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:n}=this.getOS();return e?String(n).toLowerCase()||"":n||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:n}=this.getPlatform();return e?String(n).toLowerCase()||"":n||""}parsePlatform(){this.parsedResult.platform={};const e=N.find(Sm,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=N.find(km,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return N.assign({},this.parsedResult)}satisfies(e){const n={};let r=0;const i={};let s=0;if(Object.keys(e).forEach(a=>{const o=e[a];typeof o=="string"?(i[a]=o,s+=1):typeof o=="object"&&(n[a]=o,r+=1)}),r>0){const a=Object.keys(n),o=N.find(a,u=>this.isOS(u));if(o){const u=this.satisfies(n[o]);if(u!==void 0)return u}const c=N.find(a,u=>this.isPlatform(u));if(c){const u=this.satisfies(n[c]);if(u!==void 0)return u}}if(s>0){const a=Object.keys(i),o=N.find(a,c=>this.isBrowser(c,!0));if(o!==void 0)return this.compareVersion(i[o])}}isBrowser(e,n=!1){const r=this.getBrowserName().toLowerCase();let i=e.toLowerCase();const s=N.getBrowserTypeByAlias(i);return n&&s&&(i=s.toLowerCase()),i===r}compareVersion(e){let n=[0],r=e,i=!1;const s=this.getBrowserVersion();if(typeof s=="string")return e[0]===">"||e[0]==="<"?(r=e.substr(1),e[1]==="="?(i=!0,r=e.substr(2)):n=[],e[0]===">"?n.push(1):n.push(-1)):e[0]==="="?r=e.substr(1):e[0]==="~"&&(i=!0,r=e.substr(1)),n.indexOf(N.compareVersions(s,r,i))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,n=!1){return this.isBrowser(e,n)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(n=>this.is(n))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class Cm{static getParser(e,n=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new Zc(e,n)}static parse(e){return new Zc(e).getResult()}static get BROWSER_MAP(){return Af}static get ENGINE_MAP(){return Sn}static get OS_MAP(){return lt}static get PLATFORMS_MAP(){return qe}}function Ns(){return Date.now()+Math.random().toString()}function Wr(){throw new Error("Method must be implemented in subclass")}function Of(t,e){return e!=null&&e.proxyUrl?e.proxyUrl+(e.proxyUrl.slice(-1)==="/"?"":"/")+t.substring(8):t}function fs(t){return t!=null&&t.callObjectBundleUrlOverride?t.callObjectBundleUrlOverride:Of("https://c.daily.co/call-machine/versioned/".concat("0.73.0","/static/call-machine-object-bundle.js"),t)}function hs(t){try{new URL(t)}catch{return!1}return!0}const xf=Object.prototype.toString;function Po(t){switch(xf.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return fr(t,Error)}}function qr(t,e){return xf.call(t)===`[object ${e}]`}function Lf(t){return qr(t,"ErrorEvent")}function el(t){return qr(t,"DOMError")}function pn(t){return qr(t,"String")}function Io(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function Va(t){return t===null||Io(t)||typeof t!="object"&&typeof t!="function"}function jr(t){return qr(t,"Object")}function js(t){return typeof Event<"u"&&fr(t,Event)}function Bs(t){return!!(t&&t.then&&typeof t.then=="function")}function fr(t,e){try{return t instanceof e}catch{return!1}}function Pf(t){return!(typeof t!="object"||t===null||!t.__isVue&&!t._isVue)}function Rr(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function tl(t,e){if(!Array.isArray(t))return"";const n=[];for(let r=0;r<t.length;r++){const i=t[r];try{Pf(i)?n.push("[VueViewModel]"):n.push(String(i))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function Em(t,e,n=!1){return!!pn(t)&&(qr(e,"RegExp")?e.test(t):!!pn(e)&&(n?t===e:t.includes(e)))}function Di(t,e=[],n=!1){return e.some(r=>Em(t,r,n))}function Tm(t,e,n=250,r,i,s,a){if(!(s.exception&&s.exception.values&&a&&fr(a.originalException,Error)))return;const o=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;var c,u;o&&(s.exception.values=(c=Ga(t,e,i,a.originalException,r,s.exception.values,o,0),u=n,c.map(d=>(d.value&&(d.value=Rr(d.value,u)),d))))}function Ga(t,e,n,r,i,s,a,o){if(s.length>=n+1)return s;let c=[...s];if(fr(r[i],Error)){nl(a,o);const u=t(e,r[i]),d=c.length;rl(u,i,d,o),c=Ga(t,e,n,r[i],i,[u,...c],u,d)}return Array.isArray(r.errors)&&r.errors.forEach((u,d)=>{if(fr(u,Error)){nl(a,o);const p=t(e,u),v=c.length;rl(p,`errors[${d}]`,v,o),c=Ga(t,e,n,u,i,[p,...c],p,v)}}),c}function nl(t,e){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,...t.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}function rl(t,e,n,r){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:r}}function il(t){return t===void 0?void 0:t>=400&&t<500?"warning":t>=500?"error":void 0}const lr="8.33.1",Ae=globalThis;function ps(t,e,n){const r=Ae,i=r.__SENTRY__=r.__SENTRY__||{},s=i[lr]=i[lr]||{};return s[t]||(s[t]=e())}const Do=Ae;function If(t,e={}){if(!t)return"<unknown>";try{let n=t;const r=5,i=[];let s=0,a=0;const o=" > ",c=o.length;let u;const d=Array.isArray(e)?e:e.keyAttrs,p=!Array.isArray(e)&&e.maxStringLength||80;for(;n&&s++<r&&(u=Mm(n,d),!(u==="html"||s>1&&a+i.length*c+u.length>=p));)i.push(u),a+=u.length,n=n.parentNode;return i.reverse().join(o)}catch{return"<unknown>"}}function Mm(t,e){const n=t,r=[];if(!n||!n.tagName)return"";if(Do.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const i=e&&e.length?e.filter(a=>n.getAttribute(a)).map(a=>[a,n.getAttribute(a)]):null;if(i&&i.length)i.forEach(a=>{r.push(`[${a[0]}="${a[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const a=n.className;if(a&&pn(a)){const o=a.split(/\s+/);for(const c of o)r.push(`.${c}`)}}const s=["aria-label","type","name","title","alt"];for(const a of s){const o=n.getAttribute(a);o&&r.push(`[${a}="${o}"]`)}return r.join("")}const wi=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,za=["debug","info","warn","error","log","assert","trace"],gs={};function Ro(t){if(!("console"in Ae))return t();const e=Ae.console,n={},r=Object.keys(gs);r.forEach(i=>{const s=gs[i];n[i]=e[i],e[i]=s});try{return t()}finally{r.forEach(i=>{e[i]=n[i]})}}const fe=ps("logger",function(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return wi?za.forEach(n=>{e[n]=(...r)=>{t&&Ro(()=>{Ae.console[n](`Sentry Logger [${n}]:`,...r)})}}):za.forEach(n=>{e[n]=()=>{}}),e}),Am=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function ms(t,e=!1){const{host:n,path:r,pass:i,port:s,projectId:a,protocol:o,publicKey:c}=t;return`${o}://${c}${e&&i?`:${i}`:""}@${n}${s?`:${s}`:""}/${r&&`${r}/`}${a}`}function sl(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function Om(t){const e=typeof t=="string"?function(n){const r=Am.exec(n);if(!r)return void Ro(()=>{console.error(`Invalid Sentry Dsn: ${n}`)});const[i,s,a="",o="",c="",u=""]=r.slice(1);let d="",p=u;const v=p.split("/");if(v.length>1&&(d=v.slice(0,-1).join("/"),p=v.pop()),p){const w=p.match(/^\d+/);w&&(p=w[0])}return sl({host:o,pass:a,path:d,projectId:p,port:c,protocol:i,publicKey:s})}(t):sl(t);if(e&&function(n){if(!wi)return!0;const{port:r,projectId:i,protocol:s}=n;return!(["protocol","publicKey","host","projectId"].find(a=>!n[a]&&(fe.error(`Invalid Sentry Dsn: ${a} missing`),!0))||(i.match(/^\d+$/)?function(a){return a==="http"||a==="https"}(s)?r&&isNaN(parseInt(r,10))&&(fe.error(`Invalid Sentry Dsn: Invalid port ${r}`),1):(fe.error(`Invalid Sentry Dsn: Invalid protocol ${s}`),1):(fe.error(`Invalid Sentry Dsn: Invalid projectId ${i}`),1)))}(e))return e}class Yt extends Error{constructor(e,n="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}}function Tt(t,e,n){if(!(e in t))return;const r=t[e],i=n(r);typeof i=="function"&&Df(i,r),t[e]=i}function hr(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{wi&&fe.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function Df(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,hr(t,"__sentry_original__",e)}catch{}}function No(t){return t.__sentry_original__}function Rf(t){if(Po(t))return{message:t.message,name:t.name,stack:t.stack,...ol(t)};if(js(t)){const e={type:t.type,target:al(t.target),currentTarget:al(t.currentTarget),...ol(t)};return typeof CustomEvent<"u"&&fr(t,CustomEvent)&&(e.detail=t.detail),e}return t}function al(t){try{return e=t,typeof Element<"u"&&fr(e,Element)?If(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}var e}function ol(t){if(typeof t=="object"&&t!==null){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}return{}}function Bt(t){return Wa(t,new Map)}function Wa(t,e){if(function(n){if(!jr(n))return!1;try{const r=Object.getPrototypeOf(n).constructor.name;return!r||r==="Object"}catch{return!0}}(t)){const n=e.get(t);if(n!==void 0)return n;const r={};e.set(t,r);for(const i of Object.getOwnPropertyNames(t))t[i]!==void 0&&(r[i]=Wa(t[i],e));return r}if(Array.isArray(t)){const n=e.get(t);if(n!==void 0)return n;const r=[];return e.set(t,r),t.forEach(i=>{r.push(Wa(i,e))}),r}return t}const sr="?",cl=/\(error: (.*)\)/,ll=/captureMessage|captureException/;function Ri(t){return t[t.length-1]||{}}const ul="<anonymous>";function jn(t){try{return t&&typeof t=="function"&&t.name||ul}catch{return ul}}function dl(t){const e=t.exception;if(e){const n=[];try{return e.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}const es={},fl={};function ar(t,e){es[t]=es[t]||[],es[t].push(e)}function or(t,e){fl[t]||(e(),fl[t]=!0)}function Ut(t,e){const n=t&&es[t];if(n)for(const r of n)try{r(e)}catch(i){wi&&fe.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${jn(r)}
Error:`,i)}}function xm(){"console"in Ae&&za.forEach(function(t){t in Ae.console&&Tt(Ae.console,t,function(e){return gs[t]=e,function(...n){Ut("console",{args:n,level:t});const r=gs[t];r&&r.apply(Ae.console,n)}})})}const ua=Ae;function Ja(t){return t&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function Lm(){if(typeof EdgeRuntime=="string")return!0;if(!function(){if(!("fetch"in ua))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}())return!1;if(Ja(ua.fetch))return!0;let t=!1;const e=ua.document;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(t=Ja(n.contentWindow.fetch)),e.head.removeChild(n)}catch(n){wi&&fe.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return t}function Si(){return Date.now()/1e3}const Dn=function(){const{performance:t}=Ae;if(!t||!t.now)return Si;const e=Date.now()-t.now(),n=t.timeOrigin==null?e:t.timeOrigin;return()=>(n+t.now())/1e3}();function Pm(t,e){const n="fetch";ar(n,t),or(n,()=>function(r,i=!1){i&&!Lm()||Tt(Ae,"fetch",function(s){return function(...a){const{method:o,url:c}=function(p){if(p.length===0)return{method:"GET",url:""};if(p.length===2){const[w,b]=p;return{url:hl(w),method:Ka(b,"method")?String(b.method).toUpperCase():"GET"}}const v=p[0];return{url:hl(v),method:Ka(v,"method")?String(v.method).toUpperCase():"GET"}}(a),u={args:a,fetchData:{method:o,url:c},startTimestamp:1e3*Dn()};Ut("fetch",{...u});const d=new Error().stack;return s.apply(Ae,a).then(async p=>(Ut("fetch",{...u,endTimestamp:1e3*Dn(),response:p}),p),p=>{throw Ut("fetch",{...u,endTimestamp:1e3*Dn(),error:p}),Po(p)&&p.stack===void 0&&(p.stack=d,hr(p,"framesToPop",1)),p})}})}(void 0,e))}function Ka(t,e){return!!t&&typeof t=="object"&&!!t[e]}function hl(t){return typeof t=="string"?t:t?Ka(t,"url")?t.url:t.toString?t.toString():"":""}(()=>{const{performance:t}=Ae;!t||!t.now||(t.now(),t.timing&&t.timing.navigationStart)})();let Ni=null;function Im(){Ni=Ae.onerror,Ae.onerror=function(t,e,n,r,i){return Ut("error",{column:r,error:i,line:n,msg:t,url:e}),!(!Ni||Ni.__SENTRY_LOADER__)&&Ni.apply(this,arguments)},Ae.onerror.__SENTRY_INSTRUMENTED__=!0}let ji=null;function Dm(){ji=Ae.onunhandledrejection,Ae.onunhandledrejection=function(t){return Ut("unhandledrejection",t),!(ji&&!ji.__SENTRY_LOADER__)||ji.apply(this,arguments)},Ae.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function $t(){const t=Ae,e=t.crypto||t.msCrypto;let n=()=>16*Math.random();try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(n=()=>{const r=new Uint8Array(1);return e.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(15&n())>>r/4).toString(16))}function Nf(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function Tn(t){const{message:e,event_id:n}=t;if(e)return e;const r=Nf(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Xa(t,e,n){const r=t.exception=t.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=e||""),s.type||(s.type="Error")}function mi(t,e){const n=Nf(t);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...e},e&&"data"in e){const i={...r&&r.data,...e.data};n.mechanism.data=i}}function pl(t){if(t&&t.__sentry_captured__)return!0;try{hr(t,"__sentry_captured__",!0)}catch{}return!1}function Mn(t,e=100,n=1/0){try{return Ya("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function jf(t,e=3,n=102400){const r=Mn(t,e);return i=r,function(s){return~-encodeURI(s).split(/%..|./).length}(JSON.stringify(i))>n?jf(t,e-1,n):r;var i}function Ya(t,e,n=1/0,r=1/0,i=function(){const s=typeof WeakSet=="function",a=s?new WeakSet:[];return[function(o){if(s)return!!a.has(o)||(a.add(o),!1);for(let c=0;c<a.length;c++)if(a[c]===o)return!0;return a.push(o),!1},function(o){if(s)a.delete(o);else for(let c=0;c<a.length;c++)if(a[c]===o){a.splice(c,1);break}}]}()){const[s,a]=i;if(e==null||["boolean","string"].includes(typeof e)||typeof e=="number"&&Number.isFinite(e))return e;const o=function(w,b){try{if(w==="domain"&&b&&typeof b=="object"&&b._events)return"[Domain]";if(w==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&b===global)return"[Global]";if(typeof window<"u"&&b===window)return"[Window]";if(typeof document<"u"&&b===document)return"[Document]";if(Pf(b))return"[VueViewModel]";if(jr(S=b)&&"nativeEvent"in S&&"preventDefault"in S&&"stopPropagation"in S)return"[SyntheticEvent]";if(typeof b=="number"&&!Number.isFinite(b))return`[${b}]`;if(typeof b=="function")return`[Function: ${jn(b)}]`;if(typeof b=="symbol")return`[${String(b)}]`;if(typeof b=="bigint")return`[BigInt: ${String(b)}]`;const D=function(O){const $=Object.getPrototypeOf(O);return $?$.constructor.name:"null prototype"}(b);return/^HTML(\w*)Element$/.test(D)?`[HTMLElement: ${D}]`:`[object ${D}]`}catch(D){return`**non-serializable** (${D})`}var S}(t,e);if(!o.startsWith("[object "))return o;if(e.__sentry_skip_normalization__)return e;const c=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:n;if(c===0)return o.replace("object ","");if(s(e))return"[Circular ~]";const u=e;if(u&&typeof u.toJSON=="function")try{return Ya("",u.toJSON(),c-1,r,i)}catch{}const d=Array.isArray(e)?[]:{};let p=0;const v=Rf(e);for(const w in v){if(!Object.prototype.hasOwnProperty.call(v,w))continue;if(p>=r){d[w]="[MaxProperties ~]";break}const b=v[w];d[w]=Ya(w,b,c-1,r,i),p++}return a(e),d}var un;function pr(t){return new xt(e=>{e(t)})}function _s(t){return new xt((e,n)=>{n(t)})}(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(un||(un={}));class xt{constructor(e){xt.prototype.__init.call(this),xt.prototype.__init2.call(this),xt.prototype.__init3.call(this),xt.prototype.__init4.call(this),this._state=un.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(n){this._reject(n)}}then(e,n){return new xt((r,i)=>{this._handlers.push([!1,s=>{if(e)try{r(e(s))}catch(a){i(a)}else r(s)},s=>{if(n)try{r(n(s))}catch(a){i(a)}else i(s)}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new xt((n,r)=>{let i,s;return this.then(a=>{s=!1,i=a,e&&e()},a=>{s=!0,i=a,e&&e()}).then(()=>{s?r(i):n(i)})})}__init(){this._resolve=e=>{this._setResult(un.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(un.REJECTED,e)}}__init3(){this._setResult=(e,n)=>{this._state===un.PENDING&&(Bs(n)?n.then(this._resolve,this._reject):(this._state=e,this._value=n,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===un.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===un.RESOLVED&&n[1](this._value),this._state===un.REJECTED&&n[2](this._value),n[0]=!0)})}}}function Rm(t){const e=[];function n(r){return e.splice(e.indexOf(r),1)[0]||Promise.resolve(void 0)}return{$:e,add:function(r){if(!(t===void 0||e.length<t))return _s(new Yt("Not adding Promise because buffer limit was reached."));const i=r();return e.indexOf(i)===-1&&e.push(i),i.then(()=>n(i)).then(null,()=>n(i).then(null,()=>{})),i},drain:function(r){return new xt((i,s)=>{let a=e.length;if(!a)return i(!0);const o=setTimeout(()=>{r&&r>0&&i(!1)},r);e.forEach(c=>{pr(c).then(()=>{--a||(clearTimeout(o),i(!0))},s)})})}}}function da(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}const Nm=["fatal","error","warning","log","info","debug"];function jm(t){return t==="warn"?"warning":Nm.includes(t)?t:"log"}const Bm=/^sentry-/;function Fm(t){const e=function(r){if(!(!r||!pn(r)&&!Array.isArray(r)))return Array.isArray(r)?r.reduce((i,s)=>{const a=gl(s);return Object.entries(a).forEach(([o,c])=>{i[o]=c}),i},{}):gl(r)}(t);if(!e)return;const n=Object.entries(e).reduce((r,[i,s])=>(i.match(Bm)&&(r[i.slice(7)]=s),r),{});return Object.keys(n).length>0?n:void 0}function gl(t){return t.split(",").map(e=>e.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((e,[n,r])=>(n&&r&&(e[n]=r),e),{})}function _i(t,e=[]){return[t,e]}function Um(t,e){const[n,r]=t;return[n,[...r,e]]}function ml(t,e){const n=t[1];for(const r of n)if(e(r,r[0].type))return!0;return!1}function Qa(t){return Ae.__SENTRY__&&Ae.__SENTRY__.encodePolyfill?Ae.__SENTRY__.encodePolyfill(t):new TextEncoder().encode(t)}function $m(t){const[e,n]=t;let r=JSON.stringify(e);function i(s){typeof r=="string"?r=typeof s=="string"?r+s:[Qa(r),s]:r.push(typeof s=="string"?Qa(s):s)}for(const s of n){const[a,o]=s;if(i(`
${JSON.stringify(a)}
`),typeof o=="string"||o instanceof Uint8Array)i(o);else{let c;try{c=JSON.stringify(o)}catch{c=JSON.stringify(Mn(o))}i(c)}}return typeof r=="string"?r:function(s){const a=s.reduce((u,d)=>u+d.length,0),o=new Uint8Array(a);let c=0;for(const u of s)o.set(u,c),c+=u.length;return o}(r)}function qm(t){const e=typeof t.data=="string"?Qa(t.data):t.data;return[Bt({type:"attachment",length:e.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),e]}const Hm={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function _l(t){return Hm[t]}function Bf(t){if(!t||!t.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function Vm(t,{statusCode:e,headers:n},r=Date.now()){const i={...t},s=n&&n["x-sentry-rate-limits"],a=n&&n["retry-after"];if(s)for(const o of s.trim().split(",")){const[c,u,,,d]=o.split(":",5),p=parseInt(c,10),v=1e3*(isNaN(p)?60:p);if(u)for(const w of u.split(";"))w==="metric_bucket"&&d&&!d.split(";").includes("custom")||(i[w]=r+v);else i.all=r+v}else a?i.all=r+function(o,c=Date.now()){const u=parseInt(`${o}`,10);if(!isNaN(u))return 1e3*u;const d=Date.parse(`${o}`);return isNaN(d)?6e4:d-c}(a,r):e===429&&(i.all=r+6e4);return i}function yl(){return{traceId:$t(),spanId:$t().substring(16)}}const Bi=Ae,je=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function Fs(){return jo(Ae),Ae}function jo(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||lr,e[lr]=e[lr]||{}}function Za(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),t.did||e.did||(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||Dn(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:$t()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}const eo="_sentrySpan";function vl(t,e){e?hr(t,eo,e):delete t[eo]}function bl(t){return t[eo]}class Bo{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=yl()}clone(){const e=new Bo;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,vl(e,bl(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Za(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this._tags={...this._tags,[e]:n},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const n=typeof e=="function"?e(this):e,[r,i]=n instanceof Bn?[n.getScopeData(),n.getRequestSession()]:jr(n)?[e,e.requestSession]:[],{tags:s,extra:a,user:o,contexts:c,level:u,fingerprint:d=[],propagationContext:p}=r||{};return this._tags={...this._tags,...s},this._extra={...this._extra,...a},this._contexts={...this._contexts,...c},o&&Object.keys(o).length&&(this._user=o),u&&(this._level=u),d.length&&(this._fingerprint=d),p&&(this._propagationContext=p),i&&(this._requestSession=i),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,vl(this,void 0),this._attachments=[],this._propagationContext=yl(),this._notifyScopeListeners(),this}addBreadcrumb(e,n){const r=typeof n=="number"?n:100;if(r<=0)return this;const i={timestamp:Si(),...e},s=this._breadcrumbs;return s.push(i),this._breadcrumbs=s.length>r?s.slice(-r):s,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:bl(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,n){const r=n&&n.event_id?n.event_id:$t();if(!this._client)return fe.warn("No client configured on scope - will not capture exception!"),r;const i=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:i,...n,event_id:r},this),r}captureMessage(e,n,r){const i=r&&r.event_id?r.event_id:$t();if(!this._client)return fe.warn("No client configured on scope - will not capture message!"),i;const s=new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:s,...r,event_id:i},this),i}captureEvent(e,n){const r=n&&n.event_id?n.event_id:$t();return this._client?(this._client.captureEvent(e,{...n,event_id:r},this),r):(fe.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}const Bn=Bo;class Gm{constructor(e,n){let r,i;r=e||new Bn,i=n||new Bn,this._stack=[{scope:r}],this._isolationScope=i}withScope(e){const n=this._pushScope();let r;try{r=e(n)}catch(i){throw this._popScope(),i}return Bs(r)?r.then(i=>(this._popScope(),i),i=>{throw this._popScope(),i}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function Br(){const t=jo(Fs());return t.stack=t.stack||new Gm(ps("defaultCurrentScope",()=>new Bn),ps("defaultIsolationScope",()=>new Bn))}function zm(t){return Br().withScope(t)}function Wm(t,e){const n=Br();return n.withScope(()=>(n.getStackTop().scope=t,e(t)))}function wl(t){return Br().withScope(()=>t(Br().getIsolationScope()))}function Fo(t){const e=jo(t);return e.acs?e.acs:{withIsolationScope:wl,withScope:zm,withSetScope:Wm,withSetIsolationScope:(n,r)=>wl(r),getCurrentScope:()=>Br().getScope(),getIsolationScope:()=>Br().getIsolationScope()}}function Uo(){return Fo(Fs()).getCurrentScope()}function Ff(){return Fo(Fs()).getIsolationScope()}function gt(){return Uo().getClient()}function Jm(t){const e=t._sentryMetrics;if(!e)return;const n={};for(const[,[r,i]]of e)(n[r]||(n[r]=[])).push(Bt(i));return n}function Km(t){const{spanId:e,traceId:n}=t.spanContext(),{parent_span_id:r}=ys(t);return Bt({parent_span_id:r,span_id:e,trace_id:n})}function Sl(t){return typeof t=="number"?kl(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?kl(t.getTime()):Dn()}function kl(t){return t>9999999999?t/1e3:t}function ys(t){if(function(e){return typeof e.getSpanJSON=="function"}(t))return t.getSpanJSON();try{const{spanId:e,traceId:n}=t.spanContext();if(function(r){const i=r;return!!(i.attributes&&i.startTime&&i.name&&i.endTime&&i.status)}(t)){const{attributes:r,startTime:i,name:s,endTime:a,parentSpanId:o,status:c}=t;return Bt({span_id:e,trace_id:n,data:r,description:s,parent_span_id:o,start_timestamp:Sl(i),timestamp:Sl(a)||void 0,status:Xm(c),op:r["sentry.op"],origin:r["sentry.origin"],_metrics_summary:Jm(t)})}return{span_id:e,trace_id:n}}catch{return{}}}function Xm(t){if(t&&t.code!==0)return t.code===1?"ok":t.message||"unknown_error"}function Uf(t){return t._sentryRootSpan||t}const $f="production";function qf(t,e){const n=e.getOptions(),{publicKey:r}=e.getDsn()||{},i=Bt({environment:n.environment||$f,release:n.release,public_key:r,trace_id:t});return e.emit("createDsc",i),i}function Ym(t){const e=gt();if(!e)return{};const n=qf(ys(t).trace_id||"",e),r=Uf(t),i=r._frozenDsc;if(i)return i;const s=r.spanContext().traceState,a=s&&s.get("sentry.dsc"),o=a&&Fm(a);if(o)return o;const c=ys(r),u=c.data||{},d=u["sentry.sample_rate"];d!=null&&(n.sample_rate=`${d}`);const p=u["sentry.source"],v=c.description;return p!=="url"&&v&&(n.transaction=v),function(w){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const b=gt(),S=b&&b.getOptions();return!!S&&(S.enableTracing||"tracesSampleRate"in S||"tracesSampler"in S)}()&&(n.sampled=String(function(w){const{traceFlags:b}=w.spanContext();return b===1}(r))),e.emit("createDsc",n,r),n}function Qm(t,e,n,r){const i=Bf(n),s=t.type&&t.type!=="replay_event"?t.type:"event";(function(o,c){c&&(o.sdk=o.sdk||{},o.sdk.name=o.sdk.name||c.name,o.sdk.version=o.sdk.version||c.version,o.sdk.integrations=[...o.sdk.integrations||[],...c.integrations||[]],o.sdk.packages=[...o.sdk.packages||[],...c.packages||[]])})(t,n&&n.sdk);const a=function(o,c,u,d){const p=o.sdkProcessingMetadata&&o.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:o.event_id,sent_at:new Date().toISOString(),...c&&{sdk:c},...!!u&&d&&{dsn:ms(d)},...p&&{trace:Bt({...p})}}}(t,i,r,e);return delete t.sdkProcessingMetadata,_i(a,[[{type:s},t]])}function to(t,e,n,r=0){return new xt((i,s)=>{const a=t[r];if(e===null||typeof a!="function")i(e);else{const o=a({...e},n);je&&a.id&&o===null&&fe.log(`Event processor "${a.id}" dropped event`),Bs(o)?o.then(c=>to(t,c,n,r+1).then(i)).then(null,s):to(t,o,n,r+1).then(i).then(null,s)}})}function Zm(t,e){const{fingerprint:n,span:r,breadcrumbs:i,sdkProcessingMetadata:s}=e;(function(a,o){const{extra:c,tags:u,user:d,contexts:p,level:v,transactionName:w}=o,b=Bt(c);b&&Object.keys(b).length&&(a.extra={...b,...a.extra});const S=Bt(u);S&&Object.keys(S).length&&(a.tags={...S,...a.tags});const D=Bt(d);D&&Object.keys(D).length&&(a.user={...D,...a.user});const O=Bt(p);O&&Object.keys(O).length&&(a.contexts={...O,...a.contexts}),v&&(a.level=v),w&&a.type!=="transaction"&&(a.transaction=w)})(t,e),r&&function(a,o){a.contexts={trace:Km(o),...a.contexts},a.sdkProcessingMetadata={dynamicSamplingContext:Ym(o),...a.sdkProcessingMetadata};const c=Uf(o),u=ys(c).description;u&&!a.transaction&&a.type==="transaction"&&(a.transaction=u)}(t,r),function(a,o){a.fingerprint=a.fingerprint?function(c){return Array.isArray(c)?c:[c]}(a.fingerprint):[],o&&(a.fingerprint=a.fingerprint.concat(o)),a.fingerprint&&!a.fingerprint.length&&delete a.fingerprint}(t,n),function(a,o){const c=[...a.breadcrumbs||[],...o];a.breadcrumbs=c.length?c:void 0}(t,i),function(a,o){a.sdkProcessingMetadata={...a.sdkProcessingMetadata,...o}}(t,s)}function Cl(t,e){const{extra:n,tags:r,user:i,contexts:s,level:a,sdkProcessingMetadata:o,breadcrumbs:c,fingerprint:u,eventProcessors:d,attachments:p,propagationContext:v,transactionName:w,span:b}=e;Jr(t,"extra",n),Jr(t,"tags",r),Jr(t,"user",i),Jr(t,"contexts",s),Jr(t,"sdkProcessingMetadata",o),a&&(t.level=a),w&&(t.transactionName=w),b&&(t.span=b),c.length&&(t.breadcrumbs=[...t.breadcrumbs,...c]),u.length&&(t.fingerprint=[...t.fingerprint,...u]),d.length&&(t.eventProcessors=[...t.eventProcessors,...d]),p.length&&(t.attachments=[...t.attachments,...p]),t.propagationContext={...t.propagationContext,...v}}function Jr(t,e,n){if(n&&Object.keys(n).length){t[e]={...t[e]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[e][r]=n[r])}}function e_(t,e,n,r,i,s){const{normalizeDepth:a=3,normalizeMaxBreadth:o=1e3}=t,c={...e,event_id:e.event_id||n.event_id||$t(),timestamp:e.timestamp||Si()},u=n.integrations||t.integrations.map(b=>b.name);(function(b,S){const{environment:D,release:O,dist:$,maxValueLength:j=250}=S;"environment"in b||(b.environment="environment"in S?D:$f),b.release===void 0&&O!==void 0&&(b.release=O),b.dist===void 0&&$!==void 0&&(b.dist=$),b.message&&(b.message=Rr(b.message,j));const k=b.exception&&b.exception.values&&b.exception.values[0];k&&k.value&&(k.value=Rr(k.value,j));const T=b.request;T&&T.url&&(T.url=Rr(T.url,j))})(c,t),function(b,S){S.length>0&&(b.sdk=b.sdk||{},b.sdk.integrations=[...b.sdk.integrations||[],...S])}(c,u),i&&i.emit("applyFrameMetadata",e),e.type===void 0&&function(b,S){const D=Ae._sentryDebugIds;if(!D)return;let O;const $=El.get(S);$?O=$:(O=new Map,El.set(S,O));const j=Object.entries(D).reduce((k,[T,x])=>{let P;const V=O.get(T);V?P=V:(P=S(T),O.set(T,P));for(let F=P.length-1;F>=0;F--){const H=P[F];if(H.filename){k[H.filename]=x;break}}return k},{});try{b.exception.values.forEach(k=>{k.stacktrace.frames.forEach(T=>{T.filename&&(T.debug_id=j[T.filename])})})}catch{}}(c,t.stackParser);const d=function(b,S){if(!S)return b;const D=b?b.clone():new Bn;return D.update(S),D}(r,n.captureContext);n.mechanism&&mi(c,n.mechanism);const p=i?i.getEventProcessors():[],v=ps("globalScope",()=>new Bn).getScopeData();s&&Cl(v,s.getScopeData()),d&&Cl(v,d.getScopeData());const w=[...n.attachments||[],...v.attachments];return w.length&&(n.attachments=w),Zm(c,v),to([...p,...v.eventProcessors],c,n).then(b=>(b&&function(S){const D={};try{S.exception.values.forEach($=>{$.stacktrace.frames.forEach(j=>{j.debug_id&&(j.abs_path?D[j.abs_path]=j.debug_id:j.filename&&(D[j.filename]=j.debug_id),delete j.debug_id)})})}catch{}if(Object.keys(D).length===0)return;S.debug_meta=S.debug_meta||{},S.debug_meta.images=S.debug_meta.images||[];const O=S.debug_meta.images;Object.entries(D).forEach(([$,j])=>{O.push({type:"sourcemap",code_file:$,debug_id:j})})}(b),typeof a=="number"&&a>0?function(S,D,O){if(!S)return null;const $={...S,...S.breadcrumbs&&{breadcrumbs:S.breadcrumbs.map(j=>({...j,...j.data&&{data:Mn(j.data,D,O)}}))},...S.user&&{user:Mn(S.user,D,O)},...S.contexts&&{contexts:Mn(S.contexts,D,O)},...S.extra&&{extra:Mn(S.extra,D,O)}};return S.contexts&&S.contexts.trace&&$.contexts&&($.contexts.trace=S.contexts.trace,S.contexts.trace.data&&($.contexts.trace.data=Mn(S.contexts.trace.data,D,O))),S.spans&&($.spans=S.spans.map(j=>({...j,...j.data&&{data:Mn(j.data,D,O)}}))),$}(b,a,o):b))}const El=new WeakMap;function Tl(t,e){return Uo().captureEvent(t,e)}function t_(t,e){return n={sentry_key:t.publicKey,sentry_version:"7",...e&&{sentry_client:`${e.name}/${e.version}`}},Object.keys(n).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(n[r])}`).join("&");var n}const Ml=[];function Al(t,e){for(const n of e)n&&n.afterAllSetup&&n.afterAllSetup(t)}function Ol(t,e,n){if(n[e.name])je&&fe.log(`Integration skipped because it was already installed: ${e.name}`);else{if(n[e.name]=e,Ml.indexOf(e.name)===-1&&typeof e.setupOnce=="function"&&(e.setupOnce(),Ml.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(t),typeof e.preprocessEvent=="function"){const r=e.preprocessEvent.bind(e);t.on("preprocessEvent",(i,s)=>r(i,s,t))}if(typeof e.processEvent=="function"){const r=e.processEvent.bind(e),i=Object.assign((s,a)=>r(s,a,t),{id:e.name});t.addEventProcessor(i)}je&&fe.log(`Integration installed: ${e.name}`)}}const xl="Not capturing exception because it's already been captured.";class n_{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=Om(e.dsn):je&&fe.warn("No DSN provided, client will not send events."),this._dsn){const s=(n=this._dsn,r=e.tunnel,i=e._metadata?e._metadata.sdk:void 0,r||`${function(a){return`${function(o){const c=o.protocol?`${o.protocol}:`:"",u=o.port?`:${o.port}`:"";return`${c}//${o.host}${u}${o.path?`/${o.path}`:""}/api/`}(a)}${a.projectId}/envelope/`}(n)}?${t_(n,i)}`);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:s})}var n,r,i}captureException(e,n,r){const i=$t();if(pl(e))return je&&fe.log(xl),i;const s={event_id:i,...n};return this._process(this.eventFromException(e,s).then(a=>this._captureEvent(a,s,r))),s.event_id}captureMessage(e,n,r,i){const s={event_id:$t(),...r},a=Io(e)?e:String(e),o=Va(e)?this.eventFromMessage(a,n,s):this.eventFromException(e,s);return this._process(o.then(c=>this._captureEvent(c,s,i))),s.event_id}captureEvent(e,n,r){const i=$t();if(n&&n.originalException&&pl(n.originalException))return je&&fe.log(xl),i;const s={event_id:i,...n},a=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,s,a||r)),s.event_id}captureSession(e){typeof e.release!="string"?je&&fe.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),Za(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(e).then(r=>n.flush(e).then(i=>r&&i))):pr(!0)}close(e){return this.flush(e).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const n=this._integrations[e.name];Ol(this,e,this._integrations),n||Al(this,[e])}sendEvent(e,n={}){this.emit("beforeSendEvent",e,n);let r=Qm(e,this._dsn,this._options._metadata,this._options.tunnel);for(const s of n.attachments||[])r=Um(r,qm(s));const i=this.sendEnvelope(r);i&&i.then(s=>this.emit("afterSendEvent",e,s),null)}sendSession(e){const n=function(r,i,s,a){const o=Bf(s);return _i({sent_at:new Date().toISOString(),...o&&{sdk:o},...!!a&&i&&{dsn:ms(i)}},["aggregates"in r?[{type:"sessions"},r]:[{type:"session"},r.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(n)}recordDroppedEvent(e,n,r){if(this._options.sendClientReports){const i=typeof r=="number"?r:1,s=`${e}:${n}`;je&&fe.log(`Recording outcome: "${s}"${i>1?` (${i} times)`:""}`),this._outcomes[s]=(this._outcomes[s]||0)+i}}on(e,n){const r=this._hooks[e]=this._hooks[e]||[];return r.push(n),()=>{const i=r.indexOf(n);i>-1&&r.splice(i,1)}}emit(e,...n){const r=this._hooks[e];r&&r.forEach(i=>i(...n))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,n=>(je&&fe.error("Error while sending event:",n),n)):(je&&fe.error("Transport disabled"),pr({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(n,r){const i={};return r.forEach(s=>{s&&Ol(n,s,i)}),i}(this,e),Al(this,e)}_updateSessionFromEvent(e,n){let r=!1,i=!1;const s=n.exception&&n.exception.values;if(s){i=!0;for(const o of s){const c=o.mechanism;if(c&&c.handled===!1){r=!0;break}}}const a=e.status==="ok";(a&&e.errors===0||a&&r)&&(Za(e,{...r&&{status:"crashed"},errors:e.errors||Number(i||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new xt(n=>{let r=0;const i=setInterval(()=>{this._numProcessing==0?(clearInterval(i),n(!0)):(r+=1,e&&r>=e&&(clearInterval(i),n(!1)))},1)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,n,r,i=Ff()){const s=this.getOptions(),a=Object.keys(this._integrations);return!n.integrations&&a.length>0&&(n.integrations=a),this.emit("preprocessEvent",e,n),e.type||i.setLastEventId(e.event_id||n.event_id),e_(s,e,n,r,this,i).then(o=>{if(o===null)return o;const c={...i.getPropagationContext(),...r?r.getPropagationContext():void 0};if(!(o.contexts&&o.contexts.trace)&&c){const{traceId:u,spanId:d,parentSpanId:p,dsc:v}=c;o.contexts={trace:Bt({trace_id:u,span_id:d,parent_span_id:p}),...o.contexts};const w=v||qf(u,this);o.sdkProcessingMetadata={dynamicSamplingContext:w,...o.sdkProcessingMetadata}}return o})}_captureEvent(e,n={},r){return this._processEvent(e,n,r).then(i=>i.event_id,i=>{if(je){const s=i;s.logLevel==="log"?fe.log(s.message):fe.warn(s)}})}_processEvent(e,n,r){const i=this.getOptions(),{sampleRate:s}=i,a=Pl(e),o=Ll(e),c=e.type||"error",u=`before send for type \`${c}\``,d=s===void 0?void 0:function(w){if(typeof w=="boolean")return Number(w);const b=typeof w=="string"?parseFloat(w):w;if(!(typeof b!="number"||isNaN(b)||b<0||b>1))return b;je&&fe.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(w)} of type ${JSON.stringify(typeof w)}.`)}(s);if(o&&typeof d=="number"&&Math.random()>d)return this.recordDroppedEvent("sample_rate","error",e),_s(new Yt(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"));const p=c==="replay_event"?"replay":c,v=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,n,r,v).then(w=>{if(w===null)throw this.recordDroppedEvent("event_processor",p,e),new Yt("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return w;const b=function(S,D,O,$){const{beforeSend:j,beforeSendTransaction:k,beforeSendSpan:T}=D;if(Ll(O)&&j)return j(O,$);if(Pl(O)){if(O.spans&&T){const x=[];for(const P of O.spans){const V=T(P);V?x.push(V):S.recordDroppedEvent("before_send","span")}O.spans=x}if(k){if(O.spans){const x=O.spans.length;O.sdkProcessingMetadata={...O.sdkProcessingMetadata,spanCountBeforeProcessing:x}}return k(O,$)}}return O}(this,i,w,n);return function(S,D){const O=`${D} must return \`null\` or a valid event.`;if(Bs(S))return S.then($=>{if(!jr($)&&$!==null)throw new Yt(O);return $},$=>{throw new Yt(`${D} rejected with ${$}`)});if(!jr(S)&&S!==null)throw new Yt(O);return S}(b,u)}).then(w=>{if(w===null){if(this.recordDroppedEvent("before_send",p,e),a){const D=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",D)}throw new Yt(`${u} returned \`null\`, will not send event.`,"log")}const b=r&&r.getSession();if(!a&&b&&this._updateSessionFromEvent(b,w),a){const D=(w.sdkProcessingMetadata&&w.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(w.spans?w.spans.length:0);D>0&&this.recordDroppedEvent("before_send","span",D)}const S=w.transaction_info;if(a&&S&&w.transaction!==e.transaction){const D="custom";w.transaction_info={...S,source:D}}return this.sendEvent(w,n),w}).then(null,w=>{throw w instanceof Yt?w:(this.captureException(w,{data:{__sentry__:!0},originalException:w}),new Yt(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${w}`))})}_process(e){this._numProcessing++,e.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([n,r])=>{const[i,s]=n.split(":");return{reason:i,category:s,quantity:r}})}_flushOutcomes(){je&&fe.log("Flushing outcomes...");const e=this._clearOutcomes();if(e.length===0)return void(je&&fe.log("No outcomes to send"));if(!this._dsn)return void(je&&fe.log("No dsn provided, will not send outcomes"));je&&fe.log("Sending outcomes:",e);const n=(r=e,_i((i=this._options.tunnel&&ms(this._dsn))?{dsn:i}:{},[[{type:"client_report"},{timestamp:s||Si(),discarded_events:r}]]));var r,i,s;this.sendEnvelope(n)}}function Ll(t){return t.type===void 0}function Pl(t){return t.type==="transaction"}function r_(t,e,n=Rm(t.bufferSize||64)){let r={};return{send:function(i){const s=[];if(ml(i,(c,u)=>{const d=_l(u);if(function(p,v,w=Date.now()){return function(b,S){return b[S]||b.all||0}(p,v)>w}(r,d)){const p=Il(c,u);t.recordDroppedEvent("ratelimit_backoff",d,p)}else s.push(c)}),s.length===0)return pr({});const a=_i(i[0],s),o=c=>{ml(a,(u,d)=>{const p=Il(u,d);t.recordDroppedEvent(c,_l(d),p)})};return n.add(()=>e({body:$m(a)}).then(c=>(c.statusCode!==void 0&&(c.statusCode<200||c.statusCode>=300)&&je&&fe.warn(`Sentry responded with status code ${c.statusCode} to sent event.`),r=Vm(r,c),c),c=>{throw o("network_error"),c})).then(c=>c,c=>{if(c instanceof Yt)return je&&fe.error("Skipped sending event because buffer is full."),o("queue_overflow"),pr({});throw c})},flush:i=>n.drain(i)}}function Il(t,e){if(e==="event"||e==="transaction")return Array.isArray(t)?t[1]:void 0}const i_=100;function Yn(t,e){const n=gt(),r=Ff();if(!n)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:s=i_}=n.getOptions();if(s<=0)return;const a={timestamp:Si(),...t},o=i?Ro(()=>i(a,e)):a;o!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",o,e),r.addBreadcrumb(o,s))}let Dl;const Rl=new WeakMap,s_=()=>({name:"FunctionToString",setupOnce(){Dl=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=No(this),n=Rl.has(gt())&&e!==void 0?e:this;return Dl.apply(n,t)}}catch{}},setup(t){Rl.set(t,!0)}}),a_=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler"],o_=(t={})=>({name:"InboundFilters",processEvent(e,n,r){const i=r.getOptions(),s=function(a={},o={}){return{allowUrls:[...a.allowUrls||[],...o.allowUrls||[]],denyUrls:[...a.denyUrls||[],...o.denyUrls||[]],ignoreErrors:[...a.ignoreErrors||[],...o.ignoreErrors||[],...a.disableErrorDefaults?[]:a_],ignoreTransactions:[...a.ignoreTransactions||[],...o.ignoreTransactions||[]],ignoreInternal:a.ignoreInternal===void 0||a.ignoreInternal}}(t,i);return function(a,o){return o.ignoreInternal&&function(c){try{return c.exception.values[0].type==="SentryError"}catch{}return!1}(a)?(je&&fe.warn(`Event dropped due to being internal Sentry Error.
Event: ${Tn(a)}`),!0):function(c,u){return c.type||!u||!u.length?!1:function(d){const p=[];d.message&&p.push(d.message);let v;try{v=d.exception.values[d.exception.values.length-1]}catch{}return v&&v.value&&(p.push(v.value),v.type&&p.push(`${v.type}: ${v.value}`)),p}(c).some(d=>Di(d,u))}(a,o.ignoreErrors)?(je&&fe.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Tn(a)}`),!0):function(c){return c.type||!c.exception||!c.exception.values||c.exception.values.length===0?!1:!c.message&&!c.exception.values.some(u=>u.stacktrace||u.type&&u.type!=="Error"||u.value)}(a)?(je&&fe.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Tn(a)}`),!0):function(c,u){if(c.type!=="transaction"||!u||!u.length)return!1;const d=c.transaction;return!!d&&Di(d,u)}(a,o.ignoreTransactions)?(je&&fe.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Tn(a)}`),!0):function(c,u){if(!u||!u.length)return!1;const d=Fi(c);return!!d&&Di(d,u)}(a,o.denyUrls)?(je&&fe.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Tn(a)}.
Url: ${Fi(a)}`),!0):function(c,u){if(!u||!u.length)return!0;const d=Fi(c);return!d||Di(d,u)}(a,o.allowUrls)?!1:(je&&fe.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Tn(a)}.
Url: ${Fi(a)}`),!0)}(e,s)?null:e}});function Fi(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch{}return e?function(n=[]){for(let r=n.length-1;r>=0;r--){const i=n[r];if(i&&i.filename!=="<anonymous>"&&i.filename!=="[native code]")return i.filename||null}return null}(e):null}catch{return je&&fe.error(`Cannot extract url for event ${Tn(t)}`),null}}const c_=()=>{let t;return{name:"Dedupe",processEvent(e){if(e.type)return e;try{if(function(n,r){return r?!!(function(i,s){const a=i.message,o=s.message;return!(!a&&!o||a&&!o||!a&&o||a!==o||!jl(i,s)||!Nl(i,s))}(n,r)||function(i,s){const a=Bl(s),o=Bl(i);return!(!a||!o||a.type!==o.type||a.value!==o.value||!jl(i,s)||!Nl(i,s))}(n,r)):!1}(e,t))return je&&fe.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=e}}};function Nl(t,e){let n=dl(t),r=dl(e);if(!n&&!r)return!0;if(n&&!r||!n&&r||r.length!==n.length)return!1;for(let i=0;i<r.length;i++){const s=r[i],a=n[i];if(s.filename!==a.filename||s.lineno!==a.lineno||s.colno!==a.colno||s.function!==a.function)return!1}return!0}function jl(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return n.join("")===r.join("")}catch{return!1}}function Bl(t){return t.exception&&t.exception.values&&t.exception.values[0]}const Xe=Ae;let no=0;function Fl(){return no>0}function Fr(t,e={},n){if(typeof t!="function")return t;try{const i=t.__sentry_wrapped__;if(i)return typeof i=="function"?i:t;if(No(t))return t}catch{return t}const r=function(){const i=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);const s=i.map(a=>Fr(a,e));return t.apply(this,s)}catch(s){throw no++,setTimeout(()=>{no--}),function(...a){const o=Fo(Fs());if(a.length===2){const[c,u]=a;return c?o.withSetScope(c,u):o.withScope(u)}o.withScope(a[0])}(a=>{var o;a.addEventProcessor(c=>(e.mechanism&&(Xa(c,void 0),mi(c,e.mechanism)),c.extra={...c.extra,arguments:i},c)),o=s,Uo().captureException(o,void 0)}),s}};try{for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}catch{}Df(r,t),hr(t,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:()=>t.name})}catch{}return r}const $o=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function qo(t,e){const n=Ho(t,e),r={type:e&&e.name,value:d_(e)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function l_(t,e,n,r){const i=gt(),s=i&&i.getOptions().normalizeDepth,a=function(u){for(const d in u)if(Object.prototype.hasOwnProperty.call(u,d)){const p=u[d];if(p instanceof Error)return p}}(e),o={__serialized__:jf(e,s)};if(a)return{exception:{values:[qo(t,a)]},extra:o};const c={exception:{values:[{type:js(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:f_(e,{isUnhandledRejection:r})}]},extra:o};if(n){const u=Ho(t,n);u.length&&(c.exception.values[0].stacktrace={frames:u})}return c}function fa(t,e){return{exception:{values:[qo(t,e)]}}}function Ho(t,e){const n=e.stacktrace||e.stack||"",r=function(s){return s&&u_.test(s.message)?1:0}(e),i=function(s){return typeof s.framesToPop=="number"?s.framesToPop:0}(e);try{return t(n,r,i)}catch{}return[]}const u_=/Minified React error #\d+;/i;function d_(t){const e=t&&t.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function ro(t,e,n,r,i){let s;if(Lf(e)&&e.error)return fa(t,e.error);if(el(e)||qr(e,"DOMException")){const a=e;if("stack"in e)s=fa(t,e);else{const o=a.name||(el(a)?"DOMError":"DOMException"),c=a.message?`${o}: ${a.message}`:o;s=io(t,c,n,r),Xa(s,c)}return"code"in a&&(s.tags={...s.tags,"DOMException.code":`${a.code}`}),s}return Po(e)?fa(t,e):jr(e)||js(e)?(s=l_(t,e,n,i),mi(s,{synthetic:!0}),s):(s=io(t,e,n,r),Xa(s,`${e}`),mi(s,{synthetic:!0}),s)}function io(t,e,n,r){const i={};if(r&&n){const s=Ho(t,n);s.length&&(i.exception={values:[{value:e,stacktrace:{frames:s}}]})}if(Io(e)){const{__sentry_template_string__:s,__sentry_template_values__:a}=e;return i.logentry={message:s,params:a},i}return i.message=e,i}function f_(t,{isUnhandledRejection:e}){const n=function(i,s=40){const a=Object.keys(Rf(i));a.sort();const o=a[0];if(!o)return"[object has no keys]";if(o.length>=s)return Rr(o,s);for(let c=a.length;c>0;c--){const u=a.slice(0,c).join(", ");if(!(u.length>s))return c===a.length?u:Rr(u,s)}return""}(t),r=e?"promise rejection":"exception";return Lf(t)?`Event \`ErrorEvent\` captured as ${r} with message \`${t.message}\``:js(t)?`Event \`${function(i){try{const s=Object.getPrototypeOf(i);return s?s.constructor.name:void 0}catch{}}(t)}\` (type=${t.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}class h_ extends n_{constructor(e){const n={parentSpanIsAlwaysRootSpan:!0,...e};(function(r,i,s=[i],a="npm"){const o=r._metadata||{};o.sdk||(o.sdk={name:`sentry.javascript.${i}`,packages:s.map(c=>({name:`${a}:@sentry/${c}`,version:lr})),version:lr}),r._metadata=o})(n,"browser",["browser"],Xe.SENTRY_SDK_SOURCE||"npm"),super(n),n.sendClientReports&&Xe.document&&Xe.document.addEventListener("visibilitychange",()=>{Xe.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(e,n){return function(r,i,s,a){const o=ro(r,i,s&&s.syntheticException||void 0,a);return mi(o),o.level="error",s&&s.event_id&&(o.event_id=s.event_id),pr(o)}(this._options.stackParser,e,n,this._options.attachStacktrace)}eventFromMessage(e,n="info",r){return function(i,s,a="info",o,c){const u=io(i,s,o&&o.syntheticException||void 0,c);return u.level=a,o&&o.event_id&&(u.event_id=o.event_id),pr(u)}(this._options.stackParser,e,n,r,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void($o&&fe.warn("SDK not enabled, will not capture user feedback."));const n=function(r,{metadata:i,tunnel:s,dsn:a}){const o={event_id:r.event_id,sent_at:new Date().toISOString(),...i&&i.sdk&&{sdk:{name:i.sdk.name,version:i.sdk.version}},...!!s&&!!a&&{dsn:ms(a)}};return _i(o,[function(u){return[{type:"user_report"},u]}(r)])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(n)}_prepareEvent(e,n,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,n,r)}}const p_=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,it=Ae;let Ul,ha,pa,Ui;function g_(){if(!it.document)return;const t=Ut.bind(null,"dom"),e=$l(t,!0);it.document.addEventListener("click",e,!1),it.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(n=>{const r=it[n]&&it[n].prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&(Tt(r,"addEventListener",function(i){return function(s,a,o){if(s==="click"||s=="keypress")try{const c=this,u=c.__sentry_instrumentation_handlers__=c.__sentry_instrumentation_handlers__||{},d=u[s]=u[s]||{refCount:0};if(!d.handler){const p=$l(t);d.handler=p,i.call(this,s,p,o)}d.refCount++}catch{}return i.call(this,s,a,o)}}),Tt(r,"removeEventListener",function(i){return function(s,a,o){if(s==="click"||s=="keypress")try{const c=this,u=c.__sentry_instrumentation_handlers__||{},d=u[s];d&&(d.refCount--,d.refCount<=0&&(i.call(this,s,d.handler,o),d.handler=void 0,delete u[s]),Object.keys(u).length===0&&delete c.__sentry_instrumentation_handlers__)}catch{}return i.call(this,s,a,o)}}))})}function $l(t,e=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(s){try{return s.target}catch{return null}}(n);if(function(s,a){return s==="keypress"&&(!a||!a.tagName||a.tagName!=="INPUT"&&a.tagName!=="TEXTAREA"&&!a.isContentEditable)}(n.type,r))return;hr(n,"_sentryCaptured",!0),r&&!r._sentryId&&hr(r,"_sentryId",$t());const i=n.type==="keypress"?"input":n.type;(function(s){if(s.type!==ha)return!1;try{if(!s.target||s.target._sentryId!==pa)return!1}catch{}return!0})(n)||(t({event:n,name:i,global:e}),ha=n.type,pa=r?r._sentryId:void 0),clearTimeout(Ul),Ul=it.setTimeout(()=>{pa=void 0,ha=void 0},1e3)}}function m_(){if(!function(){const n=Bi.chrome,r=n&&n.app&&n.app.runtime,i="history"in Bi&&!!Bi.history.pushState&&!!Bi.history.replaceState;return!r&&i}())return;const t=it.onpopstate;function e(n){return function(...r){const i=r.length>2?r[2]:void 0;if(i){const s=Ui,a=String(i);Ui=a,Ut("history",{from:s,to:a})}return n.apply(this,r)}}it.onpopstate=function(...n){const r=it.location.href,i=Ui;if(Ui=r,Ut("history",{from:i,to:r}),t)try{return t.apply(this,n)}catch{}},Tt(it.history,"pushState",e),Tt(it.history,"replaceState",e)}const ts={};function ql(t){ts[t]=void 0}const Zr="__sentry_xhr_v3__";function __(){if(!it.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;t.open=new Proxy(t.open,{apply(e,n,r){const i=1e3*Dn(),s=pn(r[0])?r[0].toUpperCase():void 0,a=function(c){if(pn(c))return c;try{return c.toString()}catch{}}(r[1]);if(!s||!a)return e.apply(n,r);n[Zr]={method:s,url:a,request_headers:{}},s==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const o=()=>{const c=n[Zr];if(c&&n.readyState===4){try{c.status_code=n.status}catch{}Ut("xhr",{endTimestamp:1e3*Dn(),startTimestamp:i,xhr:n})}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply:(c,u,d)=>(o(),c.apply(u,d))}):n.addEventListener("readystatechange",o),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(c,u,d){const[p,v]=d,w=u[Zr];return w&&pn(p)&&pn(v)&&(w.request_headers[p.toLowerCase()]=v),c.apply(u,d)}}),e.apply(n,r)}}),t.send=new Proxy(t.send,{apply(e,n,r){const i=n[Zr];return i?(r[0]!==void 0&&(i.body=r[0]),Ut("xhr",{startTimestamp:1e3*Dn(),xhr:n}),e.apply(n,r)):e.apply(n,r)}})}function y_(t,e=function(n){const r=ts[n];if(r)return r;let i=it[n];if(Ja(i))return ts[n]=i.bind(it);const s=it.document;if(s&&typeof s.createElement=="function")try{const a=s.createElement("iframe");a.hidden=!0,s.head.appendChild(a);const o=a.contentWindow;o&&o[n]&&(i=o[n]),s.head.removeChild(a)}catch(a){p_&&fe.warn(`Could not create sandbox iframe for ${n} check, bailing to window.${n}: `,a)}return i&&(ts[n]=i.bind(it))}("fetch")){let n=0,r=0;return r_(t,function(i){const s=i.body.length;n+=s,r++;const a={body:i.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:n<=6e4&&r<15,...t.fetchOptions};if(!e)return ql("fetch"),_s("No fetch implementation available");try{return e(t.url,a).then(o=>(n-=s,r--,{statusCode:o.status,headers:{"x-sentry-rate-limits":o.headers.get("X-Sentry-Rate-Limits"),"retry-after":o.headers.get("Retry-After")}}))}catch(o){return ql("fetch"),n-=s,r--,_s(o)}})}function ga(t,e,n,r){const i={filename:t,function:e==="<anonymous>"?sr:e,in_app:!0};return n!==void 0&&(i.lineno=n),r!==void 0&&(i.colno=r),i}const v_=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,b_=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,w_=/\((\S*)(?::(\d+))(?::(\d+))\)/,S_=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,k_=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,C_=function(...t){const e=t.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,i=0)=>{const s=[],a=n.split(`
`);for(let o=r;o<a.length;o++){const c=a[o];if(c.length>1024)continue;const u=cl.test(c)?c.replace(cl,"$1"):c;if(!u.match(/\S*Error: /)){for(const d of e){const p=d(u);if(p){s.push(p);break}}if(s.length>=50+i)break}}return function(o){if(!o.length)return[];const c=Array.from(o);return/sentryWrapped/.test(Ri(c).function||"")&&c.pop(),c.reverse(),ll.test(Ri(c).function||"")&&(c.pop(),ll.test(Ri(c).function||"")&&c.pop()),c.slice(0,50).map(u=>({...u,filename:u.filename||Ri(c).filename,function:u.function||sr}))}(s.slice(i))}}([30,t=>{const e=v_.exec(t);if(e){const[,r,i,s]=e;return ga(r,sr,+i,+s)}const n=b_.exec(t);if(n){if(n[2]&&n[2].indexOf("eval")===0){const s=w_.exec(n[2]);s&&(n[2]=s[1],n[3]=s[2],n[4]=s[3])}const[r,i]=Hl(n[1]||sr,n[2]);return ga(i,r,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}}],[50,t=>{const e=S_.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const i=k_.exec(e[3]);i&&(e[1]=e[1]||"eval",e[3]=i[1],e[4]=i[2],e[5]="")}let n=e[3],r=e[1]||sr;return[r,n]=Hl(r,n),ga(n,r,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]),Hl=(t,e)=>{const n=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return n||r?[t.indexOf("@")!==-1?t.split("@")[0]:sr,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},Vl=1024,E_=(t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:"Breadcrumbs",setup(n){var r;e.console&&function(i){const s="console";ar(s,i),or(s,xm)}(function(i){return function(s){if(gt()!==i)return;const a={category:"console",data:{arguments:s.args,logger:"console"},level:jm(s.level),message:tl(s.args," ")};if(s.level==="assert"){if(s.args[0]!==!1)return;a.message=`Assertion failed: ${tl(s.args.slice(1)," ")||"console.assert"}`,a.data.arguments=s.args.slice(1)}Yn(a,{input:s.args,level:s.level})}}(n)),e.dom&&(r=function(i,s){return function(a){if(gt()!==i)return;let o,c,u=typeof s=="object"?s.serializeAttribute:void 0,d=typeof s=="object"&&typeof s.maxStringLength=="number"?s.maxStringLength:void 0;d&&d>Vl&&($o&&fe.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${d} was configured. Sentry will use 1024 instead.`),d=Vl),typeof u=="string"&&(u=[u]);try{const v=a.event,w=function(b){return!!b&&!!b.target}(v)?v.target:v;o=If(w,{keyAttrs:u,maxStringLength:d}),c=function(b){if(!Do.HTMLElement)return null;let S=b;for(let D=0;D<5;D++){if(!S)return null;if(S instanceof HTMLElement){if(S.dataset.sentryComponent)return S.dataset.sentryComponent;if(S.dataset.sentryElement)return S.dataset.sentryElement}S=S.parentNode}return null}(w)}catch{o="<unknown>"}if(o.length===0)return;const p={category:`ui.${a.name}`,message:o};c&&(p.data={"ui.component_name":c}),Yn(p,{event:a.event,name:a.name,global:a.global})}}(n,e.dom),ar("dom",r),or("dom",g_)),e.xhr&&function(i){ar("xhr",i),or("xhr",__)}(function(i){return function(s){if(gt()!==i)return;const{startTimestamp:a,endTimestamp:o}=s,c=s.xhr[Zr];if(!a||!o||!c)return;const{method:u,url:d,status_code:p,body:v}=c,w={method:u,url:d,status_code:p},b={xhr:s.xhr,input:v,startTimestamp:a,endTimestamp:o};Yn({category:"xhr",data:w,type:"http",level:il(p)},b)}}(n)),e.fetch&&Pm(function(i){return function(s){if(gt()!==i)return;const{startTimestamp:a,endTimestamp:o}=s;if(o&&(!s.fetchData.url.match(/sentry_key/)||s.fetchData.method!=="POST"))if(s.error)Yn({category:"fetch",data:s.fetchData,level:"error",type:"http"},{data:s.error,input:s.args,startTimestamp:a,endTimestamp:o});else{const c=s.response,u={...s.fetchData,status_code:c&&c.status},d={input:s.args,response:c,startTimestamp:a,endTimestamp:o};Yn({category:"fetch",data:u,type:"http",level:il(u.status_code)},d)}}}(n)),e.history&&function(i){const s="history";ar(s,i),or(s,m_)}(function(i){return function(s){if(gt()!==i)return;let a=s.from,o=s.to;const c=da(Xe.location.href);let u=a?da(a):void 0;const d=da(o);u&&u.path||(u=c),c.protocol===d.protocol&&c.host===d.host&&(o=d.relative),c.protocol===u.protocol&&c.host===u.host&&(a=u.relative),Yn({category:"navigation",data:{from:a,to:o}})}}(n)),e.sentry&&n.on("beforeSendEvent",function(i){return function(s){gt()===i&&Yn({category:"sentry."+(s.type==="transaction"?"transaction":"event"),event_id:s.event_id,level:s.level,message:Tn(s)},{event:s})}}(n))}}},T_=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],M_=(t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t};return{name:"BrowserApiErrors",setupOnce(){e.setTimeout&&Tt(Xe,"setTimeout",Gl),e.setInterval&&Tt(Xe,"setInterval",Gl),e.requestAnimationFrame&&Tt(Xe,"requestAnimationFrame",A_),e.XMLHttpRequest&&"XMLHttpRequest"in Xe&&Tt(XMLHttpRequest.prototype,"send",O_);const n=e.eventTarget;n&&(Array.isArray(n)?n:T_).forEach(x_)}}};function Gl(t){return function(...e){const n=e[0];return e[0]=Fr(n,{mechanism:{data:{function:jn(t)},handled:!1,type:"instrument"}}),t.apply(this,e)}}function A_(t){return function(e){return t.apply(this,[Fr(e,{mechanism:{data:{function:"requestAnimationFrame",handler:jn(t)},handled:!1,type:"instrument"}})])}}function O_(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(r=>{r in n&&typeof n[r]=="function"&&Tt(n,r,function(i){const s={mechanism:{data:{function:r,handler:jn(i)},handled:!1,type:"instrument"}},a=No(i);return a&&(s.mechanism.data.handler=jn(a)),Fr(i,s)})}),t.apply(this,e)}}function x_(t){const e=Xe,n=e[t]&&e[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(Tt(n,"addEventListener",function(r){return function(i,s,a){try{typeof s.handleEvent=="function"&&(s.handleEvent=Fr(s.handleEvent,{mechanism:{data:{function:"handleEvent",handler:jn(s),target:t},handled:!1,type:"instrument"}}))}catch{}return r.apply(this,[i,Fr(s,{mechanism:{data:{function:"addEventListener",handler:jn(s),target:t},handled:!1,type:"instrument"}}),a])}}),Tt(n,"removeEventListener",function(r){return function(i,s,a){const o=s;try{const c=o&&o.__sentry_wrapped__;c&&r.call(this,i,c,a)}catch{}return r.call(this,i,o,a)}}))}const L_=(t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(n){e.onerror&&(function(r){(function(i){const s="error";ar(s,i),or(s,Im)})(i=>{const{stackParser:s,attachStacktrace:a}=Wl();if(gt()!==r||Fl())return;const{msg:o,url:c,line:u,column:d,error:p}=i,v=function(w,b,S,D){const O=w.exception=w.exception||{},$=O.values=O.values||[],j=$[0]=$[0]||{},k=j.stacktrace=j.stacktrace||{},T=k.frames=k.frames||[],x=isNaN(parseInt(D,10))?void 0:D,P=isNaN(parseInt(S,10))?void 0:S,V=pn(b)&&b.length>0?b:function(){try{return Do.document.location.href}catch{return""}}();return T.length===0&&T.push({colno:x,filename:V,function:sr,in_app:!0,lineno:P}),w}(ro(s,p||o,void 0,a,!1),c,u,d);v.level="error",Tl(v,{originalException:p,mechanism:{handled:!1,type:"onerror"}})})}(n),zl("onerror")),e.onunhandledrejection&&(function(r){(function(i){const s="unhandledrejection";ar(s,i),or(s,Dm)})(i=>{const{stackParser:s,attachStacktrace:a}=Wl();if(gt()!==r||Fl())return;const o=function(u){if(Va(u))return u;try{if("reason"in u)return u.reason;if("detail"in u&&"reason"in u.detail)return u.detail.reason}catch{}return u}(i),c=Va(o)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(o)}`}]}}:ro(s,o,void 0,a,!0);c.level="error",Tl(c,{originalException:o,mechanism:{handled:!1,type:"onunhandledrejection"}})})}(n),zl("onunhandledrejection"))}}};function zl(t){$o&&fe.log(`Global Handler attached: ${t}`)}function Wl(){const t=gt();return t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const P_=()=>({name:"HttpContext",preprocessEvent(t){if(!Xe.navigator&&!Xe.location&&!Xe.document)return;const e=t.request&&t.request.url||Xe.location&&Xe.location.href,{referrer:n}=Xe.document||{},{userAgent:r}=Xe.navigator||{},i={...t.request&&t.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},s={...t.request,...e&&{url:e},headers:i};t.request=s}}),I_=(t={})=>{const e=t.limit||5,n=t.key||"cause";return{name:"LinkedErrors",preprocessEvent(r,i,s){const a=s.getOptions();Tm(qo,a.stackParser,a.maxValueLength,n,e,r,i)}}};var Jl="new",Kl="loading",Xl="loaded",so="joining-meeting",ir="joined-meeting",Qn="left-meeting",wn="error",ma="unknown",D_="full",R_="base",Yl="no-room",N_="end-of-life",j_="connection-error",B_="iframe-ready-for-launch-config",F_="iframe-launch-config",U_="theme-updated",$_="loading",q_="load-attempt-failed",Ql="loaded",H_="started-camera",V_="camera-error",G_="joining-meeting",z_="joined-meeting",W_="left-meeting",J_="participant-joined",K_="participant-updated",X_="participant-left",Y_="participant-counts-updated",Q_="access-state-updated",Z_="meeting-session-summary-updated",ey="meeting-session-state-updated",ty="waiting-participant-added",ny="waiting-participant-updated",ry="waiting-participant-removed",iy="track-started",sy="track-stopped",ay="transcription-started",oy="transcription-stopped",cy="transcription-error",Zl="recording-started",eu="recording-stopped",ly="recording-stats",uy="recording-error",dy="recording-upload-completed",fy="recording-data",hy="app-message",py="transcription-message",gy="remote-media-player-started",my="remote-media-player-updated",_y="remote-media-player-stopped",yy="local-screen-share-started",vy="local-screen-share-stopped",by="local-screen-share-canceled",wy="active-speaker-change",Sy="active-speaker-mode-change",ky="network-quality-change",Cy="network-connection",Ey="cpu-load-change",Ty="face-counts-updated",$i="fullscreen",qi="exited-fullscreen",My="live-streaming-started",Ay="live-streaming-updated",Oy="live-streaming-stopped",xy="live-streaming-error",Ly="lang-updated",Py="receive-settings-updated",Iy="input-settings-updated",tu="nonfatal-error",nu="error",_a=4096,ru=102400,ya="iframe-call-message",iu="local-screen-start",su="daily-method-update-live-streaming-endpoints",Hi="transmit-log",ei="daily-custom-track",ns={NONE:"none",BGBLUR:"background-blur",BGIMAGE:"background-image",FACE_DETECTION:"face-detection"},Hf={NONE:"none",NOISE_CANCELLATION:"noise-cancellation"},ao={PLAY:"play",PAUSE:"pause"},va=["jpg","png","jpeg"],Dy="add-endpoints",Ry="remove-endpoints",au="sip-call-transfer";function Dt(){return!Te()&&typeof window<"u"&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""}function Te(){return typeof navigator<"u"&&navigator.product&&navigator.product==="ReactNative"}function Vf(){return navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia}function Ny(){return!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)&&(function(t,e){if(!t||!e)return!0;switch(t){case"Chrome":return e.major>=75;case"Safari":return RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")&&!(e.major===13&&e.minor===0&&e.point===0);case"Firefox":return e.major>=67}return!0}(gr(),yi())||Te())}function ou(){if(Te()||!document)return!1;var t=document.createElement("iframe");return!!t.requestFullscreen||!!t.webkitRequestFullscreen}var jy=function(){try{var t=document.createElement("canvas"),e=t.getContext("webgl2")!=null;return t.remove(),e}catch{return!1}}();function Gf(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return!Te()&&!!jy&&(t?function(){return lu()?!1:["Chrome","Firefox"].includes(gr())}():function(){if(lu())return!1;var e=gr();if(e==="Safari"){var n=Go();if(n.major<15||n.major===15&&n.minor<4)return!1}return e==="Chrome"?Vo().major>=77:e==="Firefox"?zo().major>=97:["Chrome","Firefox","Safari"].includes(e)}())}function zf(){if(Te()||Wf()||typeof AudioWorkletNode>"u")return!1;switch(gr()){case"Chrome":case"Firefox":return!0;case"Safari":return yi().major>=17&&yi().minor>=4}return!1}function cu(){return Vf()&&!function(){var t,e=gr();if(!Dt())return!0;switch(e){case"Chrome":return(t=Vo()).major&&t.major>0&&t.major<75;case"Firefox":return(t=zo()).major<91;case"Safari":return(t=Go()).major<13||t.major===13&&t.minor<1;default:return!0}}()}function Wf(){return Dt().match(/Linux; Android/)}function lu(){var t,e,n=Dt(),r=n.match(/Mac/)&&(!Te()&&typeof window<"u"&&(t=window)!==null&&t!==void 0&&(e=t.navigator)!==null&&e!==void 0&&e.maxTouchPoints?window.navigator.maxTouchPoints:0)>=5;return!!(n.match(/Mobi/)||n.match(/Android/)||r)||!!Dt().match(/DailyAnd\//)||void 0}function gr(){if(typeof window<"u"){var t=Dt();return Jf()?"Safari":t.indexOf("Edge")>-1?"Edge":t.match(/Chrome\//)?"Chrome":t.indexOf("Safari")>-1||Kf()?"Safari":t.indexOf("Firefox")>-1?"Firefox":t.indexOf("MSIE")>-1||t.indexOf(".NET")>-1?"IE":"Unknown Browser"}}function yi(){switch(gr()){case"Chrome":return Vo();case"Safari":return Go();case"Firefox":return zo();case"Edge":return function(){var t=0,e=0;if(typeof window<"u"){var n=Dt().match(/Edge\/(\d+).(\d+)/);if(n)try{t=parseInt(n[1]),e=parseInt(n[2])}catch{}}return{major:t,minor:e}}()}}function Vo(){var t=0,e=0,n=0,r=0,i=!1;if(typeof window<"u"){var s=Dt(),a=s.match(/Chrome\/(\d+).(\d+).(\d+).(\d+)/);if(a)try{t=parseInt(a[1]),e=parseInt(a[2]),n=parseInt(a[3]),r=parseInt(a[4]),i=s.indexOf("OPR/")>-1}catch{}}return{major:t,minor:e,build:n,patch:r,opera:i}}function Jf(){return!!Dt().match(/iPad|iPhone|iPod/i)&&Vf()}function Kf(){return Dt().indexOf("AppleWebKit/605.1.15")>-1}function Go(){var t=0,e=0,n=0;if(typeof window<"u"){var r=Dt().match(/Version\/(\d+).(\d+)(.(\d+))?/);if(r)try{t=parseInt(r[1]),e=parseInt(r[2]),n=parseInt(r[4])}catch{}else(Jf()||Kf())&&(t=14,e=0,n=3)}return{major:t,minor:e,point:n}}function zo(){var t=0,e=0;if(typeof window<"u"){var n=Dt().match(/Firefox\/(\d+).(\d+)/);if(n)try{t=parseInt(n[1]),e=parseInt(n[2])}catch{}}return{major:t,minor:e}}var Xf=function(){function t(){Vt(this,t)}return Gt(t,[{key:"addListenerForMessagesFromCallMachine",value:function(e,n,r){Wr()}},{key:"addListenerForMessagesFromDailyJs",value:function(e,n,r){Wr()}},{key:"sendMessageToCallMachine",value:function(e,n,r,i){Wr()}},{key:"sendMessageToDailyJs",value:function(e,n){Wr()}},{key:"removeListener",value:function(e){Wr()}}]),t}();function uu(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ba(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uu(Object(n),!0).forEach(function(r){dn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uu(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function By(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Ht(t);if(e){var i=Ht(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Rs(this,n)}}var Fy=function(){Ds(e,Xf);var t=By(e);function e(){var n;return Vt(this,e),(n=t.call(this))._wrappedListeners={},n._messageCallbacks={},n}return Gt(e,[{key:"addListenerForMessagesFromCallMachine",value:function(n,r,i){var s=this,a=function(o){if(o.data&&o.data.what==="iframe-call-message"&&(!o.data.callClientId||o.data.callClientId===r)&&(!o.data.from||o.data.from!=="module")){var c=ba({},o.data);if(delete c.from,c.callbackStamp&&s._messageCallbacks[c.callbackStamp]){var u=c.callbackStamp;s._messageCallbacks[u].call(i,c),delete s._messageCallbacks[u]}delete c.what,delete c.callbackStamp,n.call(i,c)}};this._wrappedListeners[n]=a,window.addEventListener("message",a)}},{key:"addListenerForMessagesFromDailyJs",value:function(n,r,i){var s=function(a){var o;if(!(!a.data||a.data.what!==ya||!a.data.action||a.data.from&&a.data.from!=="module"||a.data.callClientId&&r&&a.data.callClientId!==r||a!=null&&(o=a.data)!==null&&o!==void 0&&o.callFrameId)){var c=a.data;n.call(i,c)}};this._wrappedListeners[n]=s,window.addEventListener("message",s)}},{key:"sendMessageToCallMachine",value:function(n,r,i,s){if(!i)throw new Error("undefined callClientId. Are you trying to use a DailyCall instance previously destroyed?");var a=ba({},n);if(a.what=ya,a.from="module",a.callClientId=i,r){var o=Ns();this._messageCallbacks[o]=r,a.callbackStamp=o}var c=s?s.contentWindow:window,u=this._callMachineTargetOrigin(s);u&&c.postMessage(a,u)}},{key:"sendMessageToDailyJs",value:function(n,r){n.what=ya,n.callClientId=r,n.from="embedded",window.postMessage(n,this._targetOriginFromWindowLocation())}},{key:"removeListener",value:function(n){var r=this._wrappedListeners[n];r&&(window.removeEventListener("message",r),delete this._wrappedListeners[n])}},{key:"forwardPackagedMessageToCallMachine",value:function(n,r,i){var s=ba({},n);s.callClientId=i;var a=r?r.contentWindow:window,o=this._callMachineTargetOrigin(r);o&&a.postMessage(s,o)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(n,r){var i=function(s){if(s.data&&s.data.what==="iframe-call-message"&&(!s.data.callClientId||s.data.callClientId===r)&&(!s.data.from||s.data.from!=="module")){var a=s.data;n(a)}};return this._wrappedListeners[n]=i,window.addEventListener("message",i),n}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(n){var r=this._wrappedListeners[n];r&&(window.removeEventListener("message",r),delete this._wrappedListeners[n])}},{key:"_callMachineTargetOrigin",value:function(n){return n?n.src?new URL(n.src).origin:void 0:this._targetOriginFromWindowLocation()}},{key:"_targetOriginFromWindowLocation",value:function(){return window.location.protocol==="file:"?"*":window.location.origin}}]),e}();function du(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Uy(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Ht(t);if(e){var i=Ht(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Rs(this,n)}}var $y=function(){Ds(e,Xf);var t=Uy(e);function e(){var n;return Vt(this,e),n=t.call(this),global.callMachineToDailyJsEmitter=global.callMachineToDailyJsEmitter||new hn.EventEmitter,global.dailyJsToCallMachineEmitter=global.dailyJsToCallMachineEmitter||new hn.EventEmitter,n._wrappedListeners={},n._messageCallbacks={},n}return Gt(e,[{key:"addListenerForMessagesFromCallMachine",value:function(n,r,i){this._addListener(n,global.callMachineToDailyJsEmitter,r,i,"received call machine message")}},{key:"addListenerForMessagesFromDailyJs",value:function(n,r,i){this._addListener(n,global.dailyJsToCallMachineEmitter,r,i,"received daily-js message")}},{key:"sendMessageToCallMachine",value:function(n,r,i){this._sendMessage(n,global.dailyJsToCallMachineEmitter,i,r,"sending message to call machine")}},{key:"sendMessageToDailyJs",value:function(n,r){this._sendMessage(n,global.callMachineToDailyJsEmitter,r,null,"sending message to daily-js")}},{key:"removeListener",value:function(n){var r=this._wrappedListeners[n];r&&(global.callMachineToDailyJsEmitter.removeListener("message",r),global.dailyJsToCallMachineEmitter.removeListener("message",r),delete this._wrappedListeners[n])}},{key:"_addListener",value:function(n,r,i,s,a){var o=this,c=function(u){if(u.callClientId===i){if(u.callbackStamp&&o._messageCallbacks[u.callbackStamp]){var d=u.callbackStamp;o._messageCallbacks[d].call(s,u),delete o._messageCallbacks[d]}n.call(s,u)}};this._wrappedListeners[n]=c,r.addListener("message",c)}},{key:"_sendMessage",value:function(n,r,i,s,a){var o=function(u){for(var d=1;d<arguments.length;d++){var p=arguments[d]!=null?arguments[d]:{};d%2?du(Object(p),!0).forEach(function(v){dn(u,v,p[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(p)):du(Object(p)).forEach(function(v){Object.defineProperty(u,v,Object.getOwnPropertyDescriptor(p,v))})}return u}({},n);if(o.callClientId=i,s){var c=Ns();this._messageCallbacks[c]=s,o.callbackStamp=c}r.emit("message",o)}}]),e}(),oo="replace",co="shallow-merge",fu=[oo,co],qy=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.data,r=e.mergeStrategy,i=r===void 0?oo:r;Vt(this,t),t._validateMergeStrategy(i),t._validateData(n,i),this.mergeStrategy=i,this.data=n}return Gt(t,[{key:"isNoOp",value:function(){return t.isNoOpUpdate(this.data,this.mergeStrategy)}}],[{key:"isNoOpUpdate",value:function(e,n){return Object.keys(e).length===0&&n===co}},{key:"_validateMergeStrategy",value:function(e){if(!fu.includes(e))throw Error("Unrecognized mergeStrategy provided. Options are: [".concat(fu,"]"))}},{key:"_validateData",value:function(e,n){if(!function(o){if(o==null||Le(o)!=="object")return!1;var c=Object.getPrototypeOf(o);return c==null||c===Object.prototype}(e))throw Error("Meeting session data must be a plain (map-like) object");var r;try{if(r=JSON.stringify(e),n===oo){var i=JSON.parse(r);pt(i,e)||console.warn("The meeting session data provided will be modified when serialized.",i,e)}else if(n===co){for(var s in e)if(Object.hasOwnProperty.call(e,s)&&e[s]!==void 0){var a=JSON.parse(JSON.stringify(e[s]));pt(e[s],a)||console.warn("At least one key in the meeting session data provided will be modified when serialized.",a,e[s])}}}catch(o){throw Error("Meeting session data must be serializable to JSON: ".concat(o))}if(r.length>ru)throw Error("Meeting session data is too large (".concat(r.length," characters). Maximum size suppported is ").concat(ru,"."))}}]),t}();function lo(t,e,n){return lo=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct.bind():function(r,i,s){var a=[null];a.push.apply(a,i);var o=new(Function.bind.apply(r,a));return s&&gi(o,s.prototype),o},lo.apply(null,arguments)}function uo(t){var e=typeof Map=="function"?new Map:void 0;return uo=function(n){if(n===null||(r=n,Function.toString.call(r).indexOf("[native code]")===-1))return n;var r;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return lo(n,arguments,Ht(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),gi(i,n)},uo(t)}function Hy(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Ht(t);if(e){var i=Ht(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Rs(this,n)}}function hu(t){var e,n=(e=window._daily)===null||e===void 0?void 0:e.pendings;if(n){var r=n.indexOf(t);r!==-1&&n.splice(r,1)}}var Vy=function(){function t(e){Vt(this,t),this._currentLoad=null,this._callClientId=e}return Gt(t,[{key:"load",value:function(){var e,n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0;if(this.loaded)return window._daily.instances[this._callClientId].callMachine.reset(),void i(!0);e=this._callClientId,window._daily.pendings.push(e),this._currentLoad&&this._currentLoad.cancel(),this._currentLoad=new Gy(r,function(){i(!1)},function(a,o){o||hu(n._callClientId),s(a,o)}),this._currentLoad.start()}},{key:"cancel",value:function(){this._currentLoad&&this._currentLoad.cancel(),hu(this._callClientId)}},{key:"loaded",get:function(){return this._currentLoad&&this._currentLoad.succeeded}}]),t}(),Gy=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;Vt(this,t),this._attemptsRemaining=3,this._currentAttempt=null,this._dailyConfig=e,this._successCallback=n,this._failureCallback=r}return Gt(t,[{key:"start",value:function(){var e=this;this._currentAttempt||(this._currentAttempt=new pu(this._dailyConfig,this._successCallback,function n(r){e._currentAttempt.cancelled||(e._attemptsRemaining--,e._failureCallback(r,e._attemptsRemaining>0),e._attemptsRemaining<=0||setTimeout(function(){e._currentAttempt.cancelled||(e._currentAttempt=new pu(e._dailyConfig,e._successCallback,n),e._currentAttempt.start())},3e3))}),this._currentAttempt.start())}},{key:"cancel",value:function(){this._currentAttempt&&this._currentAttempt.cancel()}},{key:"cancelled",get:function(){return this._currentAttempt&&this._currentAttempt.cancelled}},{key:"succeeded",get:function(){return this._currentAttempt&&this._currentAttempt.succeeded}}]),t}(),wa=function(){Ds(e,uo(Error));var t=Hy(e);function e(){return Vt(this,e),t.apply(this,arguments)}return Gt(e)}(),vs=2e4,pu=function(){function t(n,r,i){Vt(this,t),this._loadAttemptImpl=Te()||!n.avoidEval?new zy(n,r,i):new Wy(n,r,i)}var e;return Gt(t,[{key:"start",value:(e=se(function*(){return this._loadAttemptImpl.start()}),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(){this._loadAttemptImpl.cancel()}},{key:"cancelled",get:function(){return this._loadAttemptImpl.cancelled}},{key:"succeeded",get:function(){return this._loadAttemptImpl.succeeded}}]),t}(),zy=function(){function t(s,a,o){Vt(this,t),this.cancelled=!1,this.succeeded=!1,this._networkTimedOut=!1,this._networkTimeout=null,this._iosCache=typeof iOSCallObjectBundleCache<"u"&&iOSCallObjectBundleCache,this._refetchHeaders=null,this._dailyConfig=s,this._successCallback=a,this._failureCallback=o}var e,n,r,i;return Gt(t,[{key:"start",value:(i=se(function*(){var s=fs(this._dailyConfig);!(yield this._tryLoadFromIOSCache(s))&&this._loadFromNetwork(s)}),function(){return i.apply(this,arguments)})},{key:"cancel",value:function(){clearTimeout(this._networkTimeout),this.cancelled=!0}},{key:"_tryLoadFromIOSCache",value:(r=se(function*(s){if(!this._iosCache)return!1;try{var a=yield this._iosCache.get(s);return!!this.cancelled||!!a&&(a.code?(Function('"use strict";'+a.code)(),this.succeeded=!0,this._successCallback(),!0):(this._refetchHeaders=a.refetchHeaders,!1))}catch{return!1}}),function(s){return r.apply(this,arguments)})},{key:"_loadFromNetwork",value:(n=se(function*(s){var a=this;this._networkTimeout=setTimeout(function(){a._networkTimedOut=!0,a._failureCallback({msg:"Timed out (>".concat(vs," ms) when loading call object bundle ").concat(s),type:"timeout"})},vs);try{var o=this._refetchHeaders?{headers:this._refetchHeaders}:{},c=yield fetch(s,o);if(clearTimeout(this._networkTimeout),this.cancelled||this._networkTimedOut)throw new wa;var u=yield this._getBundleCodeFromResponse(s,c);if(this.cancelled)throw new wa;Function('"use strict";'+u)(),this._iosCache&&this._iosCache.set(s,u,c.headers),this.succeeded=!0,this._successCallback()}catch(d){if(clearTimeout(this._networkTimeout),d instanceof wa||this.cancelled||this._networkTimedOut)return;this._failureCallback({msg:"Failed to load call object bundle ".concat(s,": ").concat(d),type:d.message})}}),function(s){return n.apply(this,arguments)})},{key:"_getBundleCodeFromResponse",value:(e=se(function*(s,a){if(a.ok)return yield a.text();if(this._iosCache&&a.status===304)return(yield this._iosCache.renew(s,a.headers)).code;throw new Error("Received ".concat(a.status," response"))}),function(s,a){return e.apply(this,arguments)})}]),t}(),Wy=function(){function t(e,n,r){Vt(this,t),this.cancelled=!1,this.succeeded=!1,this._dailyConfig=e,this._successCallback=n,this._failureCallback=r,this._attemptId=Ns(),this._networkTimeout=null,this._scriptElement=null}return Gt(t,[{key:"start",value:function(){window._dailyCallMachineLoadWaitlist||(window._dailyCallMachineLoadWaitlist=new Set);var e=fs(this._dailyConfig);(typeof document>"u"?"undefined":Le(document))==="object"?this._startLoading(e):this._failureCallback({msg:"Call object bundle must be loaded in a DOM/web context",type:"missing context"})}},{key:"cancel",value:function(){this._stopLoading(),this.cancelled=!0}},{key:"_startLoading",value:function(e){var n=this;this._signUpForCallMachineLoadWaitlist(),this._networkTimeout=setTimeout(function(){n._stopLoading(),n._failureCallback({msg:"Timed out (>".concat(vs," ms) when loading call object bundle ").concat(e),type:"timeout"})},vs);var r=document.getElementsByTagName("head")[0],i=document.createElement("script");this._scriptElement=i,i.onload=function(){n._stopLoading(),n.succeeded=!0,n._successCallback()},i.onerror=function(s){n._stopLoading(),n._failureCallback({msg:"Failed to load call object bundle ".concat(s.target.src),type:s.message})},i.src=e,r.appendChild(i)}},{key:"_stopLoading",value:function(){this._withdrawFromCallMachineLoadWaitlist(),clearTimeout(this._networkTimeout),this._scriptElement&&(this._scriptElement.onload=null,this._scriptElement.onerror=null)}},{key:"_signUpForCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.add(this._attemptId)}},{key:"_withdrawFromCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.delete(this._attemptId)}}]),t}(),Vi=function(t,e,n){return Ky(t.local,e,n)===!0},Jy=function(t,e,n){return t.local.streams&&t.local.streams[e]&&t.local.streams[e].stream&&t.local.streams[e].stream["get".concat(n==="video"?"Video":"Audio","Tracks")]()[0]},Ar=function(t,e,n,r){var i=Xy(t,e,n,r);return i&&i.pendingTrack},Ky=function(t,e,n){if(!t)return!1;var r=function(s){switch(s){case"avatar":return!0;case"staged":return s;default:return!!s}},i=t.public.subscribedTracks;return i&&i[e]?["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo"].indexOf(n)===-1&&i[e].custom?[!0,"staged"].includes(i[e].custom)?r(i[e].custom):r(i[e].custom[n]):r(i[e][n]):!i||r(i.ALL)},Xy=function(t,e,n,r){var i=Object.values(t.streams||{}).filter(function(s){return s.participantId===e&&s.type===n&&s.pendingTrack&&s.pendingTrack.kind===r}).sort(function(s,a){return new Date(a.starttime)-new Date(s.starttime)});return i&&i[0]},Yy=function(t,e){var n=t.local.public.customTracks;if(n&&n[e])return n[e].track};function gu(t,e){for(var n=e.getState(),r=0,i=["cam","screen"];r<i.length;r++)for(var s=i[r],a=0,o=["video","audio"];a<o.length;a++){var c=o[a],u=s==="cam"?c:"screen".concat(c.charAt(0).toUpperCase()+c.slice(1)),d=t.tracks[u];if(d){var p=t.local?Jy(n,s,c):Ar(n,t.session_id,s,c);d.state==="playable"&&(d.track=p),d.persistentTrack=p}}}function mu(t,e){try{var n=e.getState();for(var r in t.tracks)if(!Qy(r)){var i=t.tracks[r].kind;if(i){var s=t.tracks[r];if(s){var a=t.local?Yy(n,r):Ar(n,t.session_id,r,i);s.state==="playable"&&(t.tracks[r].track=a),s.persistentTrack=a}}else console.error("unknown type for custom track")}}catch(o){console.error(o)}}function Qy(t){return["video","audio","screenVideo","screenAudio"].includes(t)}function _u(t,e,n){var r=n.getState();if(t.local){if(t.audio)try{t.audioTrack=r.local.streams.cam.stream.getAudioTracks()[0],t.audioTrack||(t.audio=!1)}catch{}if(t.video)try{t.videoTrack=r.local.streams.cam.stream.getVideoTracks()[0],t.videoTrack||(t.video=!1)}catch{}if(t.screen)try{t.screenVideoTrack=r.local.streams.screen.stream.getVideoTracks()[0],t.screenAudioTrack=r.local.streams.screen.stream.getAudioTracks()[0],t.screenVideoTrack||t.screenAudioTrack||(t.screen=!1)}catch{}}else{var i=!0;try{var s=r.participants[t.session_id];s&&s.public&&s.public.rtcType&&s.public.rtcType.impl==="peer-to-peer"&&s.private&&!["connected","completed"].includes(s.private.peeringState)&&(i=!1)}catch(d){console.error(d)}if(!i)return t.audio=!1,t.audioTrack=!1,t.video=!1,t.videoTrack=!1,t.screen=!1,void(t.screenTrack=!1);try{if(r.streams,t.audio&&Vi(r,t.session_id,"cam-audio")){var a=Ar(r,t.session_id,"cam","audio");a&&(e&&e.audioTrack&&e.audioTrack.id===a.id?t.audioTrack=a:a.muted||(t.audioTrack=a)),t.audioTrack||(t.audio=!1)}if(t.video&&Vi(r,t.session_id,"cam-video")){var o=Ar(r,t.session_id,"cam","video");o&&(e&&e.videoTrack&&e.videoTrack.id===o.id?t.videoTrack=o:o.muted||(t.videoTrack=o)),t.videoTrack||(t.video=!1)}if(t.screen&&Vi(r,t.session_id,"screen-audio")){var c=Ar(r,t.session_id,"screen","audio");c&&(e&&e.screenAudioTrack&&e.screenAudioTrack.id===c.id?t.screenAudioTrack=c:c.muted||(t.screenAudioTrack=c))}if(t.screen&&Vi(r,t.session_id,"screen-video")){var u=Ar(r,t.session_id,"screen","video");u&&(e&&e.screenVideoTrack&&e.screenVideoTrack.id===u.id?t.screenVideoTrack=u:u.muted||(t.screenVideoTrack=u))}t.screenVideoTrack||t.screenAudioTrack||(t.screen=!1)}catch(d){console.error("unexpected error matching up tracks",d)}}}function Zy(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(c,u){if(c){if(typeof c=="string")return yu(c,u);var d=Object.prototype.toString.call(c).slice(8,-1);if(d==="Object"&&c.constructor&&(d=c.constructor.name),d==="Map"||d==="Set")return Array.from(c);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return yu(c,u)}}(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,a=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var c=n.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{a||n.return==null||n.return()}finally{if(o)throw s}}}}function yu(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Qt=new Map,Nr=null;function ev(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(c,u){if(c){if(typeof c=="string")return vu(c,u);var d=Object.prototype.toString.call(c).slice(8,-1);if(d==="Object"&&c.constructor&&(d=c.constructor.name),d==="Map"||d==="Set")return Array.from(c);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return vu(c,u)}}(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,a=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var c=n.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{a||n.return==null||n.return()}finally{if(o)throw s}}}}function vu(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Zt=new Map,oi=null;function tv(t){Yf()?function(e){Qt.has(e)||(Qt.set(e,{}),navigator.mediaDevices.enumerateDevices().then(function(n){Qt.has(e)&&(Qt.get(e).lastDevicesString=JSON.stringify(n),Nr||(Nr=function(){var r=se(function*(){var i,s=yield navigator.mediaDevices.enumerateDevices(),a=Zy(Qt.keys());try{for(a.s();!(i=a.n()).done;){var o=i.value,c=JSON.stringify(s);c!==Qt.get(o).lastDevicesString&&(Qt.get(o).lastDevicesString=c,o(s))}}catch(u){a.e(u)}finally{a.f()}});return function(){return r.apply(this,arguments)}}(),navigator.mediaDevices.addEventListener("devicechange",Nr)))}).catch(function(){}))}(t):function(e){Zt.has(e)||(Zt.set(e,{}),navigator.mediaDevices.enumerateDevices().then(function(n){Zt.has(e)&&(Zt.get(e).lastDevicesString=JSON.stringify(n),oi||(oi=setInterval(se(function*(){var r,i=yield navigator.mediaDevices.enumerateDevices(),s=ev(Zt.keys());try{for(s.s();!(r=s.n()).done;){var a=r.value,o=JSON.stringify(i);o!==Zt.get(a).lastDevicesString&&(Zt.get(a).lastDevicesString=o,a(i))}}catch(c){s.e(c)}finally{s.f()}}),3e3)))}))}(t)}function nv(t){Yf()?function(e){Qt.has(e)&&(Qt.delete(e),Qt.size===0&&Nr&&(navigator.mediaDevices.removeEventListener("devicechange",Nr),Nr=null))}(t):function(e){Zt.has(e)&&(Zt.delete(e),Zt.size===0&&oi&&(clearInterval(oi),oi=null))}(t)}function Yf(){return Te()||navigator.mediaDevices.ondevicechange!==void 0}var rv=new Set;function iv(t,e){return t&&t.readyState==="live"&&!function(n,r){return n.muted&&!rv.has(n.id)}(t)}var sv=["result"],av=["preserveIframe"];function bu(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function le(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bu(Object(n),!0).forEach(function(r){dn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bu(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ov(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Ht(t);if(e){var i=Ht(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Rs(this,n)}}function wu(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(c,u){if(c){if(typeof c=="string")return Su(c,u);var d=Object.prototype.toString.call(c).slice(8,-1);if(d==="Object"&&c.constructor&&(d=c.constructor.name),d==="Map"||d==="Set")return Array.from(c);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return Su(c,u)}}(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,a=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var c=n.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{a||n.return==null||n.return()}finally{if(o)throw s}}}}function Su(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Zn={},ku="video",cv="voice",Cu=Te()?{data:{}}:{data:{},topology:"none"},Eu={present:0,hidden:0},Qf={maxBitrate:{min:1e5,max:25e5},maxFramerate:{min:1,max:30},scaleResolutionDownBy:{min:1,max:8}},Sa=Object.keys(Qf),Tu=["state","volume","simulcastEncodings"],Mu={androidInCallNotification:{title:"string",subtitle:"string",iconName:"string",disableForCustomOverride:"boolean"},disableAutoDeviceManagement:{audio:"boolean",video:"boolean"}},bs={id:{iconPath:"string",iconPathDarkMode:"string",label:"string",tooltip:"string",visualState:"'default' | 'sidebar-open' | 'active'"}},fo={id:{allow:"string",controlledBy:"'*' | 'owners' | string[]",csp:"string",iconURL:"string",label:"string",loading:"'eager' | 'lazy'",location:"'main' | 'sidebar'",name:"string",referrerPolicy:"string",sandbox:"string",src:"string",srcdoc:"string",shared:"string[] | 'owners' | boolean"}},er={customIntegrations:{validate:ah,help:ih()},customTrayButtons:{validate:sh,help:"customTrayButtons should be a dictionary of the type ".concat(JSON.stringify(bs))},url:{validate:function(t){return typeof t=="string"},help:"url should be a string"},baseUrl:{validate:function(t){return typeof t=="string"},help:"baseUrl should be a string"},token:{validate:function(t){return typeof t=="string"},help:"token should be a string",queryString:"t"},dailyConfig:{validate:function(t,e){try{return e.validateDailyConfig(t),!0}catch(n){console.error("Failed to validate dailyConfig",n)}return!1},help:"Unsupported dailyConfig. Check error logs for detailed info."},reactNativeConfig:{validate:function(t){return oh(t,Mu)},help:"reactNativeConfig should look like ".concat(JSON.stringify(Mu),", all fields optional")},lang:{validate:function(t){return["da","de","en-us","en","es","fi","fr","it","jp","ka","nl","no","pl","pt","pt-BR","ru","sv","tr","user"].includes(t)},help:"language not supported. Options are: da, de, en-us, en, es, fi, fr, it, jp, ka, nl, no, pl, pt, pt-BR, ru, sv, tr, user"},userName:!0,userData:{validate:function(t){try{return Zf(t),!0}catch(e){return console.error(e),!1}},help:"invalid userData type provided"},startVideoOff:!0,startAudioOff:!0,activeSpeakerMode:!0,showLeaveButton:!0,showLocalVideo:!0,showParticipantsBar:!0,showFullscreenButton:!0,showUserNameChangeUI:!0,iframeStyle:!0,customLayout:!0,cssFile:!0,cssText:!0,bodyClass:!0,videoSource:{validate:function(t,e){return t instanceof MediaStreamTrack&&(e._sharedTracks.videoDeviceId=t),e._preloadCache.videoDeviceId=t,!0}},audioSource:{validate:function(t,e){return t instanceof MediaStreamTrack&&(e._sharedTracks.audioDeviceId=t),e._preloadCache.audioDeviceId=t,!0}},subscribeToTracksAutomatically:{validate:function(t,e){return e._preloadCache.subscribeToTracksAutomatically=t,!0}},theme:{validate:function(t){var e=["accent","accentText","background","backgroundAccent","baseText","border","mainAreaBg","mainAreaBgAccent","mainAreaText","supportiveText"],n=function(r){for(var i=0,s=Object.keys(r);i<s.length;i++){var a=s[i];if(!e.includes(a))return console.error('unsupported color "'.concat(a,'". Valid colors: ').concat(e.join(", "))),!1;if(!r[a].match(/^#[0-9a-f]{6}|#[0-9a-f]{3}$/i))return console.error("".concat(a,' theme color should be provided in valid hex color format. Received: "').concat(r[a],'"')),!1}return!0};return Le(t)==="object"&&("light"in t&&"dark"in t||"colors"in t)?"light"in t&&"dark"in t?"colors"in t.light?"colors"in t.dark?n(t.light.colors)&&n(t.dark.colors):(console.error('Dark theme is missing "colors" property.',t),!1):(console.error('Light theme is missing "colors" property.',t),!1):n(t.colors):(console.error('Theme must contain either both "light" and "dark" properties, or "colors".',t),!1)},help:"unsupported theme configuration. Check error logs for detailed info."},layoutConfig:{validate:function(t){if("grid"in t){var e=t.grid;if("maxTilesPerPage"in e){if(!Number.isInteger(e.maxTilesPerPage))return console.error("grid.maxTilesPerPage should be an integer. You passed ".concat(e.maxTilesPerPage,".")),!1;if(e.maxTilesPerPage>49)return console.error("grid.maxTilesPerPage can't be larger than 49 without sacrificing browser performance. Please contact us at https://www.daily.co/contact to talk about your use case."),!1}if("minTilesPerPage"in e){if(!Number.isInteger(e.minTilesPerPage))return console.error("grid.minTilesPerPage should be an integer. You passed ".concat(e.minTilesPerPage,".")),!1;if(e.minTilesPerPage<1)return console.error("grid.minTilesPerPage can't be lower than 1."),!1;if("maxTilesPerPage"in e&&e.minTilesPerPage>e.maxTilesPerPage)return console.error("grid.minTilesPerPage can't be higher than grid.maxTilesPerPage."),!1}}return!0},help:"unsupported layoutConfig. Check error logs for detailed info."},receiveSettings:{validate:function(t){return eh(t,{allowAllParticipantsKey:!1})},help:rh({allowAllParticipantsKey:!1})},sendSettings:{validate:function(t,e){return!!function(n,r){try{return r.validateUpdateSendSettings(n),!0}catch(i){return console.error("Failed to validate send settings",i),!1}}(t,e)&&(e._preloadCache.sendSettings=t,!0)},help:"Invalid sendSettings provided. Check error logs for detailed info."},inputSettings:{validate:function(t,e){var n;return!!th(t)&&(e._preloadCache.inputSettings||(e._preloadCache.inputSettings={}),nh(t,(n=e.properties)===null||n===void 0?void 0:n.dailyConfig),t.audio&&(e._preloadCache.inputSettings.audio=t.audio),t.video&&(e._preloadCache.inputSettings.video=t.video),!0)},help:ho()},layout:{validate:function(t){return t==="custom-v1"||t==="browser"||t==="none"},help:'layout may only be set to "custom-v1"',queryString:"layout"},emb:{queryString:"emb"},embHref:{queryString:"embHref"},dailyJsVersion:{queryString:"dailyJsVersion"},proxy:{queryString:"proxy"},strictMode:!0,allowMultipleCallInstances:!0},Gi={styles:{validate:function(t){for(var e in t)if(e!=="cam"&&e!=="screen")return!1;if(t.cam){for(var n in t.cam)if(n!=="div"&&n!=="video")return!1}if(t.screen){for(var r in t.screen)if(r!=="div"&&r!=="video")return!1}return!0},help:"styles format should be a subset of: { cam: {div: {}, video: {}}, screen: {div: {}, video: {}} }"},setSubscribedTracks:{validate:function(t,e){if(e._preloadCache.subscribeToTracksAutomatically)return!1;var n=[!0,!1,"staged"];if(n.includes(t)||!Te()&&t==="avatar")return!0;var r=["audio","video","screenAudio","screenVideo","rmpAudio","rmpVideo"];return function i(s){var a=arguments.length>1&&arguments[1]!==void 0&&arguments[1];for(var o in s)if(o==="custom"){if(!n.includes(s[o])&&!i(s[o],!0))return!1}else{var c=!a&&!r.includes(o),u=!n.includes(s[o]);if(c||u)return!1}return!0}(t)},help:"setSubscribedTracks cannot be used when setSubscribeToTracksAutomatically is enabled, and should be of the form: "+"true".concat(Te()?"":" | 'avatar'"," | false | 'staged' | { [audio: true|false|'staged'], [video: true|false|'staged'], [screenAudio: true|false|'staged'], [screenVideo: true|false|'staged'] }")},setAudio:!0,setVideo:!0,setScreenShare:{validate:function(t){return t===!1},help:"setScreenShare must be false, as it's only meant for stopping remote participants' screen shares"},eject:!0,updatePermissions:{validate:function(t){for(var e=0,n=Object.entries(t);e<n.length;e++){var r=dr(n[e],2),i=r[0],s=r[1];switch(i){case"hasPresence":if(typeof s!="boolean")return!1;break;case"canSend":if(s instanceof Set||s instanceof Array||Array.isArray(s)){var a,o=["video","audio","screenVideo","screenAudio","customVideo","customAudio"],c=wu(s);try{for(c.s();!(a=c.n()).done;){var u=a.value;if(!o.includes(u))return!1}}catch(b){c.e(b)}finally{c.f()}}else if(typeof s!="boolean")return!1;(s instanceof Array||Array.isArray(s))&&(t.canSend=new Set(s));break;case"canAdmin":if(s instanceof Set||s instanceof Array||Array.isArray(s)){var d,p=["participants","streaming","transcription"],v=wu(s);try{for(v.s();!(d=v.n()).done;){var w=d.value;if(!p.includes(w))return!1}}catch(b){v.e(b)}finally{v.f()}}else if(typeof s!="boolean")return!1;(s instanceof Array||Array.isArray(s))&&(t.canAdmin=new Set(s));break;default:return!1}}return!0},help:"updatePermissions can take hasPresence, canSend, and canAdmin permissions. hasPresence must be a boolean. canSend can be a boolean or an Array or Set of media types (video, audio, screenVideo, screenAudio, customVideo, customAudio). canAdmin can be a boolean or an Array or Set of admin types (participants, streaming, transcription)."}};Promise.any||(Promise.any=function(){var t=se(function*(e){return new Promise(function(n,r){var i=[];e.forEach(function(s){return Promise.resolve(s).then(function(a){n(a)}).catch(function(a){i.push(a),i.length===e.length&&r(i)})})})});return function(e){return t.apply(this,arguments)}}());var Au=function(){Ds(ne,hn);var t,e,n,r,i,s,a,o,c,u,d,p,v,w,b,S,D,O,$,j,k,T,x,P,V,F,H,C,G,oe,me,ue,te,Q,K,_e,ge,Ce,ye=ov(ne);function ne(l){var h,f,y,m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Vt(this,ne),dn(on(f=ye.call(this)),"startListeningForDeviceChanges",function(){tv(f.handleDeviceChange)}),dn(on(f),"stopListeningForDeviceChanges",function(){nv(f.handleDeviceChange)}),dn(on(f),"handleDeviceChange",function(q){q=q.map(function(W){return JSON.parse(JSON.stringify(W))}),f.emitDailyJSEvent({action:"available-devices-updated",availableDevices:q})}),dn(on(f),"handleNativeAppStateChange",function(){var q=se(function*(W){if(W==="destroyed")return console.warn("App has been destroyed before leaving the meeting. Cleaning up all the resources!"),void(yield f.destroy());var g=W==="active";f.disableReactNativeAutoDeviceManagement("video")||(g?f.camUnmutedBeforeLosingNativeActiveState&&f.setLocalVideo(!0):(f.camUnmutedBeforeLosingNativeActiveState=f.localVideo(),f.camUnmutedBeforeLosingNativeActiveState&&f.setLocalVideo(!1)))});return function(W){return q.apply(this,arguments)}}()),dn(on(f),"handleNativeAudioFocusChange",function(q){f.disableReactNativeAutoDeviceManagement("audio")||(f._hasNativeAudioFocus=q,f.toggleParticipantAudioBasedOnNativeAudioFocus(),f._hasNativeAudioFocus?f.micUnmutedBeforeLosingNativeAudioFocus&&f.setLocalAudio(!0):(f.micUnmutedBeforeLosingNativeAudioFocus=f.localAudio(),f.setLocalAudio(!1)))}),dn(on(f),"handleNativeSystemScreenCaptureStop",function(){f.stopScreenShare()}),f.strictMode=m.strictMode===void 0||m.strictMode,f.allowMultipleCallInstances=(h=m.allowMultipleCallInstances)!==null&&h!==void 0&&h,Object.keys(Zn).length&&(f._logDuplicateInstanceAttempt(),!f.allowMultipleCallInstances)){if(f.strictMode)throw new Error("Duplicate DailyIframe instances are not allowed");console.warn("Using strictMode: false to allow multiple call instances is now deprecated. Set `allowMultipleCallInstances: true`")}if(window._daily||(window._daily={pendings:[],instances:{}}),f.callClientId=Ns(),y=on(f),Zn[y.callClientId]=y,window._daily.instances[f.callClientId]={},f._sharedTracks={},window._daily.instances[f.callClientId].tracks=f._sharedTracks,m.dailyJsVersion=ne.version(),f._iframe=l,f._callObjectMode=m.layout==="none"&&!f._iframe,f._preloadCache={subscribeToTracksAutomatically:!0,audioDeviceId:null,videoDeviceId:null,outputDeviceId:null,inputSettings:null,sendSettings:null,videoTrackForNetworkConnectivityTest:null,videoTrackForConnectionQualityTest:null},m.showLocalVideo!==void 0?f._callObjectMode?console.error("showLocalVideo is not available in call object mode"):f._showLocalVideo=!!m.showLocalVideo:f._showLocalVideo=!0,m.showParticipantsBar!==void 0?f._callObjectMode?console.error("showParticipantsBar is not available in call object mode"):f._showParticipantsBar=!!m.showParticipantsBar:f._showParticipantsBar=!0,m.customIntegrations!==void 0?f._callObjectMode?console.error("customIntegrations is not available in call object mode"):f._customIntegrations=m.customIntegrations:f._customIntegrations={},m.customTrayButtons!==void 0?f._callObjectMode?console.error("customTrayButtons is not available in call object mode"):f._customTrayButtons=m.customTrayButtons:f._customTrayButtons={},m.activeSpeakerMode!==void 0?f._callObjectMode?console.error("activeSpeakerMode is not available in call object mode"):f._activeSpeakerMode=!!m.activeSpeakerMode:f._activeSpeakerMode=!1,m.receiveSettings?f._callObjectMode?f._receiveSettings=m.receiveSettings:console.error("receiveSettings is only available in call object mode"):f._receiveSettings={},f.validateProperties(m),f.properties=le({},m),f._preloadCache.inputSettings||(f._preloadCache.inputSettings={}),m.inputSettings&&m.inputSettings.audio&&(f._preloadCache.inputSettings.audio=m.inputSettings.audio),m.inputSettings&&m.inputSettings.video&&(f._preloadCache.inputSettings.video=m.inputSettings.video),f._callObjectLoader=f._callObjectMode?new Vy(f.callClientId):null,f._callState=Jl,f._isPreparingToJoin=!1,f._accessState={access:ma},f._meetingSessionSummary={},f._finalSummaryOfPrevSession={},f._meetingSessionState=Ea(Cu,f._callObjectMode),f._nativeInCallAudioMode=ku,f._participants={},f._isScreenSharing=!1,f._participantCounts=Eu,f._rmpPlayerState={},f._waitingParticipants={},f._network={threshold:"good",quality:100},f._activeSpeaker={},f._localAudioLevel=0,f._isLocalAudioLevelObserverRunning=!1,f._remoteParticipantsAudioLevel={},f._isRemoteParticipantsAudioLevelObserverRunning=!1,f._maxAppMessageSize=_a,f._messageChannel=Te()?new $y:new Fy,f._iframe&&(f._iframe.requestFullscreen?f._iframe.addEventListener("fullscreenchange",function(){document.fullscreenElement===f._iframe?(f.emitDailyJSEvent({action:$i}),f.sendMessageToCallMachine({action:$i})):(f.emitDailyJSEvent({action:qi}),f.sendMessageToCallMachine({action:qi}))}):f._iframe.webkitRequestFullscreen&&f._iframe.addEventListener("webkitfullscreenchange",function(){document.webkitFullscreenElement===f._iframe?(f.emitDailyJSEvent({action:$i}),f.sendMessageToCallMachine({action:$i})):(f.emitDailyJSEvent({action:qi}),f.sendMessageToCallMachine({action:qi}))})),Te()){var M=f.nativeUtils();M.addAudioFocusChangeListener&&M.removeAudioFocusChangeListener&&M.addAppStateChangeListener&&M.removeAppStateChangeListener&&M.addSystemScreenCaptureStopListener&&M.removeSystemScreenCaptureStopListener||console.warn("expected (add|remove)(AudioFocusChange|AppActiveStateChange|SystemScreenCaptureStop)Listener to be available in React Native"),f._hasNativeAudioFocus=!0,M.addAudioFocusChangeListener(f.handleNativeAudioFocusChange),M.addAppStateChangeListener(f.handleNativeAppStateChange),M.addSystemScreenCaptureStopListener(f.handleNativeSystemScreenCaptureStop)}return f._callObjectMode&&f.startListeningForDeviceChanges(),f._messageChannel.addListenerForMessagesFromCallMachine(f.handleMessageFromCallMachine,f.callClientId,on(f)),f}return Gt(ne,[{key:"destroy",value:(Ce=se(function*(){var l,h;try{yield this.leave()}catch{}var f=this._iframe;if(f){var y=f.parentElement;y&&y.removeChild(f)}if(this._messageChannel.removeListener(this.handleMessageFromCallMachine),Te()){var m=this.nativeUtils();m.removeAudioFocusChangeListener(this.handleNativeAudioFocusChange),m.removeAppStateChangeListener(this.handleNativeAppStateChange),m.removeSystemScreenCaptureStopListener(this.handleNativeSystemScreenCaptureStop)}this._callObjectMode&&this.stopListeningForDeviceChanges(),this.resetMeetingDependentVars(),this._destroyed=!0,this.emitDailyJSEvent({action:"call-instance-destroyed"}),delete Zn[this.callClientId],!((l=window)===null||l===void 0||(h=l._daily)===null||h===void 0)&&h.instances&&delete window._daily.instances[this.callClientId],this.strictMode&&(this.callClientId=void 0)}),function(){return Ce.apply(this,arguments)})},{key:"isDestroyed",value:function(){return!!this._destroyed}},{key:"loadCss",value:function(l){var h=l.bodyClass,f=l.cssFile,y=l.cssText;return ve(),this.sendMessageToCallMachine({action:"load-css",cssFile:this.absoluteUrl(f),bodyClass:h,cssText:y}),this}},{key:"iframe",value:function(){return ve(),this._iframe}},{key:"meetingState",value:function(){return this._callState}},{key:"accessState",value:function(){return Nt(this._callObjectMode,"accessState()"),this._accessState}},{key:"participants",value:function(){return this._participants}},{key:"participantCounts",value:function(){return this._participantCounts}},{key:"waitingParticipants",value:function(){return Nt(this._callObjectMode,"waitingParticipants()"),this._waitingParticipants}},{key:"validateParticipantProperties",value:function(l,h){for(var f in h){if(!Gi[f])throw new Error("unrecognized updateParticipant property ".concat(f));if(Gi[f].validate&&!Gi[f].validate(h[f],this,this._participants[l]))throw new Error(Gi[f].help)}}},{key:"updateParticipant",value:function(l,h){return this._participants.local&&this._participants.local.session_id===l&&(l="local"),l&&h&&(this.validateParticipantProperties(l,h),this.sendMessageToCallMachine({action:"update-participant",id:l,properties:h})),this}},{key:"updateParticipants",value:function(l){var h=this._participants.local&&this._participants.local.session_id;for(var f in l)f===h&&(f="local"),f&&l[f]&&this.validateParticipantProperties(f,l[f]);return this.sendMessageToCallMachine({action:"update-participants",participants:l}),this}},{key:"updateWaitingParticipant",value:(ge=se(function*(){var l=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Nt(this._callObjectMode,"updateWaitingParticipant()"),Ie(this._callState,"updateWaitingParticipant()"),typeof h!="string"||Le(f)!=="object")throw new Error("updateWaitingParticipant() must take an id string and a updates object");return new Promise(function(y,m){l.sendMessageToCallMachine({action:"daily-method-update-waiting-participant",id:h,updates:f},function(M){M.error&&m(M.error),M.id||m(new Error("unknown error in updateWaitingParticipant()")),y({id:M.id})})})}),function(){return ge.apply(this,arguments)})},{key:"updateWaitingParticipants",value:(_e=se(function*(){var l=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Nt(this._callObjectMode,"updateWaitingParticipants()"),Ie(this._callState,"updateWaitingParticipants()"),Le(h)!=="object")throw new Error("updateWaitingParticipants() must take a mapping between ids and update objects");return new Promise(function(f,y){l.sendMessageToCallMachine({action:"daily-method-update-waiting-participants",updatesById:h},function(m){m.error&&y(m.error),m.ids||y(new Error("unknown error in updateWaitingParticipants()")),f({ids:m.ids})})})}),function(){return _e.apply(this,arguments)})},{key:"requestAccess",value:(K=se(function*(){var l=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=h.access,y=f===void 0?{level:D_}:f,m=h.name,M=m===void 0?"":m;return Nt(this._callObjectMode,"requestAccess()"),Ie(this._callState,"requestAccess()"),new Promise(function(q,W){l.sendMessageToCallMachine({action:"daily-method-request-access",access:y,name:M},function(g){g.error&&W(g.error),g.access||W(new Error("unknown error in requestAccess()")),q({access:g.access,granted:g.granted})})})}),function(){return K.apply(this,arguments)})},{key:"localAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.audio.state):null}},{key:"localVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.video.state):null}},{key:"setLocalAudio",value:function(l){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return"forceDiscardTrack"in h&&(Te()?(console.warn("forceDiscardTrack option not supported in React Native; ignoring"),h={}):l&&(console.warn("forceDiscardTrack option only supported when calling setLocalAudio(false); ignoring"),h={})),this.sendMessageToCallMachine({action:"local-audio",state:l,options:h}),this}},{key:"localScreenAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenAudio.state):null}},{key:"localScreenVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenVideo.state):null}},{key:"updateScreenShare",value:function(l){if(this._isScreenSharing)return this.sendMessageToCallMachine({action:"local-screen-update",options:l}),this;console.warn("There is no screen share in progress. Try calling startScreenShare first.")}},{key:"setLocalVideo",value:function(l){return this.sendMessageToCallMachine({action:"local-video",state:l}),this}},{key:"getReceiveSettings",value:(Q=se(function*(l){var h=this,f=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).showInheritedValues,y=f!==void 0&&f;if(Nt(this._callObjectMode,"getReceiveSettings()"),!this._callMachineInitialized)return this._receiveSettings;switch(Le(l)){case"string":return new Promise(function(m){h.sendMessageToCallMachine({action:"get-single-participant-receive-settings",id:l,showInheritedValues:y},function(M){m(M.receiveSettings)})});case"undefined":return this._receiveSettings;default:throw new Error('first argument to getReceiveSettings() must be a participant id (or "base"), or there should be no arguments')}}),function(l){return Q.apply(this,arguments)})},{key:"updateReceiveSettings",value:(te=se(function*(l){var h=this;if(Nt(this._callObjectMode,"updateReceiveSettings()"),!eh(l,{allowAllParticipantsKey:!0}))throw new Error(rh({allowAllParticipantsKey:!0}));return Ie(this._callState,"updateReceiveSettings()","To specify receive settings earlier, use the receiveSettings config property."),new Promise(function(f){h.sendMessageToCallMachine({action:"update-receive-settings",receiveSettings:l},function(y){f({receiveSettings:y.receiveSettings})})})}),function(l){return te.apply(this,arguments)})},{key:"_prepInputSettingsToPresentToUser",value:function(l){var h,f,y,m,M,q,W,g;if(l){var _={},E=((h=l.audio)===null||h===void 0||(f=h.processor)===null||f===void 0?void 0:f.type)==="none"&&((y=l.audio)===null||y===void 0||(m=y.processor)===null||m===void 0?void 0:m._isDefaultWhenNone);if(l.audio&&!E){var A=le({},l.audio.processor);delete A._isDefaultWhenNone,_.audio=le(le({},l.audio),{},{processor:A})}var L=((M=l.video)===null||M===void 0||(q=M.processor)===null||q===void 0?void 0:q.type)==="none"&&((W=l.video)===null||W===void 0||(g=W.processor)===null||g===void 0?void 0:g._isDefaultWhenNone);if(l.video&&!L){var I=le({},l.video.processor);delete I._isDefaultWhenNone,_.video=le(le({},l.video),{},{processor:I})}return _}}},{key:"getInputSettings",value:function(){var l=this;return ve(),new Promise(function(h){h(l._getInputSettings())})}},{key:"_getInputSettings",value:function(){var l,h,f,y,m,M,q,W,g={processor:{type:"none",_isDefaultWhenNone:!0}};this._inputSettings?(l=((f=this._inputSettings)===null||f===void 0?void 0:f.video)||g,h=((y=this._inputSettings)===null||y===void 0?void 0:y.audio)||g):(l=((m=this._preloadCache)===null||m===void 0||(M=m.inputSettings)===null||M===void 0?void 0:M.video)||g,h=((q=this._preloadCache)===null||q===void 0||(W=q.inputSettings)===null||W===void 0?void 0:W.audio)||g);var _={audio:h,video:l};return this._prepInputSettingsToPresentToUser(_)}},{key:"updateInputSettings",value:(ue=se(function*(l){var h=this;return ve(),th(l)?(l&&(this._preloadCache.inputSettings||(this._preloadCache.inputSettings={}),nh(l,this.properties.dailyConfig),l.audio&&(this._preloadCache.inputSettings.audio=l.audio),l.video&&(this._preloadCache.inputSettings.video=l.video)),l.video||l.audio?this._callObjectMode&&!this._callMachineInitialized?this._getInputSettings():new Promise(function(f,y){h.sendMessageToCallMachine({action:"update-input-settings",inputSettings:l},function(m){m.error?y(m.error):f({inputSettings:h._prepInputSettingsToPresentToUser(m.inputSettings)})})}):this._getInputSettings()):(console.error(ho()),Promise.reject(ho()))}),function(l){return ue.apply(this,arguments)})},{key:"setBandwidth",value:function(l){var h=l.kbs,f=l.trackConstraints;if(ve(),this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-bandwidth",kbs:h,trackConstraints:f}),this}},{key:"getDailyLang",value:function(){var l=this;if(ve(),this._callMachineInitialized)return new Promise(function(h){l.sendMessageToCallMachine({action:"get-daily-lang"},function(f){delete f.action,delete f.callbackStamp,h(f)})})}},{key:"setDailyLang",value:function(l){return ve(),this.sendMessageToCallMachine({action:"set-daily-lang",lang:l}),this}},{key:"setProxyUrl",value:function(l){return this.sendMessageToCallMachine({action:"set-proxy-url",proxyUrl:l}),this}},{key:"setIceConfig",value:function(l){return this.sendMessageToCallMachine({action:"set-ice-config",iceConfig:l}),this}},{key:"meetingSessionSummary",value:function(){return[Qn,wn].includes(this._callState)?this._finalSummaryOfPrevSession:this._meetingSessionSummary}},{key:"getMeetingSession",value:(me=se(function*(){var l=this;return console.warn("getMeetingSession() is deprecated: use meetingSessionSummary(), which will return immediately"),Ie(this._callState,"getMeetingSession()"),new Promise(function(h){l.sendMessageToCallMachine({action:"get-meeting-session"},function(f){delete f.action,delete f.callbackStamp,h(f)})})}),function(){return me.apply(this,arguments)})},{key:"meetingSessionState",value:function(){return Ie(this._callState,"meetingSessionState"),this._meetingSessionState}},{key:"setMeetingSessionData",value:function(l){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"replace";Nt(this._callObjectMode,"setMeetingSessionData()"),Ie(this._callState,"setMeetingSessionData");try{(function(f,y){new qy({data:f,mergeStrategy:y})})(l,h)}catch(f){throw console.error(f),f}try{this.sendMessageToCallMachine({action:"set-session-data",data:l,mergeStrategy:h})}catch(f){throw new Error("Error setting meeting session data: ".concat(f))}}},{key:"setUserName",value:function(l,h){var f=this;return this.properties.userName=l,new Promise(function(y){f.sendMessageToCallMachine({action:"set-user-name",name:l??"",thisMeetingOnly:Te()||!!h&&!!h.thisMeetingOnly},function(m){delete m.action,delete m.callbackStamp,y(m)})})}},{key:"setUserData",value:(oe=se(function*(l){var h=this;try{Zf(l)}catch(f){throw console.error(f),f}if(this.properties.userData=l,this._callMachineInitialized)return new Promise(function(f){try{h.sendMessageToCallMachine({action:"set-user-data",userData:l},function(y){delete y.action,delete y.callbackStamp,f(y)})}catch(y){throw new Error("Error setting user data: ".concat(y))}})}),function(l){return oe.apply(this,arguments)})},{key:"validateAudioLevelInterval",value:function(l){if(l&&(l<100||typeof l!="number"))throw new Error("The interval must be a number greater than or equal to 100 milliseconds.")}},{key:"startLocalAudioLevelObserver",value:function(l){var h=this;if(typeof AudioWorkletNode>"u"&&!Te())throw new Error("startLocalAudioLevelObserver() is not supported on this browser");if(this.validateAudioLevelInterval(l),this._callMachineInitialized)return this._isLocalAudioLevelObserverRunning=!0,new Promise(function(f,y){h.sendMessageToCallMachine({action:"start-local-audio-level-observer",interval:l},function(m){h._isLocalAudioLevelObserverRunning=!m.error,m.error?y({error:m.error}):f()})});this._preloadCache.localAudioLevelObserver={enabled:!0,interval:l}}},{key:"isLocalAudioLevelObserverRunning",value:function(){return this._isLocalAudioLevelObserverRunning}},{key:"stopLocalAudioLevelObserver",value:function(){this._preloadCache.localAudioLevelObserver=null,this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:"stop-local-audio-level-observer"})}},{key:"startRemoteParticipantsAudioLevelObserver",value:function(l){var h=this;if(this.validateAudioLevelInterval(l),this._callMachineInitialized)return this._isRemoteParticipantsAudioLevelObserverRunning=!0,new Promise(function(f,y){h.sendMessageToCallMachine({action:"start-remote-participants-audio-level-observer",interval:l},function(m){h._isRemoteParticipantsAudioLevelObserverRunning=!m.error,m.error?y({error:m.error}):f()})});this._preloadCache.remoteParticipantsAudioLevelObserver={enabled:!0,interval:l}}},{key:"isRemoteParticipantsAudioLevelObserverRunning",value:function(){return this._isRemoteParticipantsAudioLevelObserverRunning}},{key:"stopRemoteParticipantsAudioLevelObserver",value:function(){this._preloadCache.remoteParticipantsAudioLevelObserver=null,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:"stop-remote-participants-audio-level-observer"})}},{key:"startCamera",value:(G=se(function*(){var l=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Nt(this._callObjectMode,"startCamera()"),ka(this._callState,this._isPreparingToJoin,"startCamera()","Did you mean to use setLocalAudio() and/or setLocalVideo() instead?"),this.needsLoad())try{yield this.load(h)}catch(f){return Promise.reject(f)}else{if(this._didPreAuth){if(h.url&&h.url!==this.properties.url)return console.error("url in startCamera() is different than the one used in preAuth()"),Promise.reject();if(h.token&&h.token!==this.properties.token)return console.error("token in startCamera() is different than the one used in preAuth()"),Promise.reject()}this.validateProperties(h),this.properties=le(le({},this.properties),h)}return new Promise(function(f){l.sendMessageToCallMachine({action:"start-camera",properties:Sr(l.properties,l.callClientId),preloadCache:Sr(l._preloadCache,l.callClientId)},function(y){delete y.action,delete y.callbackStamp,f(y)})})}),function(){return G.apply(this,arguments)})},{key:"validateCustomTrack",value:function(l,h,f){if(f&&f.length>50)throw new Error("Custom track `trackName` must not be more than 50 characters");if(h&&h!=="music"&&h!=="speech"&&!(h instanceof Object))throw new Error("Custom track `mode` must be either `music` | `speech` | `DailyMicAudioModeSettings` or `undefined`");if(f&&["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo","customVideoDefaults"].includes(f))throw new Error("Custom track `trackName` must not match a track name already used by daily: cam-audio, cam-video, customVideoDefaults, screen-video, screen-audio, rmpAudio, rmpVideo");if(!(l instanceof MediaStreamTrack))throw new Error("Custom tracks provided must be instances of MediaStreamTrack")}},{key:"startCustomTrack",value:function(){var l=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{track,mode,trackName};return ve(),Ie(this._callState,"startCustomTrack()"),this.validateCustomTrack(h.track,h.mode,h.trackName),new Promise(function(f,y){l._sharedTracks.customTrack=h.track,h.track=ei,l.sendMessageToCallMachine({action:"start-custom-track",properties:h},function(m){m.error?y({error:m.error}):f(m.mediaTag)})})}},{key:"stopCustomTrack",value:function(l){var h=this;return ve(),Ie(this._callState,"stopCustomTrack()"),new Promise(function(f){h.sendMessageToCallMachine({action:"stop-custom-track",mediaTag:l},function(y){f(y.mediaTag)})})}},{key:"setCamera",value:function(l){var h=this;return Kr(),zi(this._callMachineInitialized,"setCamera()"),new Promise(function(f){h.sendMessageToCallMachine({action:"set-camera",cameraDeviceId:l},function(y){f({device:y.device})})})}},{key:"setAudioDevice",value:(C=se(function*(l){return Kr(),this.nativeUtils().setAudioDevice(l),{deviceId:yield this.nativeUtils().getAudioDevice()}}),function(l){return C.apply(this,arguments)})},{key:"cycleCamera",value:function(){var l=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(f){l.sendMessageToCallMachine({action:"cycle-camera",properties:h},function(y){f({device:y.device})})})}},{key:"cycleMic",value:function(){var l=this;return ve(),new Promise(function(h){l.sendMessageToCallMachine({action:"cycle-mic"},function(f){h({device:f.device})})})}},{key:"getCameraFacingMode",value:function(){var l=this;return Kr(),new Promise(function(h){l.sendMessageToCallMachine({action:"get-camera-facing-mode"},function(f){h(f.facingMode)})})}},{key:"setInputDevicesAsync",value:(H=se(function*(l){var h=this,f=l.audioDeviceId,y=l.videoDeviceId,m=l.audioSource,M=l.videoSource;return ve(),m!==void 0&&(f=m),M!==void 0&&(y=M),f&&(this._preloadCache.audioDeviceId=f,this._sharedTracks.audioDeviceId=f),y&&(this._preloadCache.videoDeviceId=y,this._sharedTracks.videoDeviceId=y),this._callObjectMode&&this.needsLoad()?{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}}:(f instanceof MediaStreamTrack&&(f=ei),y instanceof MediaStreamTrack&&(y=ei),new Promise(function(q){h.sendMessageToCallMachine({action:"set-input-devices",audioDeviceId:f,videoDeviceId:y},function(W){delete W.action,delete W.callbackStamp,W.returnPreloadCache?q({camera:{deviceId:h._preloadCache.videoDeviceId},mic:{deviceId:h._preloadCache.audioDeviceId},speaker:{deviceId:h._preloadCache.outputDeviceId}}):q(W)})}))}),function(l){return H.apply(this,arguments)})},{key:"setOutputDeviceAsync",value:(F=se(function*(l){var h=this,f=l.outputDeviceId;return ve(),f&&(this._preloadCache.outputDeviceId=f),this._callObjectMode&&this.needsLoad()?{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}}:new Promise(function(y){h.sendMessageToCallMachine({action:"set-output-device",outputDeviceId:f},function(m){delete m.action,delete m.callbackStamp,m.returnPreloadCache?y({camera:{deviceId:h._preloadCache.videoDeviceId},mic:{deviceId:h._preloadCache.audioDeviceId},speaker:{deviceId:h._preloadCache.outputDeviceId}}):y(m)})})}),function(l){return F.apply(this,arguments)})},{key:"getInputDevices",value:(V=se(function*(){var l=this;return this._callObjectMode&&this.needsLoad()?{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}}:new Promise(function(h){l.sendMessageToCallMachine({action:"get-input-devices"},function(f){delete f.action,delete f.callbackStamp,f.returnPreloadCache?h({camera:{deviceId:l._preloadCache.videoDeviceId},mic:{deviceId:l._preloadCache.audioDeviceId},speaker:{deviceId:l._preloadCache.outputDeviceId}}):h(f)})})}),function(){return V.apply(this,arguments)})},{key:"nativeInCallAudioMode",value:function(){return Kr(),this._nativeInCallAudioMode}},{key:"setNativeInCallAudioMode",value:function(l){if(Kr(),[ku,cv].includes(l)){if(l!==this._nativeInCallAudioMode)return this._nativeInCallAudioMode=l,!this.disableReactNativeAutoDeviceManagement("audio")&&rs(this._callState,this._isPreparingToJoin)&&this.nativeUtils().setAudioMode(this._nativeInCallAudioMode),this}else console.error("invalid in-call audio mode specified: ",l)}},{key:"preAuth",value:(P=se(function*(){var l=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Nt(this._callObjectMode,"preAuth()"),ka(this._callState,this._isPreparingToJoin,"preAuth()"),this.needsLoad()&&(yield this.load(h)),!h.url)throw new Error("preAuth() requires at least a url to be provided");return this.validateProperties(h),this.properties=le(le({},this.properties),h),new Promise(function(f,y){l.sendMessageToCallMachine({action:"daily-method-preauth",properties:Sr(l.properties,l.callClientId),preloadCache:Sr(l._preloadCache,l.callClientId)},function(m){return m.error?y(m.error):m.access?(l._didPreAuth=!0,void f({access:m.access})):y(new Error("unknown error in preAuth()"))})})}),function(){return P.apply(this,arguments)})},{key:"load",value:(x=se(function*(l){var h=this;if(this.needsLoad()){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");if(l&&(this.validateProperties(l),this.properties=le(le({},this.properties),l)),!this._callObjectMode&&!this.properties.url)throw new Error("can't load iframe meeting because url property isn't set");return this._updateCallState(Kl),this.emitDailyJSEvent({action:$_}),this._callObjectMode?new Promise(function(f,y){h._callObjectLoader.cancel();var m=Date.now();h._callObjectLoader.load(h.properties.dailyConfig,function(M){h._bundleLoadTime=M?"no-op":Date.now()-m,h._updateCallState(Xl),M&&h.emitDailyJSEvent({action:Ql}),f()},function(M,q){if(h.emitDailyJSEvent({action:q_}),!q){h._updateCallState(wn),h.resetMeetingDependentVars();var W={action:nu,errorMsg:M.msg,error:{type:"connection-error",msg:"Failed to load call object bundle.",details:{on:"load",sourceError:M,bundleUrl:fs(h.properties.dailyConfig)}}};h._maybeSendToSentry(W),h.emitDailyJSEvent(W),y(M.msg)}})}):(this._iframe.src=Of(this.assembleMeetingUrl(),this.properties.dailyConfig),new Promise(function(f,y){h._loadedCallback=function(m){h._callState!==wn?(h._updateCallState(Xl),(h.properties.cssFile||h.properties.cssText)&&h.loadCss(h.properties),f()):y(m)}}))}}),function(l){return x.apply(this,arguments)})},{key:"join",value:(T=se(function*(){var l=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._testCallInProgress&&this.stopTestCallQuality();var f=!1;if(this.needsLoad()){this.updateIsPreparingToJoin(!0);try{yield this.load(h)}catch(y){return this.updateIsPreparingToJoin(!1),Promise.reject(y)}}else{if(f=!(!this.properties.cssFile&&!this.properties.cssText),this._didPreAuth){if(h.url&&h.url!==this.properties.url)return console.error("url in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject();if(h.token&&h.token!==this.properties.token)return console.error("token in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject()}if(h.url&&!this._callObjectMode&&h.url&&h.url!==this.properties.url)return console.error("url in join() is different than the one used in load() (".concat(this.properties.url," -> ").concat(h.url,")")),this.updateIsPreparingToJoin(!1),Promise.reject();this.validateProperties(h),this.properties=le(le({},this.properties),h)}return h.showLocalVideo!==void 0&&(this._callObjectMode?console.error("showLocalVideo is not available in callObject mode"):this._showLocalVideo=!!h.showLocalVideo),h.showParticipantsBar!==void 0&&(this._callObjectMode?console.error("showParticipantsBar is not available in callObject mode"):this._showParticipantsBar=!!h.showParticipantsBar),this._callState===ir||this._callState===so?(console.warn("already joined meeting, call leave() before joining again"),void this.updateIsPreparingToJoin(!1)):(this._updateCallState(so,!1),this.emitDailyJSEvent({action:G_}),this._preloadCache.inputSettings||(this._preloadCache.inputSettings={}),h.inputSettings&&h.inputSettings.audio&&(this._preloadCache.inputSettings.audio=h.inputSettings.audio),h.inputSettings&&h.inputSettings.video&&(this._preloadCache.inputSettings.video=h.inputSettings.video),this.sendMessageToCallMachine({action:"join-meeting",properties:Sr(this.properties,this.callClientId),preloadCache:Sr(this._preloadCache,this.callClientId)}),new Promise(function(y,m){l._joinedCallback=function(M,q){if(l._callState!==wn){if(l._updateCallState(ir),M)for(var W in M){if(l._callObjectMode){var g=l._callMachine().store;gu(M[W],g),mu(M[W],g),_u(M[W],l._participants[W],g)}l._participants[W]=le({},M[W]),l.toggleParticipantAudioBasedOnNativeAudioFocus()}f&&l.loadCss(l.properties),y(M)}else m(q)}}))}),function(){return T.apply(this,arguments)})},{key:"leave",value:(k=se(function*(){var l=this;return this._testCallInProgress&&this.stopTestCallQuality(),new Promise(function(h){l._callState===Qn||l._callState===wn?h():l._callObjectLoader&&!l._callObjectLoader.loaded?(l._callObjectLoader.cancel(),l._updateCallState(Qn),l.resetMeetingDependentVars(),l.emitDailyJSEvent({action:Qn}),h()):(l._resolveLeave=h,l.sendMessageToCallMachine({action:"leave-meeting"}))})}),function(){return k.apply(this,arguments)})},{key:"startScreenShare",value:(j=se(function*(){var l=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(zi(this._callMachineInitialized,"startScreenShare()"),h.screenVideoSendSettings&&this._validateVideoSendSettings("screenVideo",h.screenVideoSendSettings),h.mediaStream&&(this._sharedTracks.screenMediaStream=h.mediaStream,h.mediaStream=ei),typeof DailyNativeUtils<"u"&&DailyNativeUtils.isIOS!==void 0&&DailyNativeUtils.isIOS){var f=this.nativeUtils();if(yield f.isScreenBeingCaptured())return void this.emitDailyJSEvent({action:tu,type:"screen-share-error",errorMsg:"Could not start the screen sharing. The screen is already been captured!"});f.setSystemScreenCaptureStartCallback(function(){f.setSystemScreenCaptureStartCallback(null),l.sendMessageToCallMachine({action:iu,captureOptions:h})}),f.presentSystemScreenCapturePrompt()}else this.sendMessageToCallMachine({action:iu,captureOptions:h})}),function(){return j.apply(this,arguments)})},{key:"stopScreenShare",value:function(){zi(this._callMachineInitialized,"stopScreenShare()"),this.sendMessageToCallMachine({action:"local-screen-stop"})}},{key:"startRecording",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(le({action:"local-recording-start"},l))}},{key:"updateRecording",value:function(l){var h=l.layout,f=h===void 0?{preset:"default"}:h,y=l.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-recording",layout:f,instanceId:y})}},{key:"stopRecording",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(le({action:"local-recording-stop"},l))}},{key:"startLiveStreaming",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(le({action:"daily-method-start-live-streaming"},l))}},{key:"updateLiveStreaming",value:function(l){var h=l.layout,f=h===void 0?{preset:"default"}:h,y=l.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-live-streaming",layout:f,instanceId:y})}},{key:"addLiveStreamingEndpoints",value:function(l){var h=l.endpoints,f=l.instanceId;this.sendMessageToCallMachine({action:su,endpointsOp:Dy,endpoints:h,instanceId:f})}},{key:"removeLiveStreamingEndpoints",value:function(l){var h=l.endpoints,f=l.instanceId;this.sendMessageToCallMachine({action:su,endpointsOp:Ry,endpoints:h,instanceId:f})}},{key:"stopLiveStreaming",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(le({action:"daily-method-stop-live-streaming"},l))}},{key:"validateDailyConfig",value:function(l){l.camSimulcastEncodings&&(console.warn("camSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide camera simulcast settings."),this.validateSimulcastEncodings(l.camSimulcastEncodings)),l.screenSimulcastEncodings&&console.warn("screenSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide screen simulcast settings."),Wf()&&l.noAutoDefaultDeviceChange&&console.warn("noAutoDefaultDeviceChange is not supported on Android, and will be ignored.")}},{key:"validateSimulcastEncodings",value:function(l){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,f=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(l){if(!(l instanceof Array||Array.isArray(l)))throw new Error("encodings must be an Array");if(!Lu(l.length,1,3))throw new Error("encodings must be an Array with between 1 to ".concat(3," layers"));for(var y=0;y<l.length;y++){var m=l[y];for(var M in this._validateEncodingLayerHasValidProperties(m),m)if(Sa.includes(M)){if(typeof m[M]!="number")throw new Error("".concat(M," must be a number"));if(h){var q=h[M],W=q.min,g=q.max;if(!Lu(m[M],W,g))throw new Error("".concat(M," value not in range. valid range: ").concat(W," to ").concat(g))}}else if(!["active","scalabilityMode"].includes(M))throw new Error("Invalid key ".concat(M,", valid keys are:")+Object.values(Sa));if(f&&!m.hasOwnProperty("maxBitrate"))throw new Error("maxBitrate is not specified")}}}},{key:"startRemoteMediaPlayer",value:($=se(function*(l){var h=this,f=l.url,y=l.settings,m=y===void 0?{state:ao.PLAY}:y;try{(function(M){if(typeof M!="string")throw new Error('url parameter must be "string" type')})(f),xu(m),function(M){for(var q in M)if(!Tu.includes(q))throw new Error("Invalid key ".concat(q,", valid keys are: ").concat(Tu));M.simulcastEncodings&&this.validateSimulcastEncodings(M.simulcastEncodings,Qf,!0)}(m)}catch(M){throw console.error("invalid argument Error: ".concat(M)),console.error(`startRemoteMediaPlayer arguments must be of the form:
  { url: "playback url",
  settings?:
  {state: "play"|"pause", simulcastEncodings?: [{}] } }`),M}return new Promise(function(M,q){h.sendMessageToCallMachine({action:"daily-method-start-remote-media-player",url:f,settings:m},function(W){W.error?q({error:W.error,errorMsg:W.errorMsg}):M({session_id:W.session_id,remoteMediaPlayerState:{state:W.state,settings:W.settings}})})})}),function(l){return $.apply(this,arguments)})},{key:"stopRemoteMediaPlayer",value:(O=se(function*(l){var h=this;if(typeof l!="string")throw new Error(" remotePlayerID must be of type string");return new Promise(function(f,y){h.sendMessageToCallMachine({action:"daily-method-stop-remote-media-player",session_id:l},function(m){m.error?y({error:m.error,errorMsg:m.errorMsg}):f()})})}),function(l){return O.apply(this,arguments)})},{key:"updateRemoteMediaPlayer",value:(D=se(function*(l){var h=this,f=l.session_id,y=l.settings;try{xu(y)}catch(m){throw console.error("invalid argument Error: ".concat(m)),console.error(`updateRemoteMediaPlayer arguments must be of the form:
  session_id: "participant session",
  { settings?: {state: "play"|"pause"} }`),m}return new Promise(function(m,M){h.sendMessageToCallMachine({action:"daily-method-update-remote-media-player",session_id:f,settings:y},function(q){q.error?M({error:q.error,errorMsg:q.errorMsg}):m({session_id:q.session_id,remoteMediaPlayerState:{state:q.state,settings:q.settings}})})})}),function(l){return D.apply(this,arguments)})},{key:"startTranscription",value:function(l){Ie(this._callState,"startTranscription()"),this.sendMessageToCallMachine(le({action:"daily-method-start-transcription"},l))}},{key:"updateTranscription",value:function(l){if(Ie(this._callState,"updateTranscription()"),!l)throw new Error("updateTranscription Error: options is mandatory");if(Le(l)!=="object")throw new Error("updateTranscription Error: options must be object type");if(l.participants&&!Array.isArray(l.participants))throw new Error("updateTranscription Error: participants must be an array");this.sendMessageToCallMachine(le({action:"daily-method-update-transcription"},l))}},{key:"stopTranscription",value:function(l){if(Ie(this._callState,"stopTranscription()"),l&&Le(l)!=="object")throw new Error("stopTranscription Error: options must be object type");if(l&&!l.instanceId)throw new Error('"instanceId" not provided');this.sendMessageToCallMachine(le({action:"daily-method-stop-transcription"},l))}},{key:"startDialOut",value:(S=se(function*(l){var h=this;Ie(this._callState,"startDialOut()");var f=function(y){if(y){if(!Array.isArray(y))throw new Error("Error starting dial out: audio codec must be an array");if(y.length<=0)throw new Error("Error starting dial out: audio codec array specified but empty");y.forEach(function(m){if(typeof m!="string")throw new Error("Error starting dial out: audio codec must be a string");if(m!=="OPUS"&&m!=="PCMU"&&m!=="PCMA"&&m!=="G722")throw new Error("Error starting dial out: audio codec must be one of OPUS, PCMU, PCMA, G722")})}};if(!l.sipUri&&!l.phoneNumber)throw new Error("Error starting dial out: either a sip uri or phone number must be provided");if(l.sipUri&&l.phoneNumber)throw new Error("Error starting dial out: only one of sip uri or phone number must be provided");if(l.sipUri){if(typeof l.sipUri!="string")throw new Error("Error starting dial out: sipUri must be a string");if(!l.sipUri.startsWith("sip:"))throw new Error("Error starting dial out: Invalid SIP URI, must start with 'sip:'");if(l.video&&typeof l.video!="boolean")throw new Error("Error starting dial out: video must be a boolean value");(function(y){if(y&&(f(y.audio),y.video)){if(!Array.isArray(y.video))throw new Error("Error starting dial out: video codec must be an array");if(y.video.length<=0)throw new Error("Error starting dial out: video codec array specified but empty");y.video.forEach(function(m){if(typeof m!="string")throw new Error("Error starting dial out: video codec must be a string");if(m!=="H264"&&m!=="VP8")throw new Error("Error starting dial out: video codec must be H264 or VP8")})}})(l.codecs)}if(l.phoneNumber){if(typeof l.phoneNumber!="string")throw new Error("Error starting dial out: phoneNumber must be a string");if(!/^\+\d{1,}$/.test(l.phoneNumber))throw new Error("Error starting dial out: Invalid phone number, must be valid phone number as per E.164");l.codecs&&f(l.codecs.audio)}if(l.callerId){if(typeof l.callerId!="string")throw new Error("Error starting dial out: callerId must be a string");if(l.sipUri)throw new Error("Error starting dial out: callerId not allowed with sipUri")}if(l.displayName){if(typeof l.displayName!="string")throw new Error("Error starting dial out: displayName must be a string");if(l.displayName.length>=200)throw new Error("Error starting dial out: displayName length must be less than 200")}if(l.userId){if(typeof l.userId!="string")throw new Error("Error starting dial out: userId must be a string");if(l.userId.length>36)throw new Error("Error starting dial out: userId length must be less than or equal to 36")}return new Promise(function(y,m){h.sendMessageToCallMachine(le({action:"dialout-start"},l),function(M){M.error?m(M.error):y(M)})})}),function(l){return S.apply(this,arguments)})},{key:"stopDialOut",value:function(l){var h=this;return Ie(this._callState,"stopDialOut()"),new Promise(function(f,y){h.sendMessageToCallMachine(le({action:"dialout-stop"},l),function(m){m.error?y(m.error):f(m)})})}},{key:"sipCallTransfer",value:(b=se(function*(l){var h=this;if(Ie(this._callState,"sipCallTransfer()"),!l)throw new Error("sipCallTransfer() requires a sessionId and toEndPoint");return l.useSipRefer=!1,Ou(l,"sipCallTransfer"),new Promise(function(f,y){h.sendMessageToCallMachine(le({action:au},l),function(m){m.error?y(m.error):f(m)})})}),function(l){return b.apply(this,arguments)})},{key:"sipRefer",value:(w=se(function*(l){var h=this;if(Ie(this._callState,"sipRefer()"),!l)throw new Error("sessionId and toEndPoint are mandatory parameter");return l.useSipRefer=!0,Ou(l,"sipRefer"),new Promise(function(f,y){h.sendMessageToCallMachine(le({action:au},l),function(m){m.error?y(m.error):f(m)})})}),function(l){return w.apply(this,arguments)})},{key:"sendDTMF",value:(v=se(function*(l){var h=this;return Ie(this._callState,"sendDTMF()"),function(f){var y=f.sessionId,m=f.tones;if(!y||!m)throw new Error("sessionId and tones are mandatory parameter");if(typeof y!="string"||typeof m!="string")throw new Error("sessionId and tones should be of string type");if(m.length>20)throw new Error("tones string must be upto 20 characters");var M=/[^0-9A-D*#]/g,q=m.match(M);if(q&&q[0])throw new Error("".concat(q[0]," is not valid DTMF tone"))}(l),new Promise(function(f,y){h.sendMessageToCallMachine(le({action:"send-dtmf"},l),function(m){m.error?y(m.error):f(m)})})}),function(l){return v.apply(this,arguments)})},{key:"getNetworkStats",value:function(){var l=this;return this._callState!==ir?{stats:{latest:{}}}:new Promise(function(h){l.sendMessageToCallMachine({action:"get-calc-stats"},function(f){h(le({stats:f.stats},l._network))})})}},{key:"testWebsocketConnectivity",value:(p=se(function*(){var l=this;if(Ca(this._testCallInProgress,"testWebsocketConnectivity()"),this.needsLoad())try{yield this.load()}catch(h){return Promise.reject(h)}return new Promise(function(h,f){l.sendMessageToCallMachine({action:"test-websocket-connectivity"},function(y){y.error?f(y.error):h(y.results)})})}),function(){return p.apply(this,arguments)})},{key:"abortTestWebsocketConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-websocket-connectivity"})}},{key:"_validateVideoTrackForNetworkTests",value:function(l){return l?l instanceof MediaStreamTrack?!!iv(l)||(console.error("Video track is not playable. This test needs a live video track."),!1):(console.error("Video track needs to be of type `MediaStreamTrack`."),!1):(console.error("Missing video track. You must provide a video track in order to run this test."),!1)}},{key:"testCallQuality",value:(d=se(function*(){var l=this;ve(),Nt(this._callObjectMode,"testCallQuality()"),zi(this._callMachineInitialized,"testCallQuality()",null,!0),ka(this._callState,this._isPreparingToJoin,"testCallQuality()");var h=this._testCallAlreadyInProgress,f=function(m){h||(l._testCallInProgress=m)};if(f(!0),this.needsLoad())try{var y=this._callState;yield this.load(),this._callState=y}catch(m){return f(!1),Promise.reject(m)}return new Promise(function(m){l.sendMessageToCallMachine({action:"test-call-quality",dailyJsVersion:l.properties.dailyJsVersion},function(M){var q=M.results,W=q.result,g=Fc(q,sv);if(W==="failed"){var _,E=le({},g);(_=g.error)!==null&&_!==void 0&&_.details?(g.error.details=JSON.parse(g.error.details),E.error=le(le({},E.error),{},{details:le({},E.error.details)}),E.error.details.duringTest="testCallQuality"):(E.error=E.error?le({},E.error):{},E.error.details={duringTest:"testCallQuality"}),l._maybeSendToSentry(E)}f(!1),m(le({result:W},g))})})}),function(){return d.apply(this,arguments)})},{key:"stopTestCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-call-quality"})}},{key:"testConnectionQuality",value:(u=se(function*(l){var h;Te()?(console.warn("testConnectionQuality() is deprecated: use testPeerToPeerCallQuality() instead"),h=yield this.testPeerToPeerCallQuality(l)):(console.warn("testConnectionQuality() is deprecated: use testCallQuality() instead"),h=yield this.testCallQuality());var f={result:h.result,secondsElapsed:h.secondsElapsed};return h.data&&(f.data={maxRTT:h.data.maxRoundTripTime,packetLoss:h.data.avgRecvPacketLoss}),f}),function(l){return u.apply(this,arguments)})},{key:"testPeerToPeerCallQuality",value:(c=se(function*(l){var h=this;if(Ca(this._testCallInProgress,"testPeerToPeerCallQuality()"),this.needsLoad())try{yield this.load()}catch(m){return Promise.reject(m)}var f=l.videoTrack,y=l.duration;if(!this._validateVideoTrackForNetworkTests(f))throw new Error("Video track error");return this._sharedTracks.videoTrackForConnectionQualityTest=f,new Promise(function(m,M){h.sendMessageToCallMachine({action:"test-p2p-call-quality",duration:y},function(q){q.error?M(q.error):m(q.results)})})}),function(l){return c.apply(this,arguments)})},{key:"stopTestConnectionQuality",value:function(){Te()?(console.warn("stopTestConnectionQuality() is deprecated: use testPeerToPeerCallQuality() and stopTestPeerToPeerCallQuality() instead"),this.stopTestPeerToPeerCallQuality()):(console.warn("stopTestConnectionQuality() is deprecated: use testCallQuality() and stopTestCallQuality() instead"),this.stopTestCallQuality())}},{key:"stopTestPeerToPeerCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-p2p-call-quality"})}},{key:"testNetworkConnectivity",value:(o=se(function*(l){var h=this;if(Ca(this._testCallInProgress,"testNetworkConnectivity()"),this.needsLoad())try{yield this.load()}catch(f){return Promise.reject(f)}if(!this._validateVideoTrackForNetworkTests(l))throw new Error("Video track error");return this._sharedTracks.videoTrackForNetworkConnectivityTest=l,new Promise(function(f,y){h.sendMessageToCallMachine({action:"test-network-connectivity"},function(m){m.error?y(m.error):f(m.results)})})}),function(l){return o.apply(this,arguments)})},{key:"abortTestNetworkConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-network-connectivity"})}},{key:"getCpuLoadStats",value:function(){var l=this;return new Promise(function(h){l._callState===ir?l.sendMessageToCallMachine({action:"get-cpu-load-stats"},function(f){h(f.cpuStats)}):h({cpuLoadState:void 0,cpuLoadStateReason:void 0,stats:{}})})}},{key:"_validateEncodingLayerHasValidProperties",value:function(l){var h;if(!(((h=Object.keys(l))===null||h===void 0?void 0:h.length)>0))throw new Error("Empty encoding is not allowed. At least one of these valid keys should be specified:"+Object.values(Sa))}},{key:"_validateVideoSendSettings",value:function(l,h){var f=l==="screenVideo"?["default-screen-video","detail-optimized","motion-optimized","motion-and-detail-balanced"]:["default-video","bandwidth-optimized","bandwidth-and-quality-balanced","quality-optimized","adaptive-2-layers","adaptive-3-layers"],y="Video send settings should be either an object or one of the supported presets: ".concat(f.join());if(typeof h=="string"){if(!f.includes(h))throw new Error(y)}else{if(Le(h)!=="object")throw new Error(y);if(!h.maxQuality&&!h.encodings&&h.allowAdaptiveLayers===void 0)throw new Error("Video send settings must contain at least maxQuality, allowAdaptiveLayers or encodings attribute");if(h.maxQuality&&["low","medium","high"].indexOf(h.maxQuality)===-1)throw new Error("maxQuality must be either low, medium or high");if(h.encodings){var m=!1;switch(Object.keys(h.encodings).length){case 1:m=!h.encodings.low;break;case 2:m=!h.encodings.low||!h.encodings.medium;break;case 3:m=!h.encodings.low||!h.encodings.medium||!h.encodings.high;break;default:m=!0}if(m)throw new Error("Encodings must be defined as: low, low and medium, or low, medium and high.");h.encodings.low&&this._validateEncodingLayerHasValidProperties(h.encodings.low),h.encodings.medium&&this._validateEncodingLayerHasValidProperties(h.encodings.medium),h.encodings.high&&this._validateEncodingLayerHasValidProperties(h.encodings.high)}}}},{key:"validateUpdateSendSettings",value:function(l){var h=this;if(!l||Object.keys(l).length===0)throw new Error("Send settings must contain at least information for one track!");Object.entries(l).forEach(function(f){var y=dr(f,2),m=y[0],M=y[1];h._validateVideoSendSettings(m,M)})}},{key:"updateSendSettings",value:function(l){var h=this;return this.validateUpdateSendSettings(l),this.needsLoad()?(this._preloadCache.sendSettings=l,{sendSettings:this._preloadCache.sendSettings}):new Promise(function(f,y){h.sendMessageToCallMachine({action:"update-send-settings",sendSettings:l},function(m){m.error?y(m.error):f(m.sendSettings)})})}},{key:"getSendSettings",value:function(){return this._sendSettings||this._preloadCache.sendSettings}},{key:"getLocalAudioLevel",value:function(){return this._localAudioLevel}},{key:"getRemoteParticipantsAudioLevel",value:function(){return this._remoteParticipantsAudioLevel}},{key:"getActiveSpeaker",value:function(){return ve(),this._activeSpeaker}},{key:"setActiveSpeakerMode",value:function(l){return ve(),this.sendMessageToCallMachine({action:"set-active-speaker-mode",enabled:l}),this}},{key:"activeSpeakerMode",value:function(){return ve(),this._activeSpeakerMode}},{key:"subscribeToTracksAutomatically",value:function(){return this._preloadCache.subscribeToTracksAutomatically}},{key:"setSubscribeToTracksAutomatically",value:function(l){return Ie(this._callState,"setSubscribeToTracksAutomatically()","Use the subscribeToTracksAutomatically configuration property."),this._preloadCache.subscribeToTracksAutomatically=l,this.sendMessageToCallMachine({action:"daily-method-subscribe-to-tracks-automatically",enabled:l}),this}},{key:"enumerateDevices",value:(a=se(function*(){var l=this;if(this._callObjectMode){var h=yield navigator.mediaDevices.enumerateDevices();return gr()==="Firefox"&&yi().major>115&&yi().major<123&&(h=h.filter(function(f){return f.kind!=="audiooutput"})),{devices:h.map(function(f){var y=JSON.parse(JSON.stringify(f));if(!Te()&&f.kind==="videoinput"&&f.getCapabilities){var m,M=f.getCapabilities();y.facing=(M==null||(m=M.facingMode)===null||m===void 0?void 0:m.length)>=1?M.facingMode[0]:void 0}return y})}}return new Promise(function(f){l.sendMessageToCallMachine({action:"enumerate-devices"},function(y){f({devices:y.devices})})})}),function(){return a.apply(this,arguments)})},{key:"sendAppMessage",value:function(l){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"*";if(Ie(this._callState,"sendAppMessage()"),JSON.stringify(l).length>this._maxAppMessageSize)throw new Error("Message data too large. Max size is "+this._maxAppMessageSize);return this.sendMessageToCallMachine({action:"app-msg",data:l,to:h}),this}},{key:"addFakeParticipant",value:function(l){return ve(),Ie(this._callState,"addFakeParticipant()"),this.sendMessageToCallMachine(le({action:"add-fake-participant"},l)),this}},{key:"setShowNamesMode",value:function(l){return wt(this._callObjectMode,"setShowNamesMode()"),ve(),l&&l!=="always"&&l!=="never"?(console.error('setShowNamesMode argument should be "always", "never", or false'),this):(this.sendMessageToCallMachine({action:"set-show-names",mode:l}),this)}},{key:"setShowLocalVideo",value:function(){var l=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return wt(this._callObjectMode,"setShowLocalVideo()"),ve(),Ie(this._callState,"setShowLocalVideo()"),typeof l!="boolean"?(console.error("setShowLocalVideo only accepts a boolean value"),this):(this.sendMessageToCallMachine({action:"set-show-local-video",show:l}),this._showLocalVideo=l,this)}},{key:"showLocalVideo",value:function(){return wt(this._callObjectMode,"showLocalVideo()"),ve(),this._showLocalVideo}},{key:"setShowParticipantsBar",value:function(){var l=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return wt(this._callObjectMode,"setShowParticipantsBar()"),ve(),Ie(this._callState,"setShowParticipantsBar()"),typeof l!="boolean"?(console.error("setShowParticipantsBar only accepts a boolean value"),this):(this.sendMessageToCallMachine({action:"set-show-participants-bar",show:l}),this._showParticipantsBar=l,this)}},{key:"showParticipantsBar",value:function(){return wt(this._callObjectMode,"showParticipantsBar()"),ve(),this._showParticipantsBar}},{key:"customIntegrations",value:function(){return ve(),wt(this._callObjectMode,"customIntegrations()"),this._customIntegrations}},{key:"setCustomIntegrations",value:function(l){return ve(),wt(this._callObjectMode,"setCustomIntegrations()"),Ie(this._callState,"setCustomIntegrations()"),ah(l)?(this.sendMessageToCallMachine({action:"set-custom-integrations",integrations:l}),this._customIntegrations=l,this):this}},{key:"startCustomIntegrations",value:function(l){var h=this;if(ve(),wt(this._callObjectMode,"startCustomIntegrations()"),Ie(this._callState,"startCustomIntegrations()"),Array.isArray(l)&&l.some(function(m){return typeof m!="string"})||!Array.isArray(l)&&typeof l!="string")return console.error("startCustomIntegrations() only accepts string | string[]"),this;var f=typeof l=="string"?[l]:l,y=f.filter(function(m){return!(m in h._customIntegrations)});return y.length?(console.error(`Can't find custom integration(s): "`.concat(y.join(", "),'"')),this):(this.sendMessageToCallMachine({action:"start-custom-integrations",ids:f}),this)}},{key:"stopCustomIntegrations",value:function(l){var h=this;if(ve(),wt(this._callObjectMode,"stopCustomIntegrations()"),Ie(this._callState,"stopCustomIntegrations()"),Array.isArray(l)&&l.some(function(m){return typeof m!="string"})||!Array.isArray(l)&&typeof l!="string")return console.error("stopCustomIntegrations() only accepts string | string[]"),this;var f=typeof l=="string"?[l]:l,y=f.filter(function(m){return!(m in h._customIntegrations)});return y.length?(console.error(`Can't find custom integration(s): "`.concat(y.join(", "),'"')),this):(this.sendMessageToCallMachine({action:"stop-custom-integrations",ids:f}),this)}},{key:"customTrayButtons",value:function(){return wt(this._callObjectMode,"customTrayButtons()"),ve(),this._customTrayButtons}},{key:"updateCustomTrayButtons",value:function(l){return wt(this._callObjectMode,"updateCustomTrayButtons()"),ve(),Ie(this._callState,"updateCustomTrayButtons()"),sh(l)?(this.sendMessageToCallMachine({action:"update-custom-tray-buttons",btns:l}),this._customTrayButtons=l,this):(console.error("updateCustomTrayButtons only accepts a dictionary of the type ".concat(JSON.stringify(bs))),this)}},{key:"theme",value:function(){return wt(this._callObjectMode,"theme()"),this.properties.theme}},{key:"setTheme",value:function(l){var h=this;return wt(this._callObjectMode,"setTheme()"),new Promise(function(f,y){try{h.validateProperties({theme:l}),h.properties.theme=le({},l),h.sendMessageToCallMachine({action:"set-theme",theme:h.properties.theme});try{h.emitDailyJSEvent({action:U_,theme:h.properties.theme})}catch(m){console.log("could not emit 'theme-updated'",m)}f(h.properties.theme)}catch(m){y(m)}})}},{key:"requestFullscreen",value:(s=se(function*(){if(ve(),this._iframe&&!document.fullscreenElement&&ou())try{(yield this._iframe.requestFullscreen)?this._iframe.requestFullscreen():this._iframe.webkitRequestFullscreen()}catch(l){console.log("could not make video call fullscreen",l)}}),function(){return s.apply(this,arguments)})},{key:"exitFullscreen",value:function(){ve(),document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen()}},{key:"getSidebarView",value:(i=se(function*(){var l=this;return this._callObjectMode?(console.error("getSidebarView is not available in callObject mode"),Promise.resolve(null)):new Promise(function(h){l.sendMessageToCallMachine({action:"get-sidebar-view"},function(f){h(f.view)})})}),function(){return i.apply(this,arguments)})},{key:"setSidebarView",value:function(l){return this._callObjectMode?(console.error("setSidebarView is not available in callObject mode"),this):(this.sendMessageToCallMachine({action:"set-sidebar-view",view:l}),this)}},{key:"room",value:(r=se(function*(){var l=this,h=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).includeRoomConfigDefaults,f=h===void 0||h;return this._accessState.access===ma||this.needsLoad()?this.properties.url?{roomUrlPendingJoin:this.properties.url}:null:new Promise(function(y){l.sendMessageToCallMachine({action:"lib-room-info",includeRoomConfigDefaults:f},function(m){delete m.action,delete m.callbackStamp,y(m)})})}),function(){return r.apply(this,arguments)})},{key:"geo",value:(n=se(function*(){try{var l=yield fetch("https://gs.daily.co/_ks_/x-swsl/:");return{current:(yield l.json()).geo}}catch(h){return console.error("geo lookup failed",h),{current:""}}}),function(){return n.apply(this,arguments)})},{key:"setNetworkTopology",value:(e=se(function*(l){var h=this;return ve(),Ie(this._callState,"setNetworkTopology()"),new Promise(function(f,y){h.sendMessageToCallMachine({action:"set-network-topology",opts:l},function(m){m.error?y({error:m.error}):f({workerId:m.workerId})})})}),function(l){return e.apply(this,arguments)})},{key:"getNetworkTopology",value:(t=se(function*(){var l=this;return new Promise(function(h,f){l.needsLoad()&&h({topology:"none"}),l.sendMessageToCallMachine({action:"get-network-topology"},function(y){y.error?f({error:y.error}):h({topology:y.topology})})})}),function(){return t.apply(this,arguments)})},{key:"setPlayNewParticipantSound",value:function(l){if(ve(),typeof l!="number"&&l!==!0&&l!==!1)throw new Error("argument to setShouldPlayNewParticipantSound should be true, false, or a number, but is ".concat(l));this.sendMessageToCallMachine({action:"daily-method-set-play-ding",arg:l})}},{key:"on",value:function(l,h){return hn.prototype.on.call(this,l,h)}},{key:"once",value:function(l,h){return hn.prototype.once.call(this,l,h)}},{key:"off",value:function(l,h){return hn.prototype.off.call(this,l,h)}},{key:"validateProperties",value:function(l){for(var h in l){if(!er[h])throw new Error("unrecognized property '".concat(h,"'"));if(er[h].validate&&!er[h].validate(l[h],this))throw new Error("property '".concat(h,"': ").concat(er[h].help))}}},{key:"assembleMeetingUrl",value:function(){var l,h,f=le(le({},this.properties),{},{emb:this.callClientId,embHref:encodeURIComponent(window.location.href),proxy:(l=this.properties.dailyConfig)!==null&&l!==void 0&&l.proxyUrl?encodeURIComponent((h=this.properties.dailyConfig)===null||h===void 0?void 0:h.proxyUrl):void 0}),y=f.url.match(/\?/)?"&":"?";return f.url+y+Object.keys(er).filter(function(m){return er[m].queryString&&f[m]!==void 0}).map(function(m){return"".concat(er[m].queryString,"=").concat(f[m])}).join("&")}},{key:"needsLoad",value:function(){return[Jl,Kl,Qn,wn].includes(this._callState)}},{key:"sendMessageToCallMachine",value:function(l,h){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");this._messageChannel.sendMessageToCallMachine(l,h,this.callClientId,this._iframe)}},{key:"forwardPackagedMessageToCallMachine",value:function(l){this._messageChannel.forwardPackagedMessageToCallMachine(l,this._iframe,this.callClientId)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(l){return this._messageChannel.addListenerForPackagedMessagesFromCallMachine(l,this.callClientId)}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(l){this._messageChannel.removeListenerForPackagedMessagesFromCallMachine(l)}},{key:"handleMessageFromCallMachine",value:function(l){switch(l.action){case B_:this.sendMessageToCallMachine(le({action:F_},this.properties));break;case"call-machine-initialized":this._callMachineInitialized=!0;var h={action:Hi,level:"log",code:1011,stats:{event:"bundle load",time:this._bundleLoadTime==="no-op"?0:this._bundleLoadTime,preLoaded:this._bundleLoadTime==="no-op",url:fs(this.properties.dailyConfig)}};this.sendMessageToCallMachine(h),this._delayDuplicateInstanceLog&&this._logDuplicateInstanceAttempt();break;case Ql:this._loadedCallback&&(this._loadedCallback(),this._loadedCallback=null),this.emitDailyJSEvent(l);break;case z_:var f,y=le({},l);delete y.internal,this._maxAppMessageSize=((f=l.internal)===null||f===void 0?void 0:f._maxAppMessageSize)||_a,this._joinedCallback&&(this._joinedCallback(l.participants),this._joinedCallback=null),this.emitDailyJSEvent(y);break;case J_:case K_:if(this._callState===Qn)return;if(l.participant&&l.participant.session_id){var m=l.participant.local?"local":l.participant.session_id;if(this._callObjectMode){var M=this._callMachine().store;gu(l.participant,M),mu(l.participant,M),_u(l.participant,this._participants[m],M)}try{this.maybeParticipantTracksStopped(this._participants[m],l.participant),this.maybeParticipantTracksStarted(this._participants[m],l.participant),this.maybeEventRecordingStopped(this._participants[m],l.participant),this.maybeEventRecordingStarted(this._participants[m],l.participant)}catch(re){console.error("track events error",re)}this.compareEqualForParticipantUpdateEvent(l.participant,this._participants[m])||(this._participants[m]=le({},l.participant),this.toggleParticipantAudioBasedOnNativeAudioFocus(),this.emitDailyJSEvent(l))}break;case X_:if(l.participant&&l.participant.session_id){var q=this._participants[l.participant.session_id];q&&this.maybeParticipantTracksStopped(q,null),delete this._participants[l.participant.session_id],this.emitDailyJSEvent(l)}break;case Y_:pt(this._participantCounts,l.participantCounts)||(this._participantCounts=l.participantCounts,this.emitDailyJSEvent(l));break;case Q_:var W={access:l.access};l.awaitingAccess&&(W.awaitingAccess=l.awaitingAccess),pt(this._accessState,W)||(this._accessState=W,this.emitDailyJSEvent(l));break;case Z_:if(l.meetingSession){this._meetingSessionSummary=l.meetingSession,this.emitDailyJSEvent(l);var g=le(le({},l),{},{action:"meeting-session-updated"});this.emitDailyJSEvent(g)}break;case nu:var _;this._iframe&&!l.preserveIframe&&(this._iframe.src=""),this._updateCallState(wn),this.resetMeetingDependentVars(),this._loadedCallback&&(this._loadedCallback(l.errorMsg),this._loadedCallback=null),l.preserveIframe;var E=Fc(l,av);E!=null&&(_=E.error)!==null&&_!==void 0&&_.details&&(E.error.details=JSON.parse(E.error.details)),this._maybeSendToSentry(l),this._joinedCallback&&(this._joinedCallback(null,E),this._joinedCallback=null),this.emitDailyJSEvent(E);break;case W_:this._callState!==wn&&this._updateCallState(Qn),this.resetMeetingDependentVars(),this._resolveLeave&&(this._resolveLeave(),this._resolveLeave=null),this.emitDailyJSEvent(l);break;case"selected-devices-updated":l.devices&&this.emitDailyJSEvent(l);break;case ky:var A=l.threshold,L=l.quality;A===this._network.threshold&&L===this._network.quality||(this._network.quality=L,this._network.threshold=A,this.emitDailyJSEvent(l));break;case Ey:l&&l.cpuLoadState&&this.emitDailyJSEvent(l);break;case Ty:l&&l.faceCounts!==void 0&&this.emitDailyJSEvent(l);break;case wy:var I=l.activeSpeaker;this._activeSpeaker.peerId!==I.peerId&&(this._activeSpeaker.peerId=I.peerId,this.emitDailyJSEvent({action:l.action,activeSpeaker:this._activeSpeaker}));break;case"show-local-video-changed":if(this._callObjectMode)return;var z=l.show;this._showLocalVideo=z,this.emitDailyJSEvent({action:l.action,show:z});break;case Sy:var U=l.enabled;this._activeSpeakerMode!==U&&(this._activeSpeakerMode=U,this.emitDailyJSEvent({action:l.action,enabled:this._activeSpeakerMode}));break;case ty:case ny:case ry:this._waitingParticipants=l.allWaitingParticipants,this.emitDailyJSEvent({action:l.action,participant:l.participant});break;case Py:pt(this._receiveSettings,l.receiveSettings)||(this._receiveSettings=l.receiveSettings,this.emitDailyJSEvent({action:l.action,receiveSettings:l.receiveSettings}));break;case Iy:if(!pt(this._inputSettings,l.inputSettings)){var B=this._getInputSettings();this._inputSettings=l.inputSettings,this._preloadCache.inputSettings={},pt(B,this._getInputSettings())||this.emitDailyJSEvent({action:l.action,inputSettings:this._getInputSettings()})}break;case"send-settings-updated":pt(this._sendSettings,l.sendSettings)||(this._sendSettings=l.sendSettings,this._preloadCache.sendSettings=null,this.emitDailyJSEvent({action:l.action,sendSettings:l.sendSettings}));break;case"local-audio-level":this._localAudioLevel=l.audioLevel,this._preloadCache.localAudioLevelObserver=null,this.emitDailyJSEvent(l);break;case"remote-participants-audio-level":this._remoteParticipantsAudioLevel=l.participantsAudioLevel,this._preloadCache.remoteParticipantsAudioLevelObserver=null,this.emitDailyJSEvent(l);break;case gy:var R=l.session_id;this._rmpPlayerState[R]=l.playerState,this.emitDailyJSEvent(l);break;case _y:delete this._rmpPlayerState[l.session_id],this.emitDailyJSEvent(l);break;case my:var Y=l.session_id,J=this._rmpPlayerState[Y];J&&this.compareEqualForRMPUpdateEvent(J,l.remoteMediaPlayerState)||(this._rmpPlayerState[Y]=l.remoteMediaPlayerState,this.emitDailyJSEvent(l));break;case"custom-button-click":case"sidebar-view-changed":this.emitDailyJSEvent(l);break;case ey:var Z=this._meetingSessionState.topology!==(l.meetingSessionState&&l.meetingSessionState.topology);this._meetingSessionState=Ea(l.meetingSessionState,this._callObjectMode),(this._callObjectMode||Z)&&this.emitDailyJSEvent(l);break;case yy:this._isScreenSharing=!0,this.emitDailyJSEvent(l);break;case vy:case by:this._isScreenSharing=!1,this.emitDailyJSEvent(l);break;case Zl:case eu:case ly:case uy:case dy:case ay:case oy:case cy:case H_:case V_:case hy:case py:case"test-completed":case Cy:case fy:case My:case Ay:case Oy:case xy:case tu:case Ly:case"dialin-ready":case"dialin-connected":case"dialin-error":case"dialin-stopped":case"dialin-warning":case"dialout-connected":case"dialout-answered":case"dialout-error":case"dialout-stopped":case"dialout-warning":this.emitDailyJSEvent(l);break;case"request-fullscreen":this.requestFullscreen();break;case"request-exit-fullscreen":this.exitFullscreen()}}},{key:"maybeEventRecordingStopped",value:function(l,h){var f="record";l&&(h.local||h[f]!==!1||l[f]===h[f]||this.emitDailyJSEvent({action:eu}))}},{key:"maybeEventRecordingStarted",value:function(l,h){var f="record";l&&(h.local||h[f]!==!0||l[f]===h[f]||this.emitDailyJSEvent({action:Zl}))}},{key:"maybeEventTrackStopped",value:function(l,h,f,y){l&&(l.readyState!=="ended"&&h&&l.id===h.id||this.emitDailyJSEvent({action:sy,track:l,participant:f,type:y}))}},{key:"maybeEventTrackStarted",value:function(l,h,f,y){h&&(l&&l.readyState!=="ended"&&h.id===l.id||this.emitDailyJSEvent({action:iy,track:h,participant:f,type:y}))}},{key:"maybeParticipantTracksStopped",value:function(l,h){if(l)for(var f in l.tracks)this.maybeEventTrackStopped(l.tracks[f].track,h&&h.tracks[f]?h.tracks[f].track:null,h,f)}},{key:"maybeParticipantTracksStarted",value:function(l,h){if(h)for(var f in h.tracks)this.maybeEventTrackStarted(l&&l.tracks[f]?l.tracks[f].track:null,h.tracks[f].track,h,f)}},{key:"compareEqualForRMPUpdateEvent",value:function(l,h){var f,y;return l.state===h.state&&((f=l.settings)===null||f===void 0?void 0:f.volume)===((y=h.settings)===null||y===void 0?void 0:y.volume)}},{key:"emitDailyJSEvent",value:function(l){try{l.callClientId=this.callClientId,this.emit(l.action,l)}catch(h){console.log("could not emit",l,h)}}},{key:"compareEqualForParticipantUpdateEvent",value:function(l,h){return!!pt(l,h)&&(!l.videoTrack||!h.videoTrack||l.videoTrack.id===h.videoTrack.id&&l.videoTrack.muted===h.videoTrack.muted&&l.videoTrack.enabled===h.videoTrack.enabled)&&(!l.audioTrack||!h.audioTrack||l.audioTrack.id===h.audioTrack.id&&l.audioTrack.muted===h.audioTrack.muted&&l.audioTrack.enabled===h.audioTrack.enabled)}},{key:"nativeUtils",value:function(){return Te()?typeof DailyNativeUtils>"u"?(console.warn("in React Native, DailyNativeUtils is expected to be available"),null):DailyNativeUtils:null}},{key:"updateIsPreparingToJoin",value:function(l){this._updateCallState(this._callState,l)}},{key:"_updateCallState",value:function(l){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._isPreparingToJoin;if(l!==this._callState||h!==this._isPreparingToJoin){var f=this._callState,y=this._isPreparingToJoin;this._callState=l,this._isPreparingToJoin=h;var m=this._callState===ir;this.updateShowAndroidOngoingMeetingNotification(m);var M=rs(f,y),q=rs(this._callState,this._isPreparingToJoin);M!==q&&(this.updateKeepDeviceAwake(q),this.updateDeviceAudioMode(q),this.updateNoOpRecordingEnsuringBackgroundContinuity(q))}}},{key:"resetMeetingDependentVars",value:function(){this._participants={},this._participantCounts=Eu,this._waitingParticipants={},this._activeSpeaker={},this._activeSpeakerMode=!1,this._didPreAuth=!1,this._accessState={access:ma},this._finalSummaryOfPrevSession=this._meetingSessionSummary,this._meetingSessionSummary={},this._meetingSessionState=Ea(Cu,this._callObjectMode),this._isScreenSharing=!1,this._receiveSettings={},this._inputSettings=void 0,this._sendSettings={},this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this._maxAppMessageSize=_a,this._callMachineInitialized=!1,this._bundleLoadTime=void 0,this._preloadCache}},{key:"updateKeepDeviceAwake",value:function(l){Te()&&this.nativeUtils().setKeepDeviceAwake(l,this.callClientId)}},{key:"updateDeviceAudioMode",value:function(l){if(Te()&&!this.disableReactNativeAutoDeviceManagement("audio")){var h=l?this._nativeInCallAudioMode:"idle";this.nativeUtils().setAudioMode(h)}}},{key:"updateShowAndroidOngoingMeetingNotification",value:function(l){if(Te()&&this.nativeUtils().setShowOngoingMeetingNotification){var h,f,y,m;if(this.properties.reactNativeConfig&&this.properties.reactNativeConfig.androidInCallNotification){var M=this.properties.reactNativeConfig.androidInCallNotification;h=M.title,f=M.subtitle,y=M.iconName,m=M.disableForCustomOverride}m&&(l=!1),this.nativeUtils().setShowOngoingMeetingNotification(l,h,f,y,this.callClientId)}}},{key:"updateNoOpRecordingEnsuringBackgroundContinuity",value:function(l){Te()&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity(l)}},{key:"toggleParticipantAudioBasedOnNativeAudioFocus",value:function(){var l,h;if(Te()){var f=(l=this._callMachine())===null||l===void 0||(h=l.store)===null||h===void 0?void 0:h.getState();for(var y in f==null?void 0:f.streams){var m=f.streams[y];m&&m.pendingTrack&&m.pendingTrack.kind==="audio"&&(m.pendingTrack.enabled=this._hasNativeAudioFocus)}}}},{key:"disableReactNativeAutoDeviceManagement",value:function(l){return this.properties.reactNativeConfig&&this.properties.reactNativeConfig.disableAutoDeviceManagement&&this.properties.reactNativeConfig.disableAutoDeviceManagement[l]}},{key:"absoluteUrl",value:function(l){if(l!==void 0){var h=document.createElement("a");return h.href=l,h.href}}},{key:"sayHello",value:function(){var l="hello, world.";return console.log(l),l}},{key:"_logUseAfterDestroy",value:function(){var l=Object.values(Zn)[0];if(this.needsLoad())if(l&&!l.needsLoad()){var h={action:Hi,level:"error",code:this.strictMode?9995:9997};l.sendMessageToCallMachine(h)}else this.strictMode||console.error("You are are attempting to use a call instance that was previously destroyed, which is unsupported. Please remove `strictMode: false` from your constructor properties to enable strict mode to track down and fix this unsupported usage.");else{var f={action:Hi,level:"error",code:this.strictMode?9995:9997};this._messageChannel.sendMessageToCallMachine(f,null,this.callClientId,this._iframe)}}},{key:"_logDuplicateInstanceAttempt",value:function(){for(var l=0,h=Object.values(Zn);l<h.length;l++){var f=h[l];f._callMachineInitialized?(f.sendMessageToCallMachine({action:Hi,level:"warn",code:this.allowMultipleCallInstances?9993:9992}),f._delayDuplicateInstanceLog=!1):f._delayDuplicateInstanceLog=!0}}},{key:"_maybeSendToSentry",value:function(l){var h,f,y,m,M,q;if(!((h=l.error)!==null&&h!==void 0&&h.type&&(![j_,N_,Yl].includes(l.error.type)||l.error.type===Yl&&l.error.msg.includes("deleted")))){var W=(f=this.properties)!==null&&f!==void 0&&f.url?new URL(this.properties.url):void 0,g="production";W&&W.host.includes(".staging.daily")&&(g="staging");var _,E,A,L,I,z=[o_(),s_(),M_(),E_(),L_(),I_(),c_(),P_()].filter(function(re){return!["BrowserApiErrors","Breadcrumbs","GlobalHandlers"].includes(re.name)}),U=new h_({dsn:"https://f10f1c81e5d44a4098416c0867a8b740@o77906.ingest.sentry.io/168844",transport:y_,stackParser:C_,integrations:z,environment:g}),B=new Bn;if(B.setClient(U),U.init(),this.session_id&&B.setExtra("sessionId",this.session_id),this.properties){var R=le({},this.properties);R.userName=R.userName?"[Filtered]":void 0,R.userData=R.userData?"[Filtered]":void 0,R.token=R.token?"[Filtered]":void 0,B.setExtra("properties",R)}if(W){var Y=W.searchParams.get("domain");if(!Y){var J=W.host.match(/(.*?)\./);Y=J&&J[1]||""}Y&&B.setTag("domain",Y)}l.error&&(B.setTag("fatalErrorType",l.error.type),B.setExtra("errorDetails",l.error.details),!((_=l.error.details)===null||_===void 0)&&_.uri&&B.setTag("serverAddress",l.error.details.uri),!((E=l.error.details)===null||E===void 0)&&E.workerGroup&&B.setTag("workerGroup",l.error.details.workerGroup),!((A=l.error.details)===null||A===void 0)&&A.geoGroup&&B.setTag("geoGroup",l.error.details.geoGroup),!((L=l.error.details)===null||L===void 0)&&L.on&&B.setTag("connectionAttempt",l.error.details.on),(I=l.error.details)!==null&&I!==void 0&&I.bundleUrl&&(B.setTag("bundleUrl",l.error.details.bundleUrl),B.setTag("bundleError",l.error.details.sourceError.type))),B.setTags({callMode:this._callObjectMode?Te()?"reactNative":(y=this.properties)!==null&&y!==void 0&&(m=y.dailyConfig)!==null&&m!==void 0&&(M=m.callMode)!==null&&M!==void 0&&M.includes("prebuilt")?this.properties.dailyConfig.callMode:"custom":"prebuilt-frame",version:ne.version()});var Z=((q=l.error)===null||q===void 0?void 0:q.msg)||l.errorMsg;B.captureException(new Error(Z))}}},{key:"_callMachine",value:function(){var l,h,f;return(l=window._daily)===null||l===void 0||(h=l.instances)===null||h===void 0||(f=h[this.callClientId])===null||f===void 0?void 0:f.callMachine}}],[{key:"supportedBrowser",value:function(){if(Te())return{supported:!0,mobile:!0,name:"React Native",version:null,supportsScreenShare:!0,supportsSfu:!0,supportsVideoProcessing:!1,supportsAudioProcessing:!1};var l=Cm.getParser(Dt());return{supported:!!cu(),mobile:l.getPlatformType()==="mobile",name:l.getBrowserName(),version:l.getBrowserVersion(),supportsFullscreen:!!ou(),supportsScreenShare:!!Ny(),supportsSfu:!!cu(),supportsVideoProcessing:Gf(),supportsAudioProcessing:zf()}}},{key:"version",value:function(){return"0.73.0"}},{key:"createCallObject",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return l.layout="none",new ne(null,l)}},{key:"wrap",value:function(l){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ve(),!l||!l.contentWindow||typeof l.src!="string")throw new Error("DailyIframe::Wrap needs an iframe-like first argument");return h.layout||(h.customLayout?h.layout="custom-v1":h.layout="browser"),new ne(l,h)}},{key:"createFrame",value:function(l,h){var f,y;ve(),l&&h?(f=l,y=h):l&&l.append?(f=l,y={}):(f=document.body,y=l||{});var m=y.iframeStyle;m||(m=f===document.body?{position:"fixed",border:"1px solid black",backgroundColor:"white",width:"375px",height:"450px",right:"1em",bottom:"1em"}:{border:0,width:"100%",height:"100%"});var M=document.createElement("iframe");window.navigator&&window.navigator.userAgent.match(/Chrome\/61\./)?M.allow="microphone, camera":M.allow="microphone; camera; autoplay; display-capture; screen-wake-lock",M.style.visibility="hidden",f.appendChild(M),M.style.visibility=null,Object.keys(m).forEach(function(q){return M.style[q]=m[q]}),y.layout||(y.customLayout?y.layout="custom-v1":y.layout="browser");try{return new ne(M,y)}catch(q){throw f.removeChild(M),q}}},{key:"createTransparentFrame",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ve();var h=document.createElement("iframe");return h.allow="microphone; camera; autoplay",h.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
      pointer-events: none;
    `,document.body.appendChild(h),l.layout||(l.layout="custom-v1"),ne.wrap(h,l)}},{key:"getCallInstance",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;return l?Zn[l]:Object.values(Zn)[0]}}]),ne}();function Sr(t,e){var n={};for(var r in t)if(t[r]instanceof MediaStreamTrack)n[r]=ei;else if(r==="dailyConfig"){if(t[r].modifyLocalSdpHook){var i=window._daily.instances[e].customCallbacks||{};i.modifyLocalSdpHook=t[r].modifyLocalSdpHook,window._daily.instances[e].customCallbacks=i,delete t[r].modifyLocalSdpHook}if(t[r].modifyRemoteSdpHook){var s=window._daily.instances[e].customCallbacks||{};s.modifyRemoteSdpHook=t[r].modifyRemoteSdpHook,window._daily.instances[e].customCallbacks=s,delete t[r].modifyRemoteSdpHook}n[r]=t[r]}else n[r]=t[r];return n}function Ie(t){var e=arguments.length>2?arguments[2]:void 0;if(t!==ir){var n="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," only supported after join.");throw e&&(n+=" ".concat(e)),console.error(n),new Error(n)}}function rs(t,e){return[so,ir].includes(t)||e}function ka(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"This daily-js method",r=arguments.length>3?arguments[3]:void 0;if(rs(t,e)){var i="".concat(n," not supported after joining a meeting.");throw r&&(i+=" ".concat(r)),console.error(i),new Error(i)}}function zi(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method",n=arguments.length>2?arguments[2]:void 0;if(!t){var r="".concat(e,arguments.length>3&&arguments[3]!==void 0&&arguments[3]?" requires preAuth() or startCamera() to initialize call state.":" requires preAuth(), startCamera(), or join() to initialize call state.");throw n&&(r+=" ".concat(n)),console.error(r),new Error(r)}}function Ca(t){if(t){var e="A pre-call quality test is in progress. Please try ".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," again once testing has completed. Use stopTestCallQuality() to end it early.");throw console.error(e),new Error(e)}}function Nt(t){if(!t){var e="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," is only supported on custom callObject instances");throw console.error(e),new Error(e)}}function wt(t){if(t){var e="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," is only supported as part of Daily's Prebuilt");throw console.error(e),new Error(e)}}function ve(){if(Te())throw new Error("This daily-js method is not currently supported in React Native")}function Kr(){if(!Te())throw new Error("This daily-js method is only supported in React Native")}function Zf(t){if(t===void 0)return!0;var e;if(typeof t=="string")e=t;else try{e=JSON.stringify(t),pt(JSON.parse(e),t)||console.warn("The userData provided will be modified when serialized.")}catch(n){throw Error("userData must be serializable to JSON: ".concat(n))}if(e.length>4096)throw Error("userData is too large (".concat(e.length," characters). Maximum size suppported is ").concat(4096,"."));return!0}function eh(t,e){for(var n=e.allowAllParticipantsKey,r=function(p){var v=["local"];return n||v.push("*"),p&&!v.includes(p)},i=function(p){return!!(p.layer===void 0||Number.isInteger(p.layer)&&p.layer>=0||p.layer==="inherit")},s=function(p){return!!p&&!(p.video&&!i(p.video))&&!(p.screenVideo&&!i(p.screenVideo))},a=0,o=Object.entries(t);a<o.length;a++){var c=dr(o[a],2),u=c[0],d=c[1];if(!r(u)||!s(d))return!1}return!0}function th(t){return Le(t)==="object"&&!(t.video&&(Le(t.video)!=="object"||!function(i){var s=["type","config"];return!i||Le(i)!=="object"||!function(a){return typeof a!="string"?!1:Object.values(ns).includes(a)?!0:(console.error("inputSettings video processor type invalid"),!1)}(i.type)||i.config&&(Le(i.config)!=="object"||!function(a,o){var c=Object.keys(o);if(c.length===0)return!0;var u="invalid object in inputSettings -> video -> processor -> config";switch(a){case ns.BGBLUR:return c.length>1||c[0]!=="strength"?(console.error(u),!1):!(typeof o.strength!="number"||o.strength<=0||o.strength>1||isNaN(o.strength))||(console.error("".concat(u,"; expected: {0 < strength <= 1}, got: ").concat(o.strength)),!1);case ns.BGIMAGE:return!(o.source!==void 0&&!function(d){if(d.source==="default")return d.type="default",!0;if(d.source instanceof ArrayBuffer)return!0;if(hs(d.source))return d.type="url",!!function(w){var b=new URL(w),S=b.pathname;if(b.protocol==="data:")try{var D=S.substring(S.indexOf(":")+1,S.indexOf(";")).split("/")[1];return va.includes(D)}catch($){return console.error("failed to deduce blob content type",$),!1}var O=S.split(".").at(-1).toLowerCase().trim();return va.includes(O)}(d.source)||(console.error("invalid image type; supported types: [".concat(va.join(", "),"]")),!1);return p=d.source,v=Number(p),isNaN(v)||!Number.isInteger(v)||v<=0||v>10?(console.error("invalid image selection; must be an int, > 0, <= ".concat(10)),!1):(d.type="daily-preselect",!0);var p,v}(o));default:return!0}}(i.type,i.config))?!1:(Object.keys(i).filter(function(a){return!s.includes(a)}).forEach(function(a){console.warn("invalid key inputSettings -> video -> processor : ".concat(a)),delete i[a]}),!0)}(t.video.processor)))&&!(t.audio&&(Le(t.audio)!=="object"||(n=t.audio.processor,r=["type"],!n||Le(n)!=="object"||(Object.keys(n).filter(function(i){return!r.includes(i)}).forEach(function(i){console.warn("invalid key inputSettings -> audio -> processor : ".concat(i)),delete n[i]}),e=n.type,typeof e!="string"||!Object.values(Hf).includes(e)&&(console.error("inputSettings audio processor type invalid"),1)))));var e,n,r}function nh(t,e){var n,r=[];t.video&&!Gf((n=e==null?void 0:e.useLegacyVideoProcessor)!==null&&n!==void 0&&n)&&(delete t.video,r.push("video")),t.audio&&!zf()&&(delete t.audio,r.push("audio")),r.length>0&&console.error("Ignoring settings for browser- or platform-unsupported input processor(s): ".concat(r.join(", ")))}function ho(){var t=Object.values(ns).join(" | "),e=Object.values(Hf).join(" | ");return"inputSettings must be of the form: { video?: { processor: { type: [ ".concat(t," ], config?: {} } }, audio?: { processor: {type: [ ").concat(e," ] } } }")}function rh(t){var e=t.allowAllParticipantsKey;return"receiveSettings must be of the form { [<remote participant id> | ".concat(R_).concat(e?' | "'.concat("*",'"'):"","]: ")+'{ [video: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]], [screenVideo: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]] }}}'}function ih(){return"customIntegrations should be an object of type ".concat(JSON.stringify(fo),".")}function sh(t){if(t&&Le(t)!=="object"||Array.isArray(t))return console.error("customTrayButtons should be an Object of the type ".concat(JSON.stringify(bs),".")),!1;if(t)for(var e=0,n=Object.entries(t);e<n.length;e++)for(var r=dr(n[e],1)[0],i=0,s=Object.entries(t[r]);i<s.length;i++){var a=dr(s[i],2),o=a[0],c=a[1],u=bs.id[o];if(!u)return console.error("customTrayButton does not support key ".concat(o)),!1;switch(o){case"iconPath":case"iconPathDarkMode":if(!hs(c))return console.error("customTrayButton ".concat(o," should be a url.")),!1;break;case"visualState":if(!["default","sidebar-open","active"].includes(c))return console.error("customTrayButton ".concat(o," should be ").concat(u,". Got: ").concat(c)),!1;break;default:if(Le(c)!==u)return console.error("customTrayButton ".concat(o," should be a ").concat(u,".")),!1}}return!0}function ah(t){if(!t||t&&Le(t)!=="object"||Array.isArray(t))return console.error(ih()),!1;for(var e=function(p){return"".concat(p," should be ").concat(fo.id[p])},n=function(p,v){return console.error("customIntegration ".concat(p,": ").concat(v))},r=0,i=Object.entries(t);r<i.length;r++){var s=dr(i[r],1)[0];if(!("label"in t[s]))return n(s,"label is required"),!1;if(!("location"in t[s]))return n(s,"location is required"),!1;if(!("src"in t[s])&&!("srcdoc"in t[s]))return n(s,"src or srcdoc is required"),!1;for(var a=0,o=Object.entries(t[s]);a<o.length;a++){var c=dr(o[a],2),u=c[0],d=c[1];switch(u){case"allow":case"csp":case"name":case"referrerPolicy":case"sandbox":if(typeof d!="string")return n(s,e(u)),!1;break;case"iconURL":if(!hs(d))return n(s,"".concat(u," should be a url")),!1;break;case"src":if("srcdoc"in t[s])return n(s,"cannot have both src and srcdoc"),!1;if(!hs(d))return n(s,'src "'.concat(d,'" is not a valid URL')),!1;break;case"srcdoc":if("src"in t[s])return n(s,"cannot have both src and srcdoc"),!1;if(typeof d!="string")return n(s,e(u)),!1;break;case"location":if(!["main","sidebar"].includes(d))return n(s,e(u)),!1;break;case"controlledBy":if(d!=="*"&&d!=="owners"&&(!Array.isArray(d)||d.some(function(p){return typeof p!="string"})))return n(s,e(u)),!1;break;case"shared":if((!Array.isArray(d)||d.some(function(p){return typeof p!="string"}))&&d!=="owners"&&typeof d!="boolean")return n(s,e(u)),!1;break;default:if(!fo.id[u])return console.error("customIntegration does not support key ".concat(u)),!1}}}return!0}function oh(t,e){if(e===void 0)return!1;switch(Le(e)){case"string":return Le(t)===e;case"object":if(Le(t)!=="object")return!1;for(var n in t)if(!oh(t[n],e[n]))return!1;return!0;default:return!1}}function Ou(t,e){var n=t.sessionId,r=t.toEndPoint,i=t.useSipRefer;if(!n||!r)throw new Error("".concat(e,"() requires a sessionId and toEndPoint"));if(typeof n!="string"||typeof r!="string")throw new Error("Invalid paramater: sessionId and toEndPoint must be of type string");if(i&&!r.startsWith("sip:"))throw new Error('"toEndPoint" must be a "sip" address');if(!r.startsWith("sip:")&&!r.startsWith("+"))throw new Error("toEndPoint: ".concat(r,' must starts with either "sip:" or "+"'))}function xu(t){if(Le(t)!=="object")throw new Error('RemoteMediaPlayerSettings: must be "object" type');if(t.state&&!Object.values(ao).includes(t.state))throw new Error("Invalid value for RemoteMediaPlayerSettings.state, valid values are: "+JSON.stringify(ao));if(t.volume){if(typeof t.volume!="number")throw new Error('RemoteMediaPlayerSettings.volume: must be "number" type');if(t.volume<0||t.volume>2)throw new Error("RemoteMediaPlayerSettings.volume: must be between 0.0 - 2.0")}}function Lu(t,e,n){return!(typeof t!="number"||t<e||t>n)}function Ea(t,e){return t&&!e&&delete t.data,t}function lv(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}var uv={};lv(uv,"DailyTransport",()=>ch);class ch extends kf{constructor({dailyFactoryOptions:e={}}={}){super(),this._botId="",this._selectedCam={},this._selectedMic={},this._selectedSpeaker={},this._dailyFactoryOptions=e}initialize(e,n){this._callbacks=e.callbacks??{},this._onMessage=n;const r=Au.getCallInstance();r&&r.destroy(),this._daily=Au.createCallObject({...this._dailyFactoryOptions,startVideoOff:e.enableCam!=!0,startAudioOff:e.enableMic==!1,allowMultipleCallInstances:!0}),this.attachEventListeners(),this.state="disconnected",De.debug("[RTVI Transport] Initialized")}get state(){return this._state}set state(e){var n,r;this._state!==e&&(this._state=e,(r=(n=this._callbacks).onTransportStateChanged)==null||r.call(n,e))}async getAllCams(){const{devices:e}=await this._daily.enumerateDevices();return e.filter(n=>n.kind==="videoinput")}updateCam(e){this._daily.setInputDevicesAsync({videoDeviceId:e}).then(n=>{this._selectedCam=n.camera})}get selectedCam(){return this._selectedCam}async getAllMics(){const{devices:e}=await this._daily.enumerateDevices();return e.filter(n=>n.kind==="audioinput")}updateMic(e){this._daily.setInputDevicesAsync({audioDeviceId:e}).then(n=>{this._selectedMic=n.mic})}get selectedMic(){return this._selectedMic}async getAllSpeakers(){const{devices:e}=await this._daily.enumerateDevices();return e.filter(n=>n.kind==="audiooutput")}updateSpeaker(e){this._daily.setOutputDeviceAsync({outputDeviceId:e}).then(n=>{this._selectedSpeaker=n.speaker})}get selectedSpeaker(){return this._selectedSpeaker}enableMic(e){this._daily.setLocalAudio(e)}get isMicEnabled(){return this._daily.localAudio()}enableCam(e){this._daily.setLocalVideo(e)}get isCamEnabled(){return this._daily.localVideo()}enableScreenShare(e){e?this._daily.startScreenShare():this._daily.stopScreenShare()}get isSharingScreen(){return this._daily.localScreenAudio()||this._daily.localScreenVideo()}tracks(){var i,s,a,o,c,u,d,p,v,w,b,S,D,O,$,j,k;const e=((i=this._daily)==null?void 0:i.participants())??{},n=e==null?void 0:e[this._botId],r={local:{audio:(o=(a=(s=e==null?void 0:e.local)==null?void 0:s.tracks)==null?void 0:a.audio)==null?void 0:o.persistentTrack,screenAudio:(d=(u=(c=e==null?void 0:e.local)==null?void 0:c.tracks)==null?void 0:u.screenAudio)==null?void 0:d.persistentTrack,screenVideo:(w=(v=(p=e==null?void 0:e.local)==null?void 0:p.tracks)==null?void 0:v.screenVideo)==null?void 0:w.persistentTrack,video:(D=(S=(b=e==null?void 0:e.local)==null?void 0:b.tracks)==null?void 0:S.video)==null?void 0:D.persistentTrack}};return n&&(r.bot={audio:($=(O=n==null?void 0:n.tracks)==null?void 0:O.audio)==null?void 0:$.persistentTrack,video:(k=(j=n==null?void 0:n.tracks)==null?void 0:j.video)==null?void 0:k.persistentTrack}),r}async initDevices(){var a,o,c,u,d,p,v,w,b,S,D,O;if(!this._daily)throw new It("Transport instance not initialized");this.state="initializing";const e=await this._daily.startCamera(),{devices:n}=await this._daily.enumerateDevices(),r=n.filter($=>$.kind==="videoinput"),i=n.filter($=>$.kind==="audioinput"),s=n.filter($=>$.kind==="audiooutput");(o=(a=this._callbacks).onAvailableCamsUpdated)==null||o.call(a,r),(u=(c=this._callbacks).onAvailableMicsUpdated)==null||u.call(c,i),(p=(d=this._callbacks).onAvailableSpeakersUpdated)==null||p.call(d,s),this._selectedCam=e.camera,(w=(v=this._callbacks).onCamUpdated)==null||w.call(v,e.camera),this._selectedMic=e.mic,(S=(b=this._callbacks).onMicUpdated)==null||S.call(b,e.mic),this._selectedSpeaker=e.speaker,(O=(D=this._callbacks).onSpeakerUpdated)==null||O.call(D,e.speaker),this._daily.isLocalAudioLevelObserverRunning()||await this._daily.startLocalAudioLevelObserver(100),this._daily.isRemoteParticipantsAudioLevelObserverRunning()||await this._daily.startRemoteParticipantsAudioLevelObserver(100),this.state="initialized"}async connect(e,n){var r,i,s;if(!this._daily)throw new It("Transport instance not initialized");if(!n.signal.aborted){this.state="connecting";try{await this._daily.join({url:e.room_url,token:e.token});const a=await this._daily.room();a&&"id"in a&&(this._expiry=(r=a.config)==null?void 0:r.exp)}catch{throw this.state="error",new gf}n.signal.aborted||(this.state="connected",(s=(i=this._callbacks).onConnected)==null||s.call(i))}}async sendReadyMessage(){return new Promise(e=>{(async()=>this._daily.on("track-started",n=>{var r;(r=n.participant)!=null&&r.local||(this.state="ready",this.sendMessage(Ye.clientReady()),e())}))()})}attachEventListeners(){this._daily.on("available-devices-updated",this.handleAvailableDevicesUpdated.bind(this)),this._daily.on("selected-devices-updated",this.handleSelectedDevicesUpdated.bind(this)),this._daily.on("track-started",this.handleTrackStarted.bind(this)),this._daily.on("track-stopped",this.handleTrackStopped.bind(this)),this._daily.on("participant-joined",this.handleParticipantJoined.bind(this)),this._daily.on("participant-left",this.handleParticipantLeft.bind(this)),this._daily.on("local-audio-level",this.handleLocalAudioLevel.bind(this)),this._daily.on("remote-participants-audio-level",this.handleRemoteAudioLevel.bind(this)),this._daily.on("app-message",this.handleAppMessage.bind(this)),this._daily.on("left-meeting",this.handleLeftMeeting.bind(this)),this._daily.on("nonfatal-error",this.handleNonFatalError.bind(this))}async disconnect(){this._daily.stopLocalAudioLevelObserver(),this._daily.stopRemoteParticipantsAudioLevelObserver(),await this._daily.leave(),await this._daily.destroy()}sendMessage(e){this._daily.sendAppMessage(e,"*")}handleAppMessage(e){e.data.label==="rtvi-ai"&&this._onMessage({id:e.data.id,type:e.data.type,data:e.data.data})}handleAvailableDevicesUpdated(e){var n,r,i,s,a,o;(r=(n=this._callbacks).onAvailableCamsUpdated)==null||r.call(n,e.availableDevices.filter(c=>c.kind==="videoinput")),(s=(i=this._callbacks).onAvailableMicsUpdated)==null||s.call(i,e.availableDevices.filter(c=>c.kind==="audioinput")),(o=(a=this._callbacks).onAvailableSpeakersUpdated)==null||o.call(a,e.availableDevices.filter(c=>c.kind==="audiooutput"))}handleSelectedDevicesUpdated(e){var n,r,i,s,a,o,c,u,d;((n=this._selectedCam)==null?void 0:n.deviceId)!==e.devices.camera&&(this._selectedCam=e.devices.camera,(i=(r=this._callbacks).onCamUpdated)==null||i.call(r,e.devices.camera)),((s=this._selectedMic)==null?void 0:s.deviceId)!==e.devices.mic&&(this._selectedMic=e.devices.mic,(o=(a=this._callbacks).onMicUpdated)==null||o.call(a,e.devices.mic)),((c=this._selectedSpeaker)==null?void 0:c.deviceId)!==e.devices.speaker&&(this._selectedSpeaker=e.devices.speaker,(d=(u=this._callbacks).onSpeakerUpdated)==null||d.call(u,e.devices.speaker))}handleTrackStarted(e){var n,r,i,s;e.type==="screenAudio"||e.type==="screenVideo"?(r=(n=this._callbacks).onScreenTrackStarted)==null||r.call(n,e.track,e.participant?tr(e.participant):void 0):(s=(i=this._callbacks).onTrackStarted)==null||s.call(i,e.track,e.participant?tr(e.participant):void 0)}handleTrackStopped(e){var n,r,i,s;e.type==="screenAudio"||e.type==="screenVideo"?(r=(n=this._callbacks).onScreenTrackStopped)==null||r.call(n,e.track,e.participant?tr(e.participant):void 0):(s=(i=this._callbacks).onTrackStopped)==null||s.call(i,e.track,e.participant?tr(e.participant):void 0)}handleParticipantJoined(e){var r,i,s,a;const n=tr(e.participant);(i=(r=this._callbacks).onParticipantJoined)==null||i.call(r,n),!n.local&&(this._botId=e.participant.session_id,(a=(s=this._callbacks).onBotConnected)==null||a.call(s,n))}handleParticipantLeft(e){var r,i,s,a;const n=tr(e.participant);(i=(r=this._callbacks).onParticipantLeft)==null||i.call(r,n),!n.local&&(this._botId="",(a=(s=this._callbacks).onBotDisconnected)==null||a.call(s,n))}handleLocalAudioLevel(e){var n,r;(r=(n=this._callbacks).onLocalAudioLevel)==null||r.call(n,e.audioLevel)}handleRemoteAudioLevel(e){var i,s;const n=this._daily.participants(),r=Object.keys(e.participantsAudioLevel);for(let a=0;a<r.length;a++){const o=r[a],c=e.participantsAudioLevel[o];(s=(i=this._callbacks).onRemoteAudioLevel)==null||s.call(i,c,tr(n[o]))}}handleLeftMeeting(){var e,n;this.state="disconnecting",this._botId="",(n=(e=this._callbacks).onDisconnected)==null||n.call(e)}handleNonFatalError(e){var n,r;switch(e.type){case"screen-share-error":(r=(n=this._callbacks).onScreenShareError)==null||r.call(n,e.errorMsg);break}}}const tr=t=>({id:t.user_id,local:t.local,name:t.user_name});/**!
 * audioMotion-analyzer
 * High-resolution real-time graphic audio spectrum analyzer JS module
 *
 * @version 4.5.0
 * @author  Henrique Avila Vianna <hvianna@gmail.com> <https://henriquevianna.com>
 * @license AGPL-3.0-or-later
 */const dv="4.5.0",Wo=Math.PI,kr=2*Wo,Ta=Wo/2,Pu=8.17579892,Iu="dual-combined",Wi="dual-horizontal",cn="single",Kt="dual-vertical",Du="bar-index",Ru="bar-level",is="gradient",Nu=60,ju="click",fv="fullscreenchange",lh="resize",hv="#111",uh="",Bu="A",Fu="B",Uu="C",$u="D",qu="468",Ji="sans-serif",pv="#0f0",gv="#7f7f7f22",Cr=10,Hu="create",Vu="fschange",mv="lores",_v=lh,Ma="user",yv="#000c",Gu="#fff",vv="#4f4",zu="#888",bv="#555",Aa="bark",Xr="linear",Tr="log",Oa="mel",Wu=["#a35","#c66","#e94","#ed0","#9d5","#4d8","#2cb","#0bc","#09c","#36b"],dh=[["classic",{colorStops:["red",{color:"yellow",level:.85,pos:.6},{color:"lime",level:.475}]}],["prism",{colorStops:Wu}],["rainbow",{dir:"h",colorStops:["#817",...Wu,"#639"]}],["orangered",{bgColor:"#3e2f29",colorStops:["OrangeRed"]}],["steelblue",{bgColor:"#222c35",colorStops:["SteelBlue"]}]],Yr={alphaBars:!1,ansiBands:!1,barSpace:.1,bgAlpha:.7,channelLayout:cn,colorMode:is,fadePeaks:!1,fftSize:8192,fillAlpha:1,frequencyScale:Tr,gradient:dh[0][0],gravity:3.8,height:void 0,ledBars:!1,linearAmplitude:!1,linearBoost:1,lineWidth:0,loRes:!1,lumiBars:!1,maxDecibels:-25,maxFPS:0,maxFreq:22e3,minDecibels:-85,minFreq:20,mirror:0,mode:0,noteLabels:!1,outlineBars:!1,overlay:!1,peakFadeTime:750,peakHoldTime:500,peakLine:!1,radial:!1,radialInvert:!1,radius:.3,reflexAlpha:.15,reflexBright:1,reflexFit:!0,reflexRatio:0,roundBars:!1,showBgColor:!0,showFPS:!1,showPeaks:!0,showScaleX:!0,showScaleY:!1,smoothing:.5,spinSpeed:0,splitGradient:!1,start:!0,trueLeds:!1,useCanvas:!0,volume:1,weightingFilter:uh,width:void 0},wv=["ERR_AUDIO_CONTEXT_FAIL","Could not create audio context. Web Audio API not supported?"],Sv=["ERR_INVALID_AUDIO_CONTEXT","Provided audio context is not valid"],kv=["ERR_UNKNOWN_GRADIENT","Unknown gradient"],xa=["ERR_FREQUENCY_TOO_LOW","Frequency values must be >= 1"],Cv=["ERR_INVALID_MODE","Invalid mode"],Ev=["ERR_REFLEX_OUT_OF_RANGE","Reflex ratio must be >= 0 and < 1"],Tv=["ERR_INVALID_AUDIO_SOURCE","Audio source must be an instance of HTMLMediaElement or AudioNode"],Mv=["ERR_GRADIENT_INVALID_NAME","Gradient name must be a non-empty string"],Av=["ERR_GRADIENT_NOT_AN_OBJECT","Gradient options must be an object"],Ov=["ERR_GRADIENT_MISSING_COLOR","Gradient colorStops must be a non-empty array"];class Ot extends Error{constructor(e,n){const[r,i]=e;super(i+(n!==void 0?`: ${n}`:"")),this.name="AudioMotionError",this.code=r}}const Ju=(t,e)=>console.warn(`${t} is deprecated. Use ${e} instead.`),Ku=t=>{for(const e in t)return!1;return!0},Ki=(t,e,n="toLowerCase")=>e[Math.max(0,e.indexOf((""+t)[n]()))],xv=(t,e,n,r,i)=>e+(r-e)*(i-t)/(n-t);Array.prototype.findLastIndex||(Array.prototype.findLastIndex=function(t){let e=this.length;for(;e-- >0;)if(t(this[e]))return e;return-1});class Lv{constructor(e,n={}){this._ready=!1,this._aux={},this._canvasGradients=[],this._destroyed=!1,this._energy={val:0,peak:0,hold:0},this._flg={},this._fps=0,this._gradients={},this._last=0,this._outNodes=[],this._ownContext=!1,this._selectedGrads=[],this._sources=[],e instanceof Element||(Ku(n)&&!Ku(e)&&(n=e),e=null),this._ownCanvas=!(n.canvas instanceof HTMLCanvasElement);const r=this._ownCanvas?document.createElement("canvas"):n.canvas;r.style="max-width: 100%;",this._ctx=r.getContext("2d");for(const[p,v]of dh)this.registerGradient(p,v);this._container=e||!this._ownCanvas&&r.parentElement||document.body,this._defaultWidth=this._container.clientWidth||640,this._defaultHeight=this._container.clientHeight||270;let i;if(!(n.source&&(i=n.source.context))){if(!(i=n.audioCtx))try{i=new(window.AudioContext||window.webkitAudioContext),this._ownContext=!0}catch{throw new Ot(wv)}}if(!i.createGain)throw new Ot(Sv);const s=this._analyzer=[i.createAnalyser(),i.createAnalyser()],a=this._splitter=i.createChannelSplitter(2),o=this._merger=i.createChannelMerger(2);this._input=i.createGain(),this._output=i.createGain(),n.source&&this.connectInput(n.source);for(const p of[0,1])a.connect(s[p],p);o.connect(this._output),n.connectSpeakers!==!1&&this.connectOutput();for(const p of["_scaleX","_scaleR"])this[p]=document.createElement("canvas").getContext("2d");this._fsEl=n.fsElement||r;const c=()=>{this._fsTimeout||(this._fsTimeout=window.setTimeout(()=>{this._fsChanging||(this._setCanvas(_v),this._fsTimeout=0)},Nu))};window.ResizeObserver&&(this._observer=new ResizeObserver(c),this._observer.observe(this._container)),this._controller=new AbortController;const u=this._controller.signal;window.addEventListener(lh,c,{signal:u}),r.addEventListener(fv,()=>{this._fsChanging=!0,this._fsTimeout&&window.clearTimeout(this._fsTimeout),this._setCanvas(Vu),this._fsTimeout=window.setTimeout(()=>{this._fsChanging=!1,this._fsTimeout=0},Nu)},{signal:u});const d=()=>{i.state=="suspended"&&i.resume(),window.removeEventListener(ju,d)};window.addEventListener(ju,d),document.addEventListener("visibilitychange",()=>{document.visibilityState!="hidden"&&(this._frames=0,this._time=performance.now())},{signal:u}),this._setProps(n,!0),this.useCanvas&&this._ownCanvas&&this._container.appendChild(r),this._ready=!0,this._setCanvas(Hu)}get alphaBars(){return this._alphaBars}set alphaBars(e){this._alphaBars=!!e,this._calcBars()}get ansiBands(){return this._ansiBands}set ansiBands(e){this._ansiBands=!!e,this._calcBars()}get barSpace(){return this._barSpace}set barSpace(e){this._barSpace=+e||0,this._calcBars()}get channelLayout(){return this._chLayout}set channelLayout(e){this._chLayout=Ki(e,[cn,Wi,Kt,Iu]),this._input.disconnect(),this._input.connect(this._chLayout!=cn?this._splitter:this._analyzer[0]),this._analyzer[0].disconnect(),this._outNodes.length&&this._analyzer[0].connect(this._chLayout!=cn?this._merger:this._output),this._calcBars(),this._makeGrad()}get colorMode(){return this._colorMode}set colorMode(e){this._colorMode=Ki(e,[is,Du,Ru])}get fadePeaks(){return this._fadePeaks}set fadePeaks(e){this._fadePeaks=!!e}get fftSize(){return this._analyzer[0].fftSize}set fftSize(e){for(const r of[0,1])this._analyzer[r].fftSize=e;const n=this._analyzer[0].frequencyBinCount;this._fftData=[new Float32Array(n),new Float32Array(n)],this._calcBars()}get frequencyScale(){return this._frequencyScale}set frequencyScale(e){this._frequencyScale=Ki(e,[Tr,Aa,Oa,Xr]),this._calcBars()}get gradient(){return this._selectedGrads[0]}set gradient(e){this._setGradient(e)}get gradientLeft(){return this._selectedGrads[0]}set gradientLeft(e){this._setGradient(e,0)}get gradientRight(){return this._selectedGrads[1]}set gradientRight(e){this._setGradient(e,1)}get gravity(){return this._gravity}set gravity(e){this._gravity=e>0?+e:this._gravity||Yr.gravity}get height(){return this._height}set height(e){this._height=e,this._setCanvas(Ma)}get ledBars(){return this._showLeds}set ledBars(e){this._showLeds=!!e,this._calcBars()}get linearAmplitude(){return this._linearAmplitude}set linearAmplitude(e){this._linearAmplitude=!!e}get linearBoost(){return this._linearBoost}set linearBoost(e){this._linearBoost=e>=1?+e:1}get lineWidth(){return this._lineWidth}set lineWidth(e){this._lineWidth=+e||0}get loRes(){return this._loRes}set loRes(e){this._loRes=!!e,this._setCanvas(mv)}get lumiBars(){return this._lumiBars}set lumiBars(e){this._lumiBars=!!e,this._calcBars(),this._makeGrad()}get maxDecibels(){return this._analyzer[0].maxDecibels}set maxDecibels(e){for(const n of[0,1])this._analyzer[n].maxDecibels=e}get maxFPS(){return this._maxFPS}set maxFPS(e){this._maxFPS=e<0?0:+e||0}get maxFreq(){return this._maxFreq}set maxFreq(e){if(e<1)throw new Ot(xa);this._maxFreq=Math.min(e,this.audioCtx.sampleRate/2),this._calcBars()}get minDecibels(){return this._analyzer[0].minDecibels}set minDecibels(e){for(const n of[0,1])this._analyzer[n].minDecibels=e}get minFreq(){return this._minFreq}set minFreq(e){if(e<1)throw new Ot(xa);this._minFreq=+e,this._calcBars()}get mirror(){return this._mirror}set mirror(e){this._mirror=Math.sign(e)|0,this._calcBars(),this._makeGrad()}get mode(){return this._mode}set mode(e){const n=e|0;if(n>=0&&n<=10&&n!=9)this._mode=n,this._calcBars(),this._makeGrad();else throw new Ot(Cv,e)}get noteLabels(){return this._noteLabels}set noteLabels(e){this._noteLabels=!!e,this._createScales()}get outlineBars(){return this._outlineBars}set outlineBars(e){this._outlineBars=!!e,this._calcBars()}get peakFadeTime(){return this._peakFadeTime}set peakFadeTime(e){this._peakFadeTime=e>=0?+e:this._peakFadeTime||Yr.peakFadeTime}get peakHoldTime(){return this._peakHoldTime}set peakHoldTime(e){this._peakHoldTime=+e||0}get peakLine(){return this._peakLine}set peakLine(e){this._peakLine=!!e}get radial(){return this._radial}set radial(e){this._radial=!!e,this._calcBars(),this._makeGrad()}get radialInvert(){return this._radialInvert}set radialInvert(e){this._radialInvert=!!e,this._calcBars(),this._makeGrad()}get radius(){return this._radius}set radius(e){this._radius=+e||0,this._calcBars(),this._makeGrad()}get reflexRatio(){return this._reflexRatio}set reflexRatio(e){if(e=+e||0,e<0||e>=1)throw new Ot(Ev);this._reflexRatio=e,this._calcBars(),this._makeGrad()}get roundBars(){return this._roundBars}set roundBars(e){this._roundBars=!!e,this._calcBars()}get smoothing(){return this._analyzer[0].smoothingTimeConstant}set smoothing(e){for(const n of[0,1])this._analyzer[n].smoothingTimeConstant=e}get spinSpeed(){return this._spinSpeed}set spinSpeed(e){e=+e||0,(this._spinSpeed===void 0||e==0)&&(this._spinAngle=-Ta),this._spinSpeed=e}get splitGradient(){return this._splitGradient}set splitGradient(e){this._splitGradient=!!e,this._makeGrad()}get stereo(){return Ju("stereo","channelLayout"),this._chLayout!=cn}set stereo(e){Ju("stereo","channelLayout"),this.channelLayout=e?Kt:cn}get trueLeds(){return this._trueLeds}set trueLeds(e){this._trueLeds=!!e}get volume(){return this._output.gain.value}set volume(e){this._output.gain.value=e}get weightingFilter(){return this._weightingFilter}set weightingFilter(e){this._weightingFilter=Ki(e,[uh,Bu,Fu,Uu,$u,qu],"toUpperCase")}get width(){return this._width}set width(e){this._width=e,this._setCanvas(Ma)}get audioCtx(){return this._input.context}get canvas(){return this._ctx.canvas}get canvasCtx(){return this._ctx}get connectedSources(){return this._sources}get connectedTo(){return this._outNodes}get fps(){return this._fps}get fsHeight(){return this._fsHeight}get fsWidth(){return this._fsWidth}get isAlphaBars(){return this._flg.isAlpha}get isBandsMode(){return this._flg.isBands}get isDestroyed(){return this._destroyed}get isFullscreen(){return this._fsEl&&(document.fullscreenElement||document.webkitFullscreenElement)===this._fsEl}get isLedBars(){return this._flg.isLeds}get isLumiBars(){return this._flg.isLumi}get isOctaveBands(){return this._flg.isOctaves}get isOn(){return!!this._runId}get isOutlineBars(){return this._flg.isOutline}get pixelRatio(){return this._pixelRatio}get isRoundBars(){return this._flg.isRound}static get version(){return dv}connectInput(e){const n=e instanceof HTMLMediaElement;if(!(n||e.connect))throw new Ot(Tv);const r=n?this.audioCtx.createMediaElementSource(e):e;return this._sources.includes(r)||(r.connect(this._input),this._sources.push(r)),r}connectOutput(e=this.audioCtx.destination){if(!this._outNodes.includes(e)&&(this._output.connect(e),this._outNodes.push(e),this._outNodes.length==1))for(const n of[0,1])this._analyzer[n].connect(this._chLayout==cn&&!n?this._output:this._merger,0,n)}destroy(){if(!this._ready)return;const{audioCtx:e,canvas:n,_controller:r,_input:i,_merger:s,_observer:a,_ownCanvas:o,_ownContext:c,_splitter:u}=this;this._destroyed=!0,this._ready=!1,this.stop(),r.abort(),a&&a.disconnect(),this.onCanvasResize=null,this.onCanvasDraw=null,this._fsEl=null,this.disconnectInput(),this.disconnectOutput(),i.disconnect(),u.disconnect(),s.disconnect(),c&&e.close(),o&&n.remove(),this._calcBars()}disconnectInput(e,n){e?Array.isArray(e)||(e=[e]):e=Array.from(this._sources);for(const r of e){const i=this._sources.indexOf(r);if(n&&r.mediaStream)for(const s of r.mediaStream.getAudioTracks())s.stop();i>=0&&(r.disconnect(this._input),this._sources.splice(i,1))}}disconnectOutput(e){if(!(e&&!this._outNodes.includes(e))&&(this._output.disconnect(e),this._outNodes=e?this._outNodes.filter(n=>n!==e):[],this._outNodes.length==0))for(const n of[0,1])this._analyzer[n].disconnect()}getBars(){return Array.from(this._bars,({posX:e,freq:n,freqLo:r,freqHi:i,hold:s,peak:a,value:o})=>({posX:e,freq:n,freqLo:r,freqHi:i,hold:s,peak:a,value:o}))}getEnergy(e,n){if(e===void 0)return this._energy.val;if(e!=+e){if(e=="peak")return this._energy.peak;const o={bass:[20,250],lowMid:[250,500],mid:[500,2e3],highMid:[2e3,4e3],treble:[4e3,16e3]};if(!o[e])return null;[e,n]=o[e]}const r=this._freqToBin(e),i=n?this._freqToBin(n):r,s=this._chLayout==cn?1:2;let a=0;for(let o=0;o<s;o++)for(let c=r;c<=i;c++)a+=this._normalizedB(this._fftData[o][c]);return a/(i-r+1)/s}getOptions(e){Array.isArray(e)||(e=[e]);let n={};for(const r of Object.keys(Yr))e.includes(r)||(r=="gradient"&&this.gradientLeft!=this.gradientRight?(n.gradientLeft=this.gradientLeft,n.gradientRight=this.gradientRight):r!="start"&&(n[r]=this[r]));return n}registerGradient(e,n){if(typeof e!="string"||e.trim().length==0)throw new Ot(Mv);if(typeof n!="object")throw new Ot(Av);const{colorStops:r}=n;if(!Array.isArray(r)||!r.length)throw new Ot(Ov);const i=r.length,s=a=>+a!=a||a<0||a>1;r.forEach((a,o)=>{const c=o/Math.max(1,i-1);typeof a!="object"?r[o]={pos:c,color:a}:s(a.pos)&&(a.pos=c),s(a.level)&&(r[o].level=1-o/i)}),r.sort((a,o)=>a.level<o.level?1:a.level>o.level?-1:0),r[0].level=1,this._gradients[e]={bgColor:n.bgColor||hv,dir:n.dir,colorStops:r},this._selectedGrads.includes(e)&&this._makeGrad()}setCanvasSize(e,n){this._width=e,this._height=n,this._setCanvas(Ma)}setFreqRange(e,n){if(e<1||n<1)throw new Ot(xa);this._minFreq=Math.min(e,n),this.maxFreq=Math.max(e,n)}setLedParams(e){let n,r,i;e&&(n=e.maxLeds|0,r=+e.spaceV,i=+e.spaceH),this._ledParams=n>0&&r>0&&i>=0?[n,r,i]:void 0,this._calcBars()}setOptions(e){this._setProps(e)}setSensitivity(e,n){for(const r of[0,1])this._analyzer[r].minDecibels=Math.min(e,n),this._analyzer[r].maxDecibels=Math.max(e,n)}start(){this.toggleAnalyzer(!0)}stop(){this.toggleAnalyzer(!1)}toggleAnalyzer(e){const n=this.isOn;return e===void 0&&(e=!n),n&&!e?(cancelAnimationFrame(this._runId),this._runId=0):!n&&e&&!this._destroyed&&(this._frames=0,this._time=performance.now(),this._runId=requestAnimationFrame(r=>this._draw(r))),this.isOn}toggleFullscreen(){if(this.isFullscreen)document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{const e=this._fsEl;if(!e)return;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}}_binToFreq(e){return e*this.audioCtx.sampleRate/this.fftSize||1}_calcBars(){const e=this._bars=[];if(!this._ready){this._flg={isAlpha:!1,isBands:!1,isLeds:!1,isLumi:!1,isOctaves:!1,isOutline:!1,isRound:!1,noLedGap:!1};return}const{_ansiBands:n,_barSpace:r,canvas:i,_chLayout:s,_maxFreq:a,_minFreq:o,_mirror:c,_mode:u,_radial:d,_radialInvert:p,_reflexRatio:v}=this,w=i.width>>1,b=i.height>>1,S=s==Kt&&!d,D=s==Wi,O=u%10!=0,$=O&&this._frequencyScale==Tr,j=this._showLeds&&O&&!d,k=this._lumiBars&&O&&!d,T=this._alphaBars&&!k&&u!=Cr,x=this._outlineBars&&O&&!k&&!j,P=this._roundBars&&O&&!k&&!j,V=s!=Kt||v>0&&!k,F=i.height-(S&&!j?.5:0)>>S,H=F*(k||d?1:1-v)|0,C=i.width-w*(D||c!=0),G=S?i.height-F*2:0,oe=w*(c==-1&&!D&&!d);let me=Math.min(i.width,i.height)*.375*(s==Kt?1:this._radius)|0,ue=Math.min(w,b);p&&s!=Kt&&([me,ue]=[ue,me]);const te=h=>e.push({...h,peak:[0,0],hold:[0],alpha:[0],value:[0]}),Q=h=>{const f=this._freqToBin(h,"floor"),y=this._binToFreq(f),m=this._binToFreq(f+1),M=Math.log2(h/y)/Math.log2(m/y);return[f,M]};let K,_e,ge;if($){const h=(_,E,A)=>+_.toPrecision(A?Math.max(E,1+Math.log10(_)|0):E),f=_=>{const E=[1,1.12,1.25,1.4,1.6,1.8,2,2.24,2.5,2.8,3.15,3.55,4,4.5,5,5.6,6.3,7.1,8,9,10],A=Math.log10(_)|0,L=_/10**A;let I=1;for(;I<E.length&&L>E[I];)I++;return L-E[I-1]<E[I]-L&&I--,(E[I]*10**(A+5)|0)/1e5},y=[0,24,12,8,6,4,3,2,1][u],m=n?10**(3/(y*10)):2**(1/y),M=m**.5;let q=n?7.94328235/(y%2?1:M):Pu;do{let _=q;const E=h(_/M,4,!0),A=h(_*M,4,!0),[L,I]=Q(E),[z,U]=Q(A);n?_=y<4?f(_):h(_,_.toString()[0]<5?3:2):_=h(_,4,!0),_>=o&&te({posX:0,freq:_,freqLo:E,freqHi:A,binLo:L,binHi:z,ratioLo:I,ratioHi:U}),q*=m}while(q<=a);K=C/e.length,e.forEach((_,E)=>_.posX=oe+E*K);const W=e[0],g=e[e.length-1];_e=this._freqScaling(W.freqLo),ge=C/(this._freqScaling(g.freqHi)-_e),W.freqLo<o&&(W.freqLo=o,[W.binLo,W.ratioLo]=Q(o)),g.freqHi>a&&(g.freqHi=a,[g.binHi,g.ratioHi]=Q(a))}else if(O){const h=[0,24,12,8,6,4,3,2,1][u]*10,f=y=>{switch(this._frequencyScale){case Aa:return 1960/(26.81/(y+.53)-1);case Oa:return 700*(2**y-1);case Xr:return y}};K=C/h,_e=this._freqScaling(o),ge=C/(this._freqScaling(a)-_e);for(let y=0,m=0;y<h;y++,m+=K){const M=f(_e+m/ge),q=f(_e+(m+K/2)/ge),W=f(_e+(m+K)/ge),[g,_]=Q(M),[E,A]=Q(W);te({posX:oe+m,freq:q,freqLo:M,freqHi:W,binLo:g,binHi:E,ratioLo:_,ratioHi:A})}}else{K=1,_e=this._freqScaling(o),ge=C/(this._freqScaling(a)-_e);const h=this._freqToBin(o,"floor"),f=this._freqToBin(a);let y=-999;for(let m=h;m<=f;m++){const M=this._binToFreq(m),q=oe+Math.round(ge*(this._freqScaling(M)-_e));if(q>y)te({posX:q,freq:M,freqLo:M,freqHi:M,binLo:m,binHi:m,ratioLo:0,ratioHi:0}),y=q;else if(e.length){const W=e[e.length-1];W.binHi=m,W.freqHi=M,W.freq=(W.freqLo*M)**.5}}}let Ce=0,ye=0;if(j){const h=this._pixelRatio/(window.devicePixelRatio>1&&window.screen.height<=540?2:1),f=[[],[128,3,.45],[128,4,.225],[96,6,.225],[80,6,.225],[80,6,.125],[64,6,.125],[48,8,.125],[24,16,.125]],y=this._ledParams,[m,M,q]=y||f[u];let W,g=H;if(y){const _=2*h;let E;W=m+1;do W--,E=g/W/(1+M),ye=E*M;while((E<_||ye<_)&&W>1)}else{const _=540/M;ye=Math.min(M*h,Math.max(2,g/_+.1|0))}V&&(g+=ye),y||(W=Math.min(m,g/(ye*2)|0)),Ce=q>=1?q:K*q,this._leds=[W,Ce,ye,g/W-ye]}const ne=Math.min(K-1,r*(r>0&&r<1?K:1));O&&(K-=Math.max(j?Ce:0,ne)),e.forEach((h,f)=>{let y=h.posX,m=K;O&&(r==0&&!j?(y|=0,m|=0,f>0&&y>e[f-1].posX+e[f-1].width&&(y--,m++)):y+=Math.max(j?Ce:0,ne)/2,h.posX=y),h.barCenter=y+(K==1?0:m/2),h.width=m});const l=[];for(const h of[0,1]){const f=s==Kt?(F+G)*h:0,y=f+F,m=f+H-(!j||V?0:ye);l.push({channelTop:f,channelBottom:y,analyzerBottom:m})}this._aux={analyzerHeight:H,analyzerWidth:C,centerX:w,centerY:b,channelCoords:l,channelHeight:F,channelGap:G,initialX:oe,innerRadius:me,outerRadius:ue,scaleMin:_e,unitWidth:ge},this._flg={isAlpha:T,isBands:O,isLeds:j,isLumi:k,isOctaves:$,isOutline:x,isRound:P,noLedGap:V},this._createScales()}_createScales(){if(!this._ready)return;const{analyzerWidth:e,initialX:n,innerRadius:r,scaleMin:i,unitWidth:s}=this._aux,{canvas:a,_frequencyScale:o,_mirror:c,_noteLabels:u,_radial:d,_scaleX:p,_scaleR:v}=this,w=p.canvas,b=v.canvas,S=[],D=this._chLayout==Wi,O=this._chLayout==Kt,$=Math.min(a.width,a.height),j=["C",,"D",,"E","F",,"G",,"A",,"B"],k=$/34|0,T=w.height>>1,x=k>>1,P=T*(u?.7:1.5),V=x*(u?1:2),F=2**(1/12);if(!u&&(this._ansiBands||o!=Tr))S.push(16,31.5,63,125,250,500,1e3,2e3,4e3),o==Xr?S.push(6e3,8e3,1e4,12e3,14e3,16e3,18e3,2e4,22e3):S.push(8e3,16e3);else{let ue=Pu;for(let te=-1;te<11;te++)for(let Q=0;Q<12;Q++){if(ue>=this._minFreq&&ue<=this._maxFreq){const K=j[Q],_e=K=="C";(K&&u&&!c&&!D||_e)&&S.push(u?[ue,K+(_e?te:"")]:ue)}ue*=F}}b.width=b.height=Math.max($*.15,(r<<1)+O*k);const H=b.width>>1,C=H-k*.7,G=(ue,te)=>{const Q=kr*(ue/a.width),K=Q-Ta,_e=C*Math.cos(K),ge=C*Math.sin(K);v.save(),v.translate(H+_e,H+ge),v.rotate(Q),v.fillText(te,0,0),v.restore()};w.width|=0,p.fillStyle=v.strokeStyle=yv,p.fillRect(0,0,w.width,w.height),v.arc(H,H,H-k/2,0,kr),v.lineWidth=k,v.stroke(),p.fillStyle=v.fillStyle=Gu,p.font=`${T}px ${Ji}`,v.font=`${x}px ${Ji}`,p.textAlign=v.textAlign="center";let oe=-P/4,me=-V;for(const ue of S){const[te,Q]=Array.isArray(ue)?ue:[ue,ue<1e3?ue|0:`${(ue/100|0)/10}k`],K=s*(this._freqScaling(te)-i),_e=w.height*.75,ge=Q[0]=="C",Ce=T*(u&&!c&&!D?ge?1.2:.6:3);if(p.fillStyle=v.fillStyle=ge&&!c&&!D?vv:Gu,u){const ye=o==Tr,ne=o==Xr;let l=["C"];if((ye||te>2e3||!ne&&te>250||(!d||O)&&(!ne&&te>125||te>1e3))&&l.push("G"),(ye||te>4e3||!ne&&te>500||(!d||O)&&(!ne&&te>250||te>2e3))&&l.push("E"),(ne&&te>4e3||(!d||O)&&(ye||te>2e3||!ne&&te>500))&&l.push("D","F","A","B"),!l.includes(Q[0]))continue}K>=oe+P/2&&K<=e&&(p.fillText(Q,D&&c==-1?e-K:n+K,_e,Ce),(D||c&&(K>P||c==1))&&p.fillText(Q,D&&c!=1?e+K:(n||a.width)-K,_e,Ce),oe=K+Math.min(Ce,p.measureText(Q).width)/2),K>=me+V&&K<e-V&&(G(D&&c==1?e-K:K,Q),(D||c&&(K>V||c==1))&&G(D&&c!=-1?e+K:-K,Q),me=K)}}_draw(e){this._runId=requestAnimationFrame(X=>this._draw(X));const n=e-this._time,r=e-this._last,i=this._maxFPS?975/this._maxFPS:0;if(r<i)return;this._last=e-(i?r%i:0),this._frames++,n>=1e3&&(this._fps=this._frames/n*1e3,this._frames=0,this._time=e);const{isAlpha:s,isBands:a,isLeds:o,isLumi:c,isOctaves:u,isOutline:d,isRound:p,noLedGap:v}=this._flg,{analyzerHeight:w,centerX:b,centerY:S,channelCoords:D,channelHeight:O,channelGap:$,initialX:j,innerRadius:k,outerRadius:T}=this._aux,{_bars:x,canvas:P,_canvasGradients:V,_chLayout:F,_colorMode:H,_ctx:C,_energy:G,_fadePeaks:oe,fillAlpha:me,_fps:ue,_linearAmplitude:te,_lineWidth:Q,maxDecibels:K,minDecibels:_e,_mirror:ge,_mode:Ce,overlay:ye,_radial:ne,showBgColor:l,showPeaks:h,useCanvas:f,_weightingFilter:y}=this,m=this._scaleX.canvas,M=this._scaleR.canvas,q=ue*this._peakFadeTime/1e3,W=ue**2,g=this._gravity*1e3,_=ue*this._peakHoldTime/1e3,E=F==Iu,A=F==Wi,L=F==Kt,I=F==cn,z=o&&this._trueLeds&&H==is,U=ne?P.width:this._aux.analyzerWidth,B=j+U,R=h&&this._peakLine&&Ce==Cr,Y=ne?T-k:w,J=Y/this._pixelRatio,[Z,re,pe,Ee]=this._leds||[];G.val>0&&ue>0&&(this._spinAngle+=this._spinSpeed*kr/60/ue);const Se=X=>{if(this._reflexRatio>0&&!c&&!ne){let be,zt;this.reflexFit||L?(be=L&&X==0?O+$:0,zt=O-w):(be=P.height-w*2,zt=w),C.save(),C.globalAlpha=this.reflexAlpha,this.reflexBright!=1&&(C.filter=`brightness(${this.reflexBright})`),C.setTransform(1,0,0,-1,0,P.height),C.drawImage(P,0,D[X].channelTop,P.width,w,0,be,P.width,zt),C.restore()}},at=()=>{this.showScaleX&&(ne?(C.save(),C.translate(b,S),this._spinSpeed&&C.rotate(this._spinAngle+Ta),C.drawImage(M,-M.width>>1,-M.width>>1),C.restore()):C.drawImage(m,0,P.height-m.height))},Ze=X=>{const be=X**2,zt=424.36,Je=11599.29,Ei=25122.25,_n=544496.41,rn=148693636,qn=Hn=>20*Math.log10(Hn);switch(y){case Bu:const Hn=rn*be**2/((be+zt)*Math.sqrt((be+Je)*(be+_n))*(be+rn));return 2+qn(Hn);case Fu:const Vn=rn*be*X/((be+zt)*Math.sqrt(be+Ei)*(be+rn));return .17+qn(Vn);case Uu:const Us=rn*be/((be+zt)*(be+rn));return .06+qn(Us);case $u:const Ti=((103791848e-2-be)**2+108076816e-2*be)/((9837328-be)**2+11723776*be),$s=X/68966888496476e-18*Math.sqrt(Ti/((be+79919.29)*(be+1345600)));return qn($s);case qu:const Mi=-4737338981378384e-39*X**6+2043828333606125e-30*X**4-1363894795463638e-22*be+1,Gn=1306612257412824e-34*X**5-2118150887518656e-26*X**3+.0005559488023498642*X,bt=.0001246332637532143*X/Math.hypot(Mi,Gn);return 18.2+qn(bt)}return 0},dt=(X,be,zt)=>{C.beginPath(),C.moveTo(X,be),C.lineTo(X,zt),C.stroke()},ft=X=>{if(X&&Q){const be=C.globalAlpha;C.globalAlpha=1,C.stroke(),C.globalAlpha=be}},yt=X=>Math.max(0,(X*Z|0)*(Ee+pe)-pe),Ci=X=>{G.val=X,G.peak>0&&(G.hold--,G.hold<0&&(G.peak+=G.hold*g/W/P.height*this._pixelRatio)),X>=G.peak&&(G.peak=X,G.hold=_)};ye&&C.clearRect(0,0,P.width,P.height);let et=0;const vt=x.length,Hr=I?1:2;for(let X=0;X<Hr;X++){const{channelTop:be,channelBottom:zt,analyzerBottom:Je}=D[X],Ei=this._gradients[this._selectedGrads[X]],_n=Ei.colorStops,rn=_n.length,qn=!l||o&&!ye?"#000":Ei.bgColor,Hn=L&&ne&&X?-1:1,Vn=!X&&ge==-1||X&&ge==1,Us=!A||X&&ge!=1?0:U>>(X||!Vn),Ti=A&&Vn?-1:1,$s=()=>{const ie=m.height,ce=ie>>1,de=te?100:K,Fe=te?0:_e,Ve=te?20:5,ht=w/(de-Fe),Wt=ge!=-1&&(!A||X==0||ge==1),yn=ge!=1&&(!A||X!=ge);C.save(),C.fillStyle=zu,C.font=`${ce}px ${Ji}`,C.textAlign="right",C.lineWidth=1;for(let vn=de;vn>Fe;vn-=Ve){const vr=be+(de-vn)*ht,We=vn%2==0|0;if(We){const ot=vr+ce*(vr==be?.8:.35);Wt&&C.fillText(vn,ie*.85,ot),yn&&C.fillText(vn,(A?U:P.width)-ie*.1,ot),C.strokeStyle=zu,C.setLineDash([2,4]),C.lineDashOffset=0}else C.strokeStyle=bv,C.setLineDash([2,8]),C.lineDashOffset=1;C.beginPath(),C.moveTo(j+ie*We*Wt,~~vr+.5),C.lineTo(B-ie*We*yn,~~vr+.5),C.stroke()}C.restore()},Mi=(ie,ce)=>{const de=Rt[ie]+(ie<Rt.length-1?(Rt[ie+1]-Rt[ie])*ce:0);return isNaN(de)?-1/0:de},Gn=(ie,ce=Ti)=>ce*kr*((ie+Us)/P.width)+this._spinAngle,bt=(ie,ce,de)=>{const Fe=k+ce*Hn,Ve=Gn(ie,de);return[b+Fe*Math.cos(Ve),S+Fe*Math.sin(Ve)]},qs=(ie,ce,de,Fe,Ve)=>{C.beginPath();for(const ht of ge&&!A?[1,-1]:[Ti]){const[Wt,yn]=p?[Gn(ie,ht),Gn(ie+de,ht)]:[];C.moveTo(...bt(ie,ce,ht)),C.lineTo(...bt(ie,ce+Fe,ht)),p?C.arc(b,S,k+(ce+Fe)*Hn,Wt,yn,ht!=1):C.lineTo(...bt(ie+de,ce+Fe,ht)),C.lineTo(...bt(ie+de,ce,ht)),p&&!Ve&&C.arc(b,S,k+ce*Hn,yn,Wt,ht==1)}ft(Ve),C.fill()},Hs=(ie=0,ce=0)=>{let de;if(H==is&&!z||Ce==Cr)de=V[X];else{const Fe=H==Du?ce%rn:_n.findLastIndex(Ve=>o?yt(ie)<=yt(Ve.level):ie<=Ve.level);de=_n[Fe].color}C.fillStyle=C.strokeStyle=de};if(f){if(A&&!ne){const ie=U*(X+Vn),ce=Vn?-1:1;C.setTransform(ce,0,0,1,ie,0)}if((!ye||l)&&(ye&&(C.globalAlpha=this.bgAlpha),C.fillStyle=qn,(X==0||!ne&&!E)&&C.fillRect(j,be-$,U,(ye&&this.reflexAlpha==1?w:O)+$),C.globalAlpha=1),this.showScaleY&&!c&&!ne&&(X==0||!E)&&$s(),o?(C.setLineDash([Ee,pe]),C.lineWidth=x[0].width):C.lineWidth=d?Math.min(Q,x[0].width/2):Q,C.save(),!ne){const ie=new Path2D;ie.rect(0,be,P.width,w),C.clip(ie)}}let Rt=this._fftData[X];this._analyzer[X].getFloatFrequencyData(Rt),y&&(Rt=Rt.map((ie,ce)=>ie+Ze(this._binToFreq(ce)))),C.beginPath();let Vr=[];for(let ie=0;ie<vt;ie++){const ce=x[ie],{posX:de,barCenter:Fe,width:Ve,freq:ht,binLo:Wt,binHi:yn,ratioLo:vn,ratioHi:vr}=ce;let We=Math.max(Mi(Wt,vn),Mi(yn,vr));for(let Re=Wt+1;Re<yn;Re++)Rt[Re]>We&&(We=Rt[Re]);if(We=this._normalizedB(We),ce.value[X]=We,et+=We,ce.peak[X]>0&&ce.alpha[X]>0&&(ce.hold[X]--,ce.hold[X]<0)){if(oe&&!R){const Re=!s||d&&Q>0?1:s?ce.peak[X]:me;ce.alpha[X]=Re*(1+ce.hold[X]/q)}else ce.peak[X]+=ce.hold[X]*g/W/J;ce.alpha[X]<=0&&(ce.peak[X]=0)}if(We>=ce.peak[X]&&(ce.peak[X]=We,ce.hold[X]=_,ce.alpha[X]=!s||d&&Q>0?1:s?We:me),!f)continue;C.globalAlpha=c||s?We:d?me:1,Hs(We,ie);const ot=c?Y:o?yt(We):We*Y|0;if(Ce==Cr){const Re=ie?0:(this._normalizedB(Rt[x[1].binLo])*Y+ot)/2;if(ne){if(ie==0&&(A&&C.moveTo(...bt(0,0)),C.lineTo(...bt(0,de<0?Re:ot))),de>=0){const Mt=[de,ot];C.lineTo(...bt(...Mt)),Vr.push(Mt)}}else{if(ie==0)if(ge==-1&&!A)C.moveTo(j,Je-(de<j?Re:ot));else{const Mt=Wt?this._normalizedB(Rt[Wt-1])*Y:ot;C.moveTo(j-Q,Je-Mt)}(A||ge!=-1||de>=j)&&C.lineTo(de,Je-ot)}}else if(o){if(l&&!ye&&(X==0||!E)){const Re=C.globalAlpha;C.strokeStyle=gv,C.globalAlpha=1,dt(Fe,be,Je),C.strokeStyle=C.fillStyle,C.globalAlpha=Re}if(z){const Re=c?0:_n.findLastIndex(zn=>yt(We)<=yt(zn.level));let Mt=Je;for(let zn=rn-1;zn>=Re;zn--){C.strokeStyle=_n[zn].color;let Ko=Je-(zn==Re?ot:yt(_n[zn].level));dt(Fe,Mt,Ko),Mt=Ko-pe}}else dt(Fe,Je,Je-ot)}else if(de>=j)if(ne)qs(de,0,Ve,ot,d);else if(p){const Re=Ve/2,Mt=Je+Re;C.beginPath(),C.moveTo(de,Mt),C.lineTo(de,Mt-ot),C.arc(Fe,Mt-ot,Re,Wo,kr),C.lineTo(de+Ve,Mt),ft(d),C.fill()}else{const Re=d?C.lineWidth:0;C.beginPath(),C.rect(de,Je+Re,Ve,-ot-Re),ft(d),C.fill()}const br=ce.peak[X],Jo=ce.alpha[X];if(br>0&&Jo>0&&h&&!R&&!c&&de>=j&&de<B){if(oe?C.globalAlpha=Jo:d&&Q>0?C.globalAlpha=1:s&&(C.globalAlpha=br),(H==Ru||z)&&Hs(br),o){const Re=yt(br);Re>=pe&&C.fillRect(de,Je-Re,Ve,Ee)}else if(!ne)C.fillRect(de,Je-br*Y,Ve,2);else if(Ce!=Cr){const Re=br*Y;qs(de,Re,Ve,!this._radialInvert||L||Re+k>=2?-2:2)}}}if(f){if(C.globalAlpha=1,Ce==Cr){if(Hs(),ne&&!A){if(ge){let ie;for(;ie=Vr.pop();)C.lineTo(...bt(...ie,-1))}C.closePath()}if(Q>0&&C.stroke(),me>0){if(ne){const ie=A?Gn(U>>1):0,ce=A?Gn(U):kr;C.moveTo(...bt(A?U>>1:0,0)),C.arc(b,S,k,ie,ce,A?!Vn:!0)}else C.lineTo(B,Je),C.lineTo(j,Je);C.globalAlpha=me,C.fill(),C.globalAlpha=1}if((R||ne&&h)&&(Vr=[],C.beginPath(),x.forEach((ie,ce)=>{let de=ie.posX,Fe=ie.peak[X],Ve=ce?"lineTo":"moveTo";if(ne&&de<0){const ht=x[ce+1];Fe=xv(de,Fe,ht.posX,ht.peak[X],0),de=0}Fe*=Y,R?(C[Ve](...ne?bt(de,Fe):[de,Je-Fe]),ne&&ge&&!A&&Vr.push([de,Fe])):Fe>0&&qs(de,Fe,1,-2)}),R)){let ie;for(;ie=Vr.pop();)C.lineTo(...bt(...ie,-1));C.lineWidth=1,C.stroke()}}C.restore(),A&&!ne&&C.setTransform(1,0,0,1,0,0),(!A&&!E||X)&&Se(X)}}if(Ci(et/(vt<<Hr-1)),f&&(ge&&!ne&&!A&&(C.setTransform(-1,0,0,1,P.width-j,0),C.drawImage(P,j,0,b,P.height,0,0,b,P.height),C.setTransform(1,0,0,1,0,0)),C.setLineDash([]),at()),this.showFPS){const X=m.height;C.font=`bold ${X}px ${Ji}`,C.fillStyle=pv,C.textAlign="right",C.fillText(Math.round(ue),P.width-X,X*2)}this.onCanvasDraw&&(C.save(),C.fillStyle=C.strokeStyle=V[0],this.onCanvasDraw(this,{timestamp:e,canvasGradients:V}),C.restore())}_freqScaling(e){switch(this._frequencyScale){case Tr:return Math.log2(e);case Aa:return 26.81*e/(1960+e)-.53;case Oa:return Math.log2(1+e/700);case Xr:return e}}_freqToBin(e,n="round"){const r=this._analyzer[0].frequencyBinCount-1,i=Math[n](e*this.fftSize/this.audioCtx.sampleRate);return i<r?i:r}_makeGrad(){if(!this._ready)return;const{canvas:e,_ctx:n,_radial:r,_reflexRatio:i}=this,{analyzerWidth:s,centerX:a,centerY:o,initialX:c,innerRadius:u,outerRadius:d}=this._aux,{isLumi:p}=this._flg,v=this._chLayout==Kt,w=1-i,b=p?e.height:e.height*(1-i*!v)|0;for(const S of[0,1]){const D=this._gradients[this._selectedGrads[S]],O=D.colorStops,$=D.dir=="h";let j;if(r?j=n.createRadialGradient(a,o,d,a,o,u-(d-u)*v):j=n.createLinearGradient(...$?[c,0,c+s,0]:[0,0,0,b]),O){const k=v&&!this._splitGradient&&(!$||r);for(let T=0;T<1+k;T++){const x=O.length-1;O.forEach((P,V)=>{let F=P.pos;if(k&&(F/=2),v&&!p&&!r&&!$&&(F*=w,!k&&F>.5*w&&(F+=.5*i)),T==1)if(r||p){const H=x-V;P=O[H],F=1-P.pos/2}else V==0&&F>0&&j.addColorStop(.5,P.color),F+=.5;j.addColorStop(F,P.color),v&&V==x&&F<.5&&j.addColorStop(.5,P.color)})}}this._canvasGradients[S]=j}}_normalizedB(e){const n=this._linearAmplitude,r=n?1/this._linearBoost:1,i=(c,u,d)=>c<=u?u:c>=d?d:c,s=c=>10**(c/20);let a=this.maxDecibels,o=this.minDecibels;return n&&(a=s(a),o=s(o),e=s(e)**r),i((e-o)/(a-o)**r,0,1)}_setCanvas(e){if(!this._ready)return;const{canvas:n,_ctx:r}=this,i=this._scaleX.canvas,s=window.devicePixelRatio/(this._loRes+1);let a=window.screen.width*s,o=window.screen.height*s;Math.abs(window.orientation)==90&&a<o&&([a,o]=[o,a]);const c=this.isFullscreen,u=c&&this._fsEl==n,d=u?a:(this._width||this._container.clientWidth||this._defaultWidth)*s|0,p=u?o:(this._height||this._container.clientHeight||this._defaultHeight)*s|0;this._pixelRatio=s,this._fsWidth=a,this._fsHeight=o,!(e!=Hu&&n.width==d&&n.height==p)&&(n.width=d,n.height=p,this.overlay||(r.fillStyle="#000",r.fillRect(0,0,d,p)),r.lineJoin="bevel",i.width=d,i.height=Math.max(20*s,Math.min(d,p)/32|0),this._calcBars(),this._makeGrad(),this._fsStatus!==void 0&&this._fsStatus!==c&&(e=Vu),this._fsStatus=c,this.onCanvasResize&&this.onCanvasResize(e,this))}_setGradient(e,n){if(!this._gradients.hasOwnProperty(e))throw new Ot(kv,e);[0,1].includes(n)||(this._selectedGrads[1]=e,n=0),this._selectedGrads[n]=e,this._makeGrad()}_setProps(e,n){const r=["onCanvasDraw","onCanvasResize"],i=["gradientLeft","gradientRight","stereo"],s=Object.keys(Yr).filter(a=>a!="start").concat(r,i);(n||e===void 0)&&(e={...Yr,...e});for(const a of Object.keys(e))r.includes(a)&&typeof e[a]!="function"?this[a]=void 0:s.includes(a)&&(this[a]=e[a]);e.start!==void 0&&this.toggleAnalyzer(e.start)}}const ki=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},Pv={__name:"Client",emits:["transcript","started"],setup(t,{expose:e,emit:n}){const r=n,i=In(null),s=In(null),a=In(null),o=new mn({params:{baseUrl:"http://localhost:8000"},transport:new ch,enableMic:!0,enableCam:!1,callbacks:{onConnected:()=>{console.log("Connected to the server!")},onDisconnected:()=>{console.log("Disconnected from the server!")},onBotConnected:()=>{console.log("Bot connected!")},onBotDisconnected:()=>{console.log("Bot disconnected!")},onGenericMessage:b=>{console.log("Generic message:",b),b.hasOwnProperty("sources")&&(Ge.sources=b.sources,Ge.show_citations=!0)},onTransportStateChanged:b=>{b==="ready"&&p()}}});async function c(){i.value.play(),a.value.close()}function u(){o.on(ee.TrackStarted,(b,S)=>{console.info("Participant:",S),!(S!=null&&S.local)&&d(b)}),o.on(ee.UserTranscript,b=>{console.log("User:",b.text)}),o.on(ee.BotTranscript,b=>{console.log("Bot:",b.text),r("transcript",b.text)}),o.on(ee.BotLlmText,b=>{console.log("Bot LLM:",b.text)}),o.on(ee.BotStartedSpeaking,(b,S)=>{Ge.bot_speaking=!0,r("started"),console.info("Bot speaking...")}),o.on(ee.BotStoppedSpeaking,(b,S)=>{Ge.bot_speaking=!1,console.info("Bot stopped speaking...")})}function d(b){if(i.value.srcObject){const S=i.value.srcObject.getAudioTracks()[0];if((S==null?void 0:S.id)===b.id)return}i.value.srcObject=new MediaStream([b])}function p(){var D;console.log("Setting up media tracks...");const b=o.tracks();if(console.log("Tracks:",b),!((D=b.bot)!=null&&D.audio))return;console.log("Setting up audio track");const S=b.bot.audio;if(i.value.srcObject){const O=i.value.srcObject.getAudioTracks()[0];if((O==null?void 0:O.id)===S.id)return}i.value.srcObject=new MediaStream([S])}async function v(){u(),await o.initDevices()}async function w(){await o.connect()}return Ls(()=>{i.value.play().then(()=>{console.log("Autoplay is enabled!"),v()}).catch(()=>{a.value.showModal()});const b=document.querySelector(".chat-display");s.value=new Lv(b,{ansiBands:!1,showScaleX:!1,bgAlpha:0,overlay:!0,mode:1,frequencyScale:"log",radial:!0,roundBars:!0,radius:0,mirror:!0,radialInvert:!0,showPeaks:!1,gradient:"prism",channelLayout:"dual-vertical",smoothing:.5,source:i.value,connectSpeakers:!1})}),e({connect:w}),(b,S)=>(_t(),Pt(Ct,null,[Oe("audio",{ref_key:"audio",ref:i,src:"silence.mp3",playsinline:"",autoplay:""},null,512),Oe("dialog",{ref_key:"dialog",ref:a,class:"permission",onCancel:S[0]||(S[0]=Ug(()=>{},["prevent"]))},[S[1]||(S[1]=Oe("div",{class:"dialog-header"},[Oe("b",null,"Codex"),Oe("p",null," Hello dear user! We know this is kinda annoying, but we need your autoplay permission, so that we can talk to you. ")],-1)),Oe("div",{class:"dialog-footer"},[Oe("button",{class:"btn",onClick:c}," Give permission ")])],544)],64))}},Iv=ki(Pv,[["__scopeId","data-v-d30415d7"]]),Dv={},Rv={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};function Nv(t,e){return _t(),Pt("svg",Rv,e[0]||(e[0]=[Oe("path",{d:"M96 0C43 0 0 43 0 96L0 416c0 53 43 96 96 96l288 0 32 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l0-64c17.7 0 32-14.3 32-32l0-320c0-17.7-14.3-32-32-32L384 0 96 0zm0 384l256 0 0 64L96 448c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16zm16 48l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"},null,-1)]))}const jv=ki(Dv,[["render",Nv]]),Bv={},Fv={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512"};function Uv(t,e){return _t(),Pt("svg",Fv,e[0]||(e[0]=[Oe("path",{d:"M144 480C64.5 480 0 415.5 0 336c0-62.8 40.2-116.2 96.2-135.9c-.1-2.7-.2-5.4-.2-8.1c0-88.4 71.6-160 160-160c59.3 0 111 32.2 138.7 80.2C409.9 102 428.3 96 448 96c53 0 96 43 96 96c0 12.2-2.3 23.8-6.4 34.6C596 238.4 640 290.1 640 352c0 70.7-57.3 128-128 128l-368 0zm79-217c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l39-39L296 392c0 13.3 10.7 24 24 24s24-10.7 24-24l0-134.1 39 39c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-80-80c-9.4-9.4-24.6-9.4-33.9 0l-80 80z"},null,-1)]))}const $v=ki(Bv,[["render",Uv]]),qv={class:"chat-input"},Hv=["disabled"],Vv={for:"file"},Gv=["disabled"],zv={key:1,class:"input-container"},Wv={__name:"ChatToolbar",emits:["connect"],setup(t,{emit:e}){const n=e;function r(){document.querySelector("#file").click()}async function i(a){const o=a.target.files[0],c=new FormData;c.append("file",o);const u=await codex.upload(c);if(!u){alert("Document could not be uploaded. Please try again.");return}Ge.document=u.data.document,Ge.document_loaded=!0,n("connect")}function s(){Ge.show_citations=!Ge.show_citations}return(a,o)=>(_t(),Pt("div",qv,[tn(Ge).document_loaded?(_t(),Pt("div",zv,[Oe("label",null,[ze(jv),Oe("span",null,Es(tn(Ge).document.filename),1)]),Oe("button",{class:"btn",onClick:s},"Citations")])):(_t(),Pt("div",{key:0,class:"input-container",disabled:!tn(Ge).connected},[Oe("label",Vv,[ze($v),o[0]||(o[0]=Oe("span",null,"Upload",-1))]),Oe("button",{class:"btn",onClick:r},"Browse files"),Oe("input",{type:"file",id:"file",accept:"application/pdf",onChange:i,disabled:!tn(Ge).connected},null,40,Gv)],8,Hv))]))}},Jv={class:"transcript-container"},Kv={__name:"Transcripts",setup(t,{expose:e}){const n=In([]),r=In(""),i=In(!1);function s(o){const c=Math.ceil(o.split(" ").length/3)*1e3;n.value.push({text:o,duration:c})}async function a(){if(i.value||!n.value.length)return;i.value=!0;const{text:o,duration:c}=n.value.shift();r.value=o,await Sd(),await new Promise(u=>setTimeout(u,c)),r.value="",i.value=!1,a()}return e({add_transcript:s,process_queue:a}),(o,c)=>(_t(),Pt("div",Jv,[Oe("p",null,Es(r.value),1)]))}},Xv={key:0,class:"citations-container"},Yv={__name:"Citations",setup(t){return(e,n)=>(_t(),rf(_g,null,{default:Md(()=>[tn(Ge).show_citations?(_t(),Pt("div",Xv,[n[0]||(n[0]=Oe("b",null,"Citations",-1)),Oe("ul",null,[(_t(!0),Pt(Ct,null,yp(tn(Ge).sources,r=>(_t(),Pt("li",null,Es(r),1))),256))])])):Qp("",!0)]),_:1}))}},Qv=ki(Yv,[["__scopeId","data-v-58c76605"]]),Zv={},eb={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 480 512"};function tb(t,e){return _t(),Pt("svg",eb,e[0]||(e[0]=[Oe("path",{d:"M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"},null,-1)]))}const nb=ki(Zv,[["render",tb]]),rb=["connected","title"],ib={class:"chat-display"},sb=["loaded"],ab={__name:"App",setup(t){const e=In(null),n=In([]);async function r(){await e.value.connect()}function i(a){n.value.add_transcript(a)}function s(){n.value.process_queue()}return Ls(()=>{}),(a,o)=>(_t(),Pt(Ct,null,[Oe("header",null,[o[0]||(o[0]=Oe("span",null,"Codex",-1)),Oe("label",{connected:tn(Ge).connected,title:tn(Ge).connected?"":"Could not connect to the server, please refresh the page."},null,8,rb)]),Oe("main",null,[Oe("div",ib,[Oe("span",{class:"placeholder",loaded:tn(Ge).document_loaded},[ze(nb),o[1]||(o[1]=Oe("i",null,"Upload a file to get started",-1))],8,sb),ze(Kv,{ref_key:"transcripts",ref:n},null,512),ze(Qv,{ref:"citations"},null,512)]),ze(Wv,{ref:"chat_toolbar",onConnect:r},null,512)]),ze(Iv,{ref_key:"client",ref:e,onTranscript:i,onStarted:s},null,512)],64))}};Hg(ab).mount("#app");
